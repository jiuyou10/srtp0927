{"version":3,"sources":["lib/graphql/mutations/Login/index.ts","lib/graphql/mutations/LogOut/index.ts","lib/graphql/mutations/CreateAccount/index.ts","lib/graphql/mutations/SaveUserAnswer/index.ts","lib/graphql/mutations/SavePartialAnswer/index.ts","lib/graphql/mutations/DoctorLogOut/index.ts","lib/graphql/mutations/DoctorLogIn/index.ts","lib/graphql/mutations/AddDiagnosis/index.ts","lib/graphql/mutations/AddDoctor/index.ts","reportWebVitals.ts","lib/components/PrivateRoute/index.tsx","lib/components/LoadingIndicator/index.tsx","lib/components/ErrorIndicator/index.tsx","lib/components/ReportPdf/index.tsx","lib/components/ReturnToHomeHeader/index.tsx","lib/components/LineChart/index.tsx","lib/utils/constants.ts","lib/components/LineChartPopOver/index.tsx","sections/AppHeader/assets/logo.png","sections/Login/index.tsx","sections/Home/assets/cardIcon.png","lib/graphql/queries/QuestionnaireList/index.ts","lib/graphql/queries/QuestionnaireContent/index.ts","lib/graphql/queries/Report/index.ts","lib/graphql/queries/ReportForAdmin/index.ts","lib/graphql/queries/DoctorList/index.ts","sections/Home/components/EnterGenderAndAgeDialog/index.tsx","sections/Home/components/ChildrenEnterGenderAndAgeDialog/index.tsx","sections/Home/components/PhcssGenderAndAgeDialog/index.tsx","sections/Home/components/PsssGenderDialog/index.tsx","sections/Home/index.tsx","lib/graphql/mutations/PatientLogOut/index.ts","sections/Report/components/withReportPdfData/index.tsx","lib/graphql/globalTypes.ts","sections/AppHeader/index.tsx","sections/Sider/components/PersonalInfomation/index.tsx","sections/Sider/index.tsx","sections/Form/Components/ProgressBar/index.tsx","sections/Form/Components/Timer/index.tsx","sections/Form/Customization/psqi/index.tsx","sections/Form/index.tsx","sections/Form/Customization/yaleBrown/index.ts","sections/CreateAccount/index.tsx","sections/Report/index.tsx","lib/graphql/queries/QueryUser/index.ts","sections/PatientInformation/components/AdditionalFieldsModal/index.tsx","sections/PatientInformation/components/SearchPatientForm/index.tsx","sections/PatientInformation/components/Header/index.tsx","sections/PatientInformation/components/LineChartsButton/index.tsx","sections/PatientInformation/components/AddDiagnosisModal/index.tsx","sections/PatientInformation/components/PatientTable/index.tsx","sections/PatientInformation/components/ChooseFormModal/index.tsx","sections/PatientInformation/components/HelpPopover/index.tsx","sections/PatientInformation/index.tsx","sections/PatientInformation/components/withReportPdfDataForAdmin/index.tsx","sections/Welcome/components/Header/index.tsx","sections/Welcome/components/DoctorLogInDialog/index.tsx","sections/Welcome/index.tsx","sections/PromptMessage/index.tsx","lib/graphql/mutations/PatientLogIn/index.ts","sections/PatientLogin/index.tsx","lib/graphql/queries/CheckIfDoctorNameUnique/index.ts","lib/components/SuccessIndicator/index.tsx","sections/CreateDoctor/components/AddDoctorDialog/index.tsx","sections/CreateDoctor/index.tsx","index.tsx"],"names":["gql","SAVE_USER_ANSWER","SAVE_PARTIAL_ANSWER","DOCTOR_LOG_OUT","DOCTOR_LOG_IN","ADD_DIAGNOSIS","ADD_DOCTOR","reportWebVitals","onPerfEntry","Function","then","getCLS","getFID","getFCP","getLCP","getTTFB","PrivateRoute","props","isAuthorized","children","rest","render","location","to","pathname","state","from","useStyles","makeStyles","theme","root","display","width","height","justifyContent","alignItems","LoadingIndicator","styles","className","CircularProgress","ErrorIndicator","showError","setShowError","errorMessage","Snackbar","open","onClose","elevation","variant","severity","pdfjs","GlobalWorkerOptions","workerSrc","createStyles","marginTop","paper","marginBottom","pdfViewer","topbar","returnButton","marginLeft","downloadButton","marginRight","printIcon","page","padding","ReportPdf","pdfData","closeReport","classes","React","useState","window","innerWidth","setWidth","updateWidth","useEffect","addEventListener","removeEventListener","numPages","setNumPages","IconButton","onClick","printJS","printable","type","base64","download","href","title","Divider","file","loading","onLoadSuccess","nextNumPages","Array","el","index","Paper","pageNumber","renderMode","document","getElementById","offsetWidth","header","overflow","actionContainer","float","paddingRight","paddingTop","fontSize","ReturnToHomeHeader","Button","color","startIcon","canvasContainer","LineChart","labelList","dataList","multipleDataList","showLabel","chartRef","useRef","initRef","current","lineChart","getContext","Chart","data","labels","datasets","label","borderColor","backgroundColor","fill","lineTension","options","tooltips","mode","intersect","hover","maintainAspectRatio","responsive","scales","yAxes","ticks","beginAtZero","plugins","datalabels","anchor","align","formatter","Math","round","id","ref","EYSCENCK_FORM_NAME","EYSCENCK_CHILDREN_FORM_NAME","YAML_BROWN_FORM_KEY","PSSS_FORM_KEY","PSQI_FORM_KEY","PHCSS_FORM_KEY","HIDE_LABEL_FORMS","HIDE_LABEL_KEYS","LineChartPopOver","formResultList","formName","formKey","fillInDateList","useMemo","map","formResult","fillInDate","resultList","Number","JSON","parse","result","total","resultObject","eTScore","pTScore","nTScore","lTScore","yaleBrownMind","yaleBrownBehavior","yaleBrownTotal","psssP","psssS","psssTotal","mdqTotal","psqiTotal","phcssTotal","includes","isDialogOpen","setIsDialogOpen","size","disabled","length","Dialog","DialogTitle","DialogContent","logInCard","borderRadius","margin","logInText","textAlign","promptText","input","inputContainer","userNameInput","passwordInput","buttonContainer","logo","logoContainer","pageContainer","topPadding","initialAccountInfo","userName","password","Login","setDoctor","setViewer","doctor","useMutation","onCompleted","doctorLogIn","name","didRequest","setIsRedo","onError","error","setIsLogInErrorShown","doctorLoginRef","accountInfo","setAccountInfo","isNameAndPasswordValidated","setIsNameAndPasswordValidated","isLogInErrorShown","handleKeyPress","event","key","logInButtonOnClick","isRedo","detectRedoRef","history","variables","useHistory","isDoctor","Card","CardContent","src","alt","TextField","autoFocus","value","onChange","e","target","helperText","undefined","inputProps","QUESTIONNAIRE_LIST","QUESTIONNAIRE_CONTENT","REPORT","REPORT_FOR_ADMIN","DOCTOR_LIST","EnterGenderAndAgeDialog","isOpen","handleClose","goToLogInPage","age","gender","DialogContentText","DialogActions","ChildrenEnterGenderAndAgeDialog","PhcssGenderAndAgeDialog","PsssGenderDialog","content","listName","gridTemplateColumns","rowGap","columnGap","card","cardActionArea","cursor","indigo","cardIcon","unfinishedText","finishedText","questionnaireName","lineHeight","cardActionContainer","paddingLeft","noOverflow","textOverflow","whiteSpace","Home","patient","isSmallScreen","useMediaQuery","useQuery","fetchPolicy","isReport","listData","uniqueFormList","formList","formSet","Set","questionnaireList","forEach","questionnaire","has","displayedFillInDate","push","add","isGenderAndAgeDialogOpen","setIsGenderAndAgeDialogOpen","isChildrenGenderAndAgeDialogOpen","setIsChildrenGenderAndAgeDialogOpen","isPhcssDialogOpen","setIsPhcssDialogOpen","isPsssDialogOpen","setIsPsssDialogOpen","closeGenderAndAgeDialog","closeChildrenGenderAndAgeDialog","closePhcssDialog","defaultReturn","test","nameMatchFormResult","match","abbreviationMatchFormResult","substring","abbreviation","replace","goToFormPage","formId","finishStatus","done","List","subheader","ListSubheader","ListItem","button","ListItemAvatar","CardIcon","ListItemText","primary","secondary","CardActionArea","CardActions","WrappedComponent","UsersFilter","PATIENT_LOG_OUT","flexGrow","zIndex","drawer","spacing","maxWidth","maxHeight","timerHeader","AppHeader","viewer","doctorLogOut","sessionStorage","removeItem","console","log","logOut","patientLogOut","handleLogout","a","path","exact","AppBar","position","Toolbar","propertyName","propertyDivider","fields","displayNames","PersonalInformation","field","validIndexes","i","validIndex","flexShrink","personalInfoCard","personalInfoCardContent","paddingBottom","personalInfoText","fontWeight","drawerPaper","idChip","adminMenu","adminMenuHeader","link","Sider","useLocation","Drawer","style","ListItemIcon","Chip","icon","PROGRESS_BAR_WIDTH","finished","leftCircle","circle","circlewrapper","rightCircle","rightCircleWrapper","ProgressBar","totalNumber","currentIndex","widthOfFinishedPart","timeNumber","userSelect","WebkitUserSelect","WebkitTouchCallout","KhtmlUserSelect","MozUserSelect","msUserSelect","Timer","seconds","setSeconds","interval","setTimeout","clearTimeout","hour","floor","minute","second","psqiValidation","currentQuestionIndex","setErrorMessage","formContainer","form","titleCard","titleCardColor","borderTopLeftRadius","borderTopRightRadius","PRIMARY_COLOR","titleCardContent","titleCardMainText","questionCard","questionText","questionOptionText","buttonWithRightMargin","homeLink","exitButton","right","bottom","timerContaner","left","footer","progressWrapper","progressWrapperForSmallScreen","questionParent","answerInput","Form","URLSearchParams","search","get","partialAnswer","setChoiceDisabled","questions","question","choices","choice","answers","setIsAllowedToSubmit","newAnswers","unfinishedQuestionIndex","answer","setAnswers","setCurrentQuestionIndex","min","saveUserAnswer","setIsDone","savePartialAnswer","saveUserAnswerRef","savePartialAnswerRef","timeoutRef","autoSaveTimeoutRef","choiceDisabled","isDone","isAllowedToSubmit","isNextButtonDisabled","setIsNextButtonDisabled","confirmed","setConfirmed","selectChoiceLockRef","isErrorShown","setIsErrorShown","getAnswerArray","useCallback","answerArray","savePartialAnswerToBackend","questionnaireId","Promise","resolve","setInterval","clearInterval","closeConfirmDialog","validation","all","onNextButtonClick","onSubmit","onBackButtonClick","goToHome","handleExitButtonClick","radioButtonOnClick","questionIndex","autoChooseChoices","newChoiceDisabled","autoChooseChoiceIndex","yaleBrownCustomization","timeout","currentQuestionnIndex","yaleBrownSkipQuestions","currentQuestion","preventDefault","parent","split","FormControl","component","FormControlLabel","control","Radio","checked","Fab","instruction","createAccountCard","createAccountText","formClassifyText","PdfViewer","userAnswerIds","report","pdf","questionnaireTable","doneIcon","Report","count","setNumberOfFinishedQuestionnaires","newselectedUserAnswers","userAnswerId","setSelectedUserAnswers","selectedUserAnswers","numberOfFinishedQuestionnaires","isReportVisible","setIsReportVisible","TableContainer","Table","aira-label","TableHead","TableRow","TableCell","Checkbox","TableBody","delete","selectQuestionnaire","CheckCircleOutline","QUERY_USER","ADDITIONAL_FIELD_KEYS","ADDITIONAL_FIELD_MODAL_DISPLAY_NAMES","removeElementFromArray","array","element","newArray","currentElement","AdditionalFieldsModal","handleDialogClose","additionalFields","setAdditionalFields","aria-labelledby","displayName","fieldKey","AGE_NEGATIVE_ERROR_MESSAGE","rangeWrapper","ageRangeInput","dateRangeWrapper","ageRangeWrapper","dateRangeInput","ageInputIconWrapper","buttonWrapper","extraFieldsWrapper","searchButton","whiteButton","rangeFormWrapper","ageInputIcon","chip","additionalFieldButton","datePickerProps","format","okLabel","cancelLabel","invalidLabel","maxDateMessage","minDateMessage","invalidDateMessage","SearchPatientForm","forwardRef","searchPatients","limit","setCurrentPageIndex","currentPageIndex","filter","setUserName","setName","setGender","max","ageRange","setAgeRange","dateRange","setDateRange","onlyMyPatient","setOnlyMyPatient","errorField","setErrorField","isAdditionalFieldsModalOpen","setIsAdditionalFieldsModalOpen","handleSearchButtonClick","minSignUpDate","year","getFullYear","month","getMonth","day","getDate","maxSignUpDate","useImperativeHandle","noValidate","autoComplete","InputLabel","Select","MenuItem","newMinAge","newMaxAge","utils","DateFnsUtils","locale","cnLocale","DatePicker","date","_value","onDelete","INITAL_ONLY_MY_PATIENT","Header","text","LineChartsButton","finishedForms","isButtonDisabled","newResultList","reverse","setIsOpen","closeModal","diagnosisText","minWidth","AddDiagnosisModal","patientName","patientId","refetch","addDiagnosis","setDiagnosis","diagnosis","handleComfirm","indexOf","fullWidth","shrink","option","loadingIndicatorWrapper","reportButton","lineChartsButtonContainer","tableCell","iconMargin","tableColumnTexts","tableColumns","tableMinWidth","tableMaxWidth","PatientTable","patientList","selectedUserAnswerIds","setSelectedUserId","setSelectedUserAnswerIds","setIsReportShown","handleLimitChange","handleCurrentPageIndexChange","handleSortChange","isChooseFormModalShown","setIsChooseFormModalShown","finishedFormList","setFinishedFormList","isAddDiagnosisModalShown","setIsAddDiagnosisModalShown","addDiagnosisPatientId","setAddDiagnosisPatientId","addDiagnosisPatientName","setAddDiagnosisPatientName","handleEditDiagnosisButtonClick","queryUser","users","TablePagination","rowsPerPage","rowsPerPageOptions","onChangePage","_event","onChangeRowsPerPage","labelDisplayedRows","ceil","aria-label","TableSortLabel","active","direction","DATE_LATEST","patientInformation","isReportButtonDisabled","column","userId","finishedForm","handleReportButtonClick","onOkButtonClick","popover","pointerEvents","ChooseFormModal","aria-describedby","currentUserAnswerId","doctorName","reportForAdmin","withReportPdfDataForAdmin","PatientInformation","useLazyQuery","getQueryResult","userListData","searchFormRef","setLimit","setFilter","selectedUserId","isReportShown","getQueryResultRef","searchParams","setSearchParams","params","newFilter","DATE_OLDEST","welcomeMessage","DoctorLogInDialog","handleClickLogIn","handleDoctorLogIn","hideErrorIndicator","setPassword","hideError","handleClickCancel","Grid","container","item","background","minHeight","flexDirection","enterSystemButtonContainer","extendedIcon","seuText","Welcome","logIn","doctorLogInDialogRef","logInResult","titleWrapper","promptTextContainer","titleContainer","PromptMessage","endIcon","PATIENT_LOG_IN","personalInformationContainer","actionsWrapper","actionsContainer","PatientLogin","setPatient","queryParams","handleNextButtonClick","isBasicInformationShown","handleLogInButtonClick","patientLogIn","isUserNameValidated","setIsUserNameValidated","isNameValidated","setIsNameValidated","userInfo","setAge","education","setEducation","jobStatus","setJobStatus","marriageStatus","setMarriageStatus","setShowLoadSuccess","setIsBasicInformationShown","showLoadSuccess","handleCloseLoadSuccess","showNameErrorMessage","setShowNameErrorMessage","handleCloseNameErrorMessage","userNameFromQueryParams","required","InputProps","startAdornment","InputAdornment","autoHideDuration","anchorOrigin","vertical","horizontal","Alert","CHECK_IF_DOCTOR_USER_NAME_UNIQUE","SuccessIndicator","showSuccess","setShowSuccess","successMessage","AddDoctorDialog","closeDialog","checkDoctorUserName","checkResult","addDoctor","refetchListData","setUserNameInput","nameInput","setNameInput","setPasswordInput","secondPasswordInput","setSecondPasswordInput","userNameDuplicate","setUserNameDubplicate","isSuccessShown","setIsSuccessShown","debouncedCheckDoctorUserName","debounce","checkIfDoctorUserNameUnique","handleAddButtonClick","list","paginationContainer","totalNumberText","avatar","blue","CreateDoctor","checkDoctorName","checkNameData","isAddDoctorDialogOpen","setIsAddDoctorDialogOpen","doctorList","Pagination","pageIndex","admins","admin","Fragment","Avatar","client","ApolloClient","uri","cache","InMemoryCache","headers","getItem","initialViewer","token","catelogy","initialDoctor","contentContainer","App","doctorLogInLoading","doctorLogInRef","patientLogInLoading","patientLogInRef","createMuiTheme","palette","light","main","dark","contrastText","zhCN","ReactDOM","ThemeProvider"],"mappings":"40BAEsBA,cAAH,K,iUCAIA,cAAH,K,2UCAUA,cAAH,K,gMCApB,IAAMC,EAAmBD,cAAH,K,sMCAtB,IAAME,EAAsBF,cAAH,K,oJCAzB,IAAMG,EAAiBH,cAAH,K,uNCApB,IAAMI,EAAgBJ,cAAH,K,0LCAnB,IAAMK,EAAgBL,cAAH,K,iLCAnB,IAAMM,EAAaN,cAAH,KCYRO,EAZS,SAACC,GACnBA,GAAeA,aAAuBC,UACxC,8BAAqBC,MAAK,YAAkD,IAA/CC,EAA8C,EAA9CA,OAAQC,EAAsC,EAAtCA,OAAQC,EAA8B,EAA9BA,OAAQC,EAAsB,EAAtBA,OAAQC,EAAc,EAAdA,QAC3DJ,EAAOH,GACPI,EAAOJ,GACPK,EAAOL,GACPM,EAAON,GACPO,EAAQP,O,uFCDDQ,EAAe,SAACC,GAAkB,IACrCC,EAAoCD,EAApCC,aAAcC,EAAsBF,EAAtBE,SAAaC,EADS,YACAH,EADA,6BAE5C,OACE,cAAC,IAAD,2BACMG,GADN,IAEEC,OAAQ,gBAAGC,EAAH,EAAGA,SAAH,OACNJ,EACEC,EAEA,cAAC,IAAD,CAAUI,GAAI,CAAEC,SAAU,SAAUC,MAAO,CAAEC,KAAMJ,W,SCdvDK,EAAYC,aAAW,SAACC,GAAD,MAAY,CACvCC,KAAM,CACJC,QAAS,OACTC,MAAO,OACPC,OAAQ,OACRC,eAAgB,SAChBC,WAAY,cAGHC,EAAmB,WAC9B,IAAMC,EAASV,IACf,OACE,qBAAKW,UAAWD,EAAOP,KAAvB,SACE,cAACS,EAAA,EAAD,O,kBCNOC,EAAiB,SAACvB,GAAkB,IACvCwB,EAA0CxB,EAA1CwB,UAAWC,EAA+BzB,EAA/ByB,aAAcC,EAAiB1B,EAAjB0B,aACjC,OACE,cAACC,EAAA,EAAD,CAAUC,KAAMJ,EAAWK,QAAS,kBAAMJ,GAAa,IAAvD,SACE,cAAC,IAAD,CACEK,UAAW,EACXC,QAAQ,SACRC,SAAS,QACTH,QAAS,kBAAMJ,GAAa,IAJ9B,SAMGC,O,+GCJTO,IAAMC,oBAAoBC,UAAY,iBAEtC,IAAMzB,GAAYC,aAAW,SAACC,GAAD,OAC3BwB,YAAa,CACXvB,KAAM,CACJC,QAAS,OACTG,eAAgB,SAChBoB,UAAW,IAEbC,MAAO,CACLC,aAAc,IAEhBC,UAAW,GACXC,OAAQ,CACNzB,OAAQ,GACRF,QAAS,OACTG,eAAgB,iBAElByB,aAAc,CACZC,WAAY,GAEdC,eAAgB,CACdC,YAAa,GAEfC,UAAW,GACXC,KAAM,CACJC,QAAS,QAUFC,GAAY,SAAC,GAAqC,IAAnCC,EAAkC,EAAlCA,QAASC,EAAyB,EAAzBA,YAC7BC,EAAU1C,KAD4C,EAGlC2C,IAAMC,SAASC,OAAOC,YAHY,mBAGrDzC,EAHqD,KAG9C0C,EAH8C,KAKtDC,EAAc,WACdH,OAAOC,aAAezC,GAAO0C,EAASF,OAAOC,aAGnDH,IAAMM,WAAU,WAEd,OADAJ,OAAOK,iBAAiB,SAAUF,GAC3B,kBAAMH,OAAOM,oBAAoB,SAAUH,OAEpD,IAb4D,EAoB5BJ,mBAAiB,GApBW,mBAoBrDQ,EApBqD,KAoB3CC,EApB2C,KA6B5D,OACE,qCACE,gCACE,sBAAK1C,UAAW+B,EAAQX,OAAxB,UACE,cAACuB,EAAA,EAAD,CAAYC,QAASd,EAAa9B,UAAW+B,EAAQV,aAArD,SACE,cAAC,IAAD,MAEF,gCACE,cAACsB,EAAA,EAAD,CAAY3C,UAAW+B,EAAQN,UAAWmB,QAxBhC,WAClBC,IAAQ,CACNC,UAAU,GAAD,OAAKjB,GACdkB,KAAM,MACNC,QAAQ,KAoBF,SACE,cAAC,KAAD,MAEF,mBACEC,SAAS,6CACTC,KAAI,sCAAiCrB,GACrCsB,MAAM,yDAHR,SAKE,cAACR,EAAA,EAAD,CAAY3C,UAAW+B,EAAQR,eAA/B,SACE,cAAC,IAAD,cAKR,cAAC6B,EAAA,EAAD,OAEF,qBAAKpD,UAAW+B,EAAQvC,KAAxB,SACE,cAAC,IAAD,CACE6D,KAAI,sCAAiCxB,GACrCyB,QAAS,wBACTtD,UAAW+B,EAAQZ,UACnBoC,cArCsB,SAAC,GAIxB,IAHKC,EAGN,EAHJf,SAIAC,EAAYc,IA4BR,SAMGC,MAAMrE,KAAK,IAAIqE,MAAMhB,IAAW,SAACiB,EAAIC,GAAL,OAC/B,cAACC,EAAA,EAAD,CAAOnD,UAAW,EAAGT,UAAW+B,EAAQd,MAAxC,SACE,cAAC,IAAD,CACE4C,WAAYF,EAAQ,EACpBL,QAAS,6BACTQ,WAAW,MACXpE,MACEqE,SAASC,eAAe,QAGgC,IAFnDD,SAASC,eAAe,QAASC,YAAc,IAC5CF,SAASC,eAAe,QAASC,YAAc,IAC/CF,SAASC,eAAe,QAASC,aACrC,OAV0CN,c,qBC5G1DtE,GAAYC,aAAW,SAACC,GAAD,OAC3BwB,YAAa,CACXmD,OAAQ,CACNC,SAAU,UAEZC,gBAAiB,CACfC,MAAO,QACPC,aAAc,GACdC,WAAY,GACZC,SAAU,WACV/E,QAAS,OACTI,WAAY,eAIL4E,GAAqB,WAChC,IAAM1C,EAAU1C,KAChB,OACE,qBAAKW,UAAW+B,EAAQmC,OAAxB,SACE,sBAAMlE,UAAW+B,EAAQqC,gBAAzB,SACE,cAAC,IAAD,CAAMnF,GAAG,IAAT,SACE,cAACyF,EAAA,EAAD,CAAQC,MAAM,YAAYC,UAAW,cAAC,KAAD,IAArC,6C,qBCdJvF,I,OAAYC,aAAW,SAACC,GAAD,OAC3BwB,YAAa,CACX8D,gBAAiB,CACfnF,MAAO,IACPC,OAAQ,WAKDmF,GAAY,SAAC,GAKZ,IAJZC,EAIW,EAJXA,UACAC,EAGW,EAHXA,SACAC,EAEW,EAFXA,iBACAC,EACW,EADXA,UAEMnD,EAAU1C,KACV8F,EAAWC,iBAA0B,MAuDrCC,EAAUD,kBAtDH,WACX,GAAID,EAASG,QAAS,CACpB,IAAMC,EAAYJ,EAASG,QAAQE,WAAW,MAC1CD,GACF,IAAIE,KAAMF,EAAW,CACnBxC,KAAM,OACN2C,KAAM,CAEJC,OAAQZ,EACRa,SAAUX,GAEN,CACE,CACEY,MAAO,eACPH,KAAMV,EACNc,YAAa,UACbC,gBAAiB,UACjBC,MAAM,EACNC,YAAa,KAIvBC,QAAS,CACPC,SAAU,CACRC,KAAM,QACNC,WAAW,GAEbC,MAAO,CACLF,KAAM,UACNC,WAAW,GAEbE,qBAAqB,EACrBC,YAAY,EACZC,OAAQ,CACNC,MAAO,CACL,CACEC,MAAO,CACLC,aAAa,MAKrBC,QAAS,CACPC,WAAY,CACVC,OAAQ,QACRC,MAAO,MACPC,UAAWC,KAAKC,MAChB1H,UAASyF,WAWvB,OAHA5C,qBAAU,WACR+C,EAAQC,YACP,IAED,qBAAKtF,UAAW+B,EAAQ8C,gBAAxB,SACE,wBAAQuC,GAAG,aAAaC,IAAKlC,O,mDCzFtBmC,GAAqB,4DACrBC,GAA8B,8EAE9BC,GAAsB,aACtBC,GAAgB,OAEhBC,GAAgB,OAChBC,GAAiB,QCkCxBC,GAAmB,CAACN,GAAoBC,IACxCM,GAA4B,GAErBC,GAAmB,SAACnJ,GAAkB,IACzCoJ,EAAsCpJ,EAAtCoJ,eAAgBC,EAAsBrJ,EAAtBqJ,SAAUC,EAAYtJ,EAAZsJ,QAC5BC,EAAiBC,mBACrB,kBAAMJ,EAAeK,KAAI,SAACC,GAAD,OAAgBA,EAAWC,gBACpD,CAACP,IAEGQ,EAAaJ,mBAAQ,WACzB,MDjDuB,uDCiDnBH,EACKD,EAAeK,KAAI,SAACC,GAAD,OACxBG,OAAOC,KAAKC,MAAML,EAAWM,QAAQC,UAGlCb,EAAeK,KAAI,SAACC,GAAD,OAAgBG,OAAOH,EAAWM,aAC3D,CAACZ,EAAgBC,IACd/C,EAAgDkD,mBAAQ,WAC5D,OACEH,IAAaV,IACbU,IAAaT,GAkBN,CACL,CACE1B,MAAO,4BACPH,KAnBWqC,EAAeK,KAAI,SAACC,GACjC,IAAMQ,EAAkCJ,KAAKC,MAAML,EAAWM,QAC9D,OAAOH,OAAOK,EAAaC,YAkBzBhD,YAAa,UACbC,gBAAiB,UACjBE,YAAa,EACbD,MAAM,GAER,CACEH,MAAO,4BACPH,KAvBWqC,EAAeK,KAAI,SAACC,GACjC,IAAMQ,EAAkCJ,KAAKC,MAAML,EAAWM,QAC9D,OAAOH,OAAOK,EAAaE,YAsBzBjD,YAAa,UACbC,gBAAiB,UACjBC,MAAM,EACNC,YAAa,GAEf,CACEJ,MAAO,4BACPH,KA3BWqC,EAAeK,KAAI,SAACC,GACjC,IAAMQ,EAAkCJ,KAAKC,MAAML,EAAWM,QAC9D,OAAOH,OAAOK,EAAaG,YA0BzBlD,YAAa,UACbC,gBAAiB,UACjBC,MAAM,EACNC,YAAa,GAEf,CACEJ,MAAO,4BACPH,KA/BWqC,EAAeK,KAAI,SAACC,GACjC,IAAMQ,EAAkCJ,KAAKC,MAAML,EAAWM,QAC9D,OAAOH,OAAOK,EAAaI,YA8BzBnD,YAAa,UACbC,gBAAiB,UACjBC,MAAM,EACNC,YAAa,IAGRgC,IAAYT,GAad,CACL,CACE3B,MAAO,mDACPH,KAfcqC,EAAeK,KAAI,SAACC,GAEpC,OADsCI,KAAKC,MAAML,EAAWM,QACxCO,iBAclBpD,YAAa,UACbC,gBAAiB,UACjBE,YAAa,EACbD,MAAM,GAER,CACEH,MAAO,mDACPH,KAnBkBqC,EAAeK,KAAI,SAACC,GAExC,OADsCI,KAAKC,MAAML,EAAWM,QACxCQ,qBAkBlBrD,YAAa,UACbC,gBAAiB,UACjBC,MAAM,EACNC,YAAa,GAEf,CACEJ,MAAO,iCACPH,KAvBeqC,EAAeK,KAAI,SAACC,GAErC,OADsCI,KAAKC,MAAML,EAAWM,QACxCS,kBAsBlBtD,YAAa,UACbC,gBAAiB,UACjBC,MAAM,EACNC,YAAa,IAGRgC,IAAYR,GAad,CACL,CACE5B,MAAO,oDACPH,KAfWqC,EAAeK,KAAI,SAACC,GAEjC,OADiCI,KAAKC,MAAML,EAAWM,QACnCU,SAclBvD,YAAa,UACbC,gBAAiB,UACjBE,YAAa,EACbD,MAAM,GAER,CACEH,MAAO,oDACPH,KAnBWqC,EAAeK,KAAI,SAACC,GAEjC,OADiCI,KAAKC,MAAML,EAAWM,QACnCW,SAkBlBxD,YAAa,UACbC,gBAAiB,UACjBC,MAAM,EACNC,YAAa,GAEf,CACEJ,MAAO,eACPH,KAvBeqC,EAAeK,KAAI,SAACC,GAErC,OADiCI,KAAKC,MAAML,EAAWM,QACnCY,aAsBlBzD,YAAa,UACbC,gBAAiB,UACjBC,MAAM,EACNC,YAAa,IDvLK,QC0LbgC,EAKF,CACL,CACEpC,MAAO,eACPH,KAPeqC,EAAeK,KAAI,SAACC,GAErC,OADgCI,KAAKC,MAAML,EAAWM,QAClCa,YAMlB1D,YAAa,UACbC,gBAAiB,UACjBC,MAAM,EACNC,YAAa,IAGRgC,IAAYP,GAiCd,CACL,CACE7B,MAAO,eACPH,KAnCeqC,EAAeK,KAAI,SAACC,GAErC,OADiCI,KAAKC,MAAML,EAAWM,QACnCc,aAkClB3D,YAAa,UACbC,gBAAiB,UACjBC,MAAM,EACNC,YAAa,IA2DRgC,IAAYN,GAKd,CACL,CACE9B,MAAO,eACPH,KAPeqC,EAAeK,KAAI,SAACC,GAErC,OADkCI,KAAKC,MAAML,EAAWM,QACpCe,cAMlB5D,YAAa,UACbC,gBAAiB,UACjBC,MAAM,EACNC,YAAa,SAZZ,IAiBN,CAACgC,EAASD,EAAUD,IACnB7C,GAAY,GAEd0C,GAAiB+B,SAAS3B,IAC1BH,GAAgB8B,SAAS1B,MAEzB/C,GAAY,GA5RkC,MA+RRjD,oBAAS,GA/RD,mBA+RzC2H,EA/RyC,KA+R3BC,EA/R2B,KAsShD,OACE,gCACE,8BACE,cAACnF,EAAA,EAAD,CACEE,UAAW,cAAC,KAAD,IACXkF,KAAK,QACLnF,MAAM,UACNoF,SAAUhC,EAAeiC,QAAU,EACnCpH,QAXW,WACjBiH,GAAgB,IAKZ,4BAUF,eAACI,GAAA,EAAD,CAAQzJ,QAnBc,WACxBqJ,GAAgB,IAkBsBtJ,KAAMqJ,EAA1C,UACE,eAACM,GAAA,EAAD,WAAclC,EAAd,8BACA,cAACmC,GAAA,EAAD,UACE,cAAC,GAAD,CACEpF,UAAWmD,EACXlD,SAAUuD,EACVtD,iBAAkBA,EAClBC,UAAWA,aCtWR,OAA0B,iCCyBnC7F,GAAYC,aAAW,SAACC,GAAD,OAC3BwB,YAAa,CACXqJ,UAAW,CACTC,aAAc,EACd3K,MAAO,kBACP4K,OAAQ,YAEVC,UAAW,CACT/F,SAAU,SACVgG,UAAW,SACXtJ,aAAc,GACdF,UAAW,IAEbyJ,WAAY,CACVvJ,aAAc,GACdsD,SAAU,OACVgG,UAAW,UAEbE,MAAO,CACLhL,MAAO,QAETiL,eAAgB,CACdL,OAAQ,UAEVM,cAAe,CACb1J,aAAc,IAEhB2J,cAAe,CACb3J,aAAc,IAEhB4J,gBAAiB,CACfrL,QAAS,OACTG,eAAgB,UAElBmL,KAAM,CACJpL,OAAQ,IAEVqL,cAAe,CACbvL,QAAS,OACTG,eAAgB,UAElBqL,cAAe,CACblF,gBAAiB,UACjBrG,MAAO,OACPC,OAAQ,QAEVuL,WAAY,CACVvL,OAAQ,wBAURwL,GAAqB,CACzBC,SAAU,GACVC,SAAU,IAUCC,GAAQ,SAAC,GAKR,IAJZ1M,EAIW,EAJXA,aAEA2M,GAEW,EAHXC,UAGW,EAFXD,WACAE,EACW,EADXA,OAEM1J,EAAU1C,KADL,EAaWqM,sBACpB5N,EACA,CACE6N,YAAa,SAACjG,GACZ,GAAIA,GAAQA,EAAKkG,YAAa,CAAC,IAAD,EACWlG,EAAKkG,YAApCC,EADoB,EACpBA,KAAMT,EADc,EACdA,SAAUU,EADI,EACJA,WACxBP,EAAU,CACRM,OACAT,WACAU,eAEFC,GAAU,KAGdC,QAAS,SAACC,GACRC,GAAqB,MAfpBN,EAbI,oBAgCLO,EAAiB/G,iBAAOwG,GAhCnB,EAiC2B3J,mBACpCkJ,IAlCS,mBAiCJiB,EAjCI,KAiCSC,EAjCT,OAoCyDpK,oBAClE,GArCS,mBAoCJqK,EApCI,KAoCwBC,EApCxB,OAuCuCtK,oBAAS,GAvChD,mBAuCJuK,EAvCI,KAuCeN,EAvCf,KAwCLO,EAAiB,SAACC,GACJ,UAAdA,EAAMC,KACRC,KAGJtK,qBAAU,WAGR,OAFAJ,OAAOK,iBAAiB,UAAWkK,GAE5B,WACLvK,OAAOM,oBAAoB,UAAWiK,OAjD/B,MAoDiBxK,oBAAS,GApD1B,mBAoDJ4K,EApDI,KAoDId,EApDJ,KAqDLe,EAAgB1H,kBAAO,WAEzB2H,EAAQ/N,SAASG,OACwB,YAAzC4N,EAAQ/N,SAASG,MAAMC,KAAKF,SAE5B6M,GAAU,GAEVA,GAAU,MAIdzJ,qBAAU,WACRwK,EAAcxH,YACb,IACH,IAMMsH,EAAqB,WACzBL,GAA8B,GAC1BH,EAAYhB,UAAYgB,EAAYf,UACtCc,EAAe7G,QAAQ,CACrB0H,UAAW,CACTtC,MAAO,CACLU,SAAUgB,EAAYhB,SACtBC,SAAUe,EAAYf,cAK1B0B,EAAUE,cAGVC,KACJH,EAAQ/N,SAASG,QACjB4N,EAAQ/N,SAASG,MAAMC,KAAKF,SAASyK,SAAS,WAGhD,OAAI/K,IAKGiO,EACCK,EACGzB,EAAOL,SAGH,cAAC,IAAD,CAAUnM,GAAE,kBAAawM,EAAOL,YAFhC,cAAC,EAAD,IAKJ,cAAC,IAAD,CAAUnM,GAAG,UAKtB,sBAAKe,UAAW+B,EAAQkJ,cAAxB,UACE,qBAAKjL,UAAW+B,EAAQmJ,aACxB,cAACiC,EAAA,EAAD,CAAMnN,UAAW+B,EAAQqI,UAAzB,SACE,eAACgD,EAAA,EAAD,WACE,qBAAKpN,UAAW+B,EAAQiJ,cAAxB,SACE,qBAAKqC,IAAKtC,GAAM/K,UAAW+B,EAAQgJ,KAAMuC,IAAI,+BAE/C,qBAAKtN,UAAW+B,EAAQwI,UAAxB,SACG2C,EAAW,qBAAQ,uBAEtB,qBAAKlN,UAAW+B,EAAQ0I,WAAxB,sFACA,iCACE,sBAAKzK,UAAW+B,EAAQ4I,eAAxB,UACE,cAAC4C,EAAA,EAAD,CACEC,WAAS,EACTxN,UAAW+B,EAAQ2I,MAAQ,IAAM3I,EAAQ6I,cACzCjG,MAAM,UACN8I,MAAOrB,EAAYhB,SACnBvF,MAAM,qBACN6H,SA/DW,SAACC,GACxBtB,EAAe,2BAAKD,GAAN,IAAmBhB,SAAUuC,EAAEC,OAAOH,UA+DxCI,WACEvB,IAA+BF,EAAYhB,SACvC,wDACA0C,EAEN7B,SACEK,GAA+BF,EAAYhB,gBAEvC0C,EAENC,WAAY,CAAE,aAAc,wBAE9B,cAACR,EAAA,EAAD,CACEvN,UAAW+B,EAAQ2I,MAAQ,IAAM3I,EAAQ8I,cACzClG,MAAM,UACN8I,MAAOrB,EAAYf,SACnBxF,MAAM,eACNgI,WACEvB,IAA+BF,EAAYf,SACvC,kDACAyC,EAEN7B,SACEK,GAA+BF,EAAYf,gBAEvCyC,EAENJ,SAxFe,SAACC,GAC5BtB,EAAe,2BAAKD,GAAN,IAAmBf,SAAUsC,EAAEC,OAAOH,UAwFxC1K,KAAK,WACLgL,WAAY,CAAE,aAAc,qBAGhC,qBAAK/N,UAAW+B,EAAQ+I,gBAAxB,SACE,cAACpG,EAAA,EAAD,CACEhE,QAAQ,YACRiE,MAAM,UACN/B,QAASgK,EAHX,oCAWR,cAAC,EAAD,CACEzM,UAAWqM,EACXpM,aAAc8L,EACd7L,aAAc,qE,qGCrRP,OAA0B,qC,kTCElC,IAAM2N,GAAqBtQ,cAAH,M,0VCAxB,IAAMuQ,GAAwBvQ,cAAH,M,2LCA3B,IAAMwQ,GAASxQ,cAAH,M,6OCAZ,IAAMyQ,GAAmBzQ,cAAH,M,8RCAtB,IAAM0Q,GAAc1Q,cAAH,M,oBCiBX2Q,GAA0B,SAAC,GAM1B,IALZC,EAKW,EALXA,OACAC,EAIW,EAJXA,YACAC,EAGW,EAHXA,cACAC,EAEW,EAFXA,IACAC,EACW,EADXA,OAEA,OACE,eAACzE,GAAA,EAAD,CAAQ1J,KAAM+N,EAAQ9N,QAAS+N,EAA/B,UACE,cAACrE,GAAA,EAAD,WACIuE,GAAQA,GAAO,KAAOC,EACpB,uCACAD,GAAO,GAAKA,EAAM,GAClB,mDACA,+CAEN,cAACtE,GAAA,EAAD,UACE,eAACwE,GAAA,EAAD,aACKF,IAAQC,IAAW,gFACbZ,IAARW,GAA6B,OAARA,GAAgBA,EAAM,GACxC,6EACA,UAGR,cAACG,GAAA,EAAD,UACE,cAAClK,EAAA,EAAD,CACE9B,SAAU6L,GAAOA,GAAO,GAAKD,EAAgBD,EAC7C5J,MAAM,UACN6I,WAAS,EAHX,gCCzBKqB,GAAkC,SAAC,GAMlC,IALZP,EAKW,EALXA,OACAC,EAIW,EAJXA,YACAC,EAGW,EAHXA,cACAC,EAEW,EAFXA,IACAC,EACW,EADXA,OAEA,OACE,eAACzE,GAAA,EAAD,CAAQ1J,KAAM+N,EAAQ9N,QAAS+N,EAA/B,UACE,cAACrE,GAAA,EAAD,WACIuE,GAAQA,EAAM,IAAMA,EAAM,IAAMC,EAC9B,uCACAD,GAAO,GACP,mDACA,+CAEN,cAACtE,GAAA,EAAD,UACE,eAACwE,GAAA,EAAD,aACKF,IAAQC,IAAW,gFACbZ,IAARW,GAA6B,OAARA,IAAiBA,GAAO,IAAMA,EAAM,GACtD,gGACA,UAGR,cAACG,GAAA,EAAD,UACE,cAAClK,EAAA,EAAD,CACE9B,QACG6L,IAASA,GAAO,IAAMA,EAAM,GAAqBF,EAAhBC,EAEpC7J,MAAM,UACN6I,WAAS,EALX,gCCzBKsB,GAA0B,SAAC,GAM1B,IALZR,EAKW,EALXA,OACAC,EAIW,EAJXA,YACAC,EAGW,EAHXA,cACAC,EAEW,EAFXA,IACAC,EACW,EADXA,OAEA,OACE,eAACzE,GAAA,EAAD,CAAQ1J,KAAM+N,EAAQ9N,QAAS+N,EAA/B,UACE,cAACrE,GAAA,EAAD,WACIuE,GAAQA,EAAM,IAAMA,EAAM,IAAMC,EAC9B,uCACA,+CAEN,cAACvE,GAAA,EAAD,UACE,eAACwE,GAAA,EAAD,aACKF,IAAQC,IAAW,gFACbZ,IAARW,GAA6B,OAARA,IAAiBA,GAAO,IAAMA,GAAO,GACvD,gGACA,UAGR,cAACG,GAAA,EAAD,UACE,cAAClK,EAAA,EAAD,CACE9B,QACG6L,IAASA,GAAO,IAAMA,GAAO,GAAqBF,EAAhBC,EAErC7J,MAAM,UACN6I,WAAS,EALX,gCCxBKuB,GAAmB,SAAC,GAKnB,IAJZT,EAIW,EAJXA,OACAC,EAGW,EAHXA,YACAC,EAEW,EAFXA,cAEW,EADXE,OAEA,OACE,eAACzE,GAAA,EAAD,CAAQ1J,KAAM+N,EAAQ9N,QAAS+N,EAA/B,UACE,cAACrE,GAAA,EAAD,mDACA,cAACC,GAAA,EAAD,UACE,cAACwE,GAAA,EAAD,uEAEF,cAACC,GAAA,EAAD,UACE,cAAClK,EAAA,EAAD,CAAQ9B,QAAS4L,EAAe7J,MAAM,UAAU6I,WAAS,EAAzD,gCCaFnO,GAAYC,aAAW,SAACC,GAAD,OAC3BwB,YAAa,CACXiO,QAAS,CACPrN,QAAS,YAEXsN,SAAU,CACRzK,SAAU,OACVG,MAAO,sBACP3D,UAAW,GACXE,aAAc,IAEhB1B,KAAM,CACJC,QAAS,OACTyP,oBAAoB,qBAAD,OAfN,IAeM,OACnBC,OAAQ,OACRC,UAAW,QAEbC,KAAM,CACJ1P,OAAQ,KAEV2P,eAAgB,CACd5P,MAvBa,IAwBb6P,OAAQ,UACR,UAAW,CACTxJ,gBAAiByJ,KAAO,KAE1B7P,OAAQ,IACRF,QAAS,OACTG,eAAgB,aAChBC,WAAY,cAEd4P,SAAU,CACR/P,MAAO,GACPC,OAAQ,IAEV+P,eAAgB,CACdlL,SAAU,YACVG,MAAO,qBACP2F,OAAQ,SAEVqF,aAAc,CACZnL,SAAU,YACVG,MAAO,UACP2F,OAAQ,SAEVsF,kBAAmB,CACjBpL,SAAU,OACVG,MAAO,OACPkL,WAAY,UAEdC,oBAAqB,CACnBC,YAAa,GACbpQ,OAAQ,IAEVqQ,WAAY,CACV7L,SAAU,SACV8L,aAAc,WACdC,WAAY,eAWLC,GAAO,SAAC,GAAwB,IAAtBC,EAAqB,EAArBA,QACfC,EAAgBC,aAAc,qBAC9BvO,EAAU1C,KAF0B,EAGhBkR,mBAGxBvC,GAAoB,CACpBwC,YAAa,WACbxD,UAAW,CAAEyD,UAAU,KALjBnN,EAHkC,EAGlCA,QAASoC,EAHyB,EAGzBA,KAOXgL,EAGFvI,mBAAQ,WACV,IAAKzC,EAAM,MAAO,CAAEiL,eAAgB,GAAIpI,WAAY,IACpD,IAAMqI,EAAgC,GAChCrI,EAA6B,GAC7BsI,EAAuB,IAAIC,IA6BjC,OA5BApL,EAAKqL,kBAAkBC,SAAQ,SAACC,GAC9B,GAAKJ,EAAQK,IAAID,EAAc7J,KAaxB,GAAI6J,EAActI,QAAUsI,EAAcE,oBAE/C,IADA,IAAIxN,EAAQ,EACLA,GAASiN,EAAS5G,QAAQ,CAC/B,GAAI4G,EAASjN,GAAOyD,KAAO6J,EAAc7J,GAAI,CAC3CmB,EAAW5E,GAAOyN,KAAK,CACrBzI,OAAQsI,EAActI,OACtBL,WAAY2I,EAAcE,sBAE5B,MAEFxN,GAAS,QAtBXkN,EAAQQ,IAAIJ,EAAc7J,IAC1BwJ,EAASQ,KAAKH,GACVA,EAActI,QAAUsI,EAAcE,oBACxC5I,EAAW6I,KAAK,CACd,CACEzI,OAAQsI,EAActI,OACtBL,WAAY2I,EAAcE,uBAI9B5I,EAAW6I,KAAK,OAgBf,CAAET,eAAgBC,EAAUrI,gBAClC,CAAC7C,IACIiL,EAA+BD,EAA/BC,eAAgBpI,EAAemI,EAAfnI,WAhDkB,EAiDsBtG,oBAC9D,GAlDwC,mBAiDnCqP,EAjDmC,KAiDTC,EAjDS,OAuDtCtP,oBAAS,GAvD6B,mBAqDxCuP,EArDwC,KAsDxCC,EAtDwC,OAwDQxP,oBAAS,GAxDjB,mBAwDnCyP,EAxDmC,KAwDhBC,EAxDgB,OAyDM1P,oBAAS,GAzDf,mBAyDnC2P,EAzDmC,KAyDjBC,EAzDiB,KA0DpCC,EAA0B,WAC9BP,GAA4B,IAExBQ,EAAkC,WACtCN,GAAoC,IAEhCO,EAAmB,WACvBL,GAAqB,IAKjBnD,EAAgB,WACpBzB,EAAQqE,KAAR,+BAAqChB,EAAQhF,YAEzC2B,EAAUE,cAChB,GAAI3J,EACF,OAAO,cAAC,EAAD,IAET,GAAIoC,EAAM,CACR,IAAMkK,EAAoB,SAACqB,GACzB,IAAMgB,EACJ,sBAAMjS,UAAW+B,EAAQ6N,kBAAzB,SAA6CqB,EAAcpF,OAG7D,GAAK,qBAAWqG,KAAKjB,EAAcpF,MAE5B,CACL,IAAMsG,EAAsBlB,EAAcpF,KAAKuG,MAAM,aAC/CC,EAA8BpB,EAAcpF,KAAKuG,MAAM,kBAC7D,GAAID,GAAuBE,EAA6B,CACtD,IAAMxG,EAAOsG,EAAoB,GAAGG,UAClC,EACAH,EAAoB,GAAGnI,OAAS,GAE5BuI,EAAeF,EAA4B,GACjD,OACE,uBACErS,UAAW+B,EAAQ6N,kBAAoB,IAAM7N,EAAQiO,WADvD,UAGE,sBAAMhQ,UAAW+B,EAAQiO,WAAzB,SAAsCnE,IACtC,uBACC0G,EAAaC,QAAQ,SAAK,KAAKA,QAAQ,SAAK,QAInD,OAAOP,EApBP,OAAOA,GAuBLQ,EAAe,SACnBC,EACA1K,EACAC,GAEA,GAAID,IAAaV,IACf,IAAK8I,EAAQ1B,SAAW0B,EAAQ3B,KAAO2B,EAAQ3B,IAAM,GAEnD,YADA8C,GAA4B,QAGzB,GAAIvJ,IAAaT,IACtB,IACG6I,EAAQ1B,SACR0B,EAAQ3B,KACT2B,EAAQ3B,KAAO,IACf2B,EAAQ3B,KAAO,EAGf,YADAgD,GAAoC,QAGjC,GAAIxJ,IAAYN,IACrB,IACGyI,EAAQ1B,SACR0B,EAAQ3B,KACT2B,EAAQ3B,KAAO,IACf2B,EAAQ3B,KAAO,EAGf,YADAkD,GAAqB,QAGlB,GAAI1J,IAAYR,KAChB2I,EAAQ1B,OAEX,YADAmD,GAAoB,GAIxB9E,EAAQqE,KAAR,wBAA8BsB,KAE1BC,EAAe,SAAC1B,GAAD,OACnB,sBACEjR,UACEiR,EAAc2B,KAAO7Q,EAAQ4N,aAAe5N,EAAQ2N,eAFxD,SAKGuB,EAAc2B,KAAO,qBAAQ,wBAGlC,OAAIvC,EAEA,qCACE,cAACwC,GAAA,EAAD,CAAMC,UAAW,cAACC,GAAA,EAAD,2BAAjB,SACGpC,EAAevI,KAAI,SAAC6I,EAAetN,GAAhB,OAClB,eAACqP,GAAA,EAAD,CACEC,QAAM,EACNrQ,QAAS,kBACP6P,EACExB,EAAc7J,GACd6J,EAAcpF,KACdoF,EAActE,MANpB,UAWE,cAACuG,GAAA,EAAD,UACE,qBACE7F,IAAK8F,GACL7F,IAAI,2BACJtN,UAAW+B,EAAQ0N,aAGvB,cAAC2D,GAAA,EAAD,CACEC,QACE,qBAAKrT,UAAW+B,EAAQ6N,kBAAxB,SACGqB,EAAcpF,OAGnByH,UAAWX,EAAa1B,OAfrBA,EAAc7J,SAoBzB,cAAC,GAAD,CACEkH,OAAQgD,EACR/C,YAAauD,EACbtD,cAAeA,EACfC,IAAK2B,EAAQ3B,IACbC,OAAQ0B,EAAQ1B,SAElB,cAAC,GAAD,CACEJ,OAAQkD,EACRjD,YAAawD,EACbvD,cAAeA,EACfC,IAAK2B,EAAQ3B,IACbC,OAAQ0B,EAAQ1B,SAElB,cAAC,GAAD,CACEJ,OAAQoD,EACRnD,YAAayD,EACbxD,cAAeA,EACfC,IAAK2B,EAAQ3B,IACbC,OAAQ0B,EAAQ1B,YAMtB,qCACE,sBAAK1O,UAAW+B,EAAQiN,QAAxB,UACE,mBAAGhP,UAAW+B,EAAQkN,SAAtB,0BACA,qBAAKjP,UAAW+B,EAAQvC,KAAxB,SACGmR,EAAevI,KAAI,SAAC6I,EAAetN,GAAhB,OAClB,eAACwJ,EAAA,EAAD,CACEzM,QAAQ,WACRV,UAAW+B,EAAQsN,KAAO,IAAMtN,EAAQiO,WAF1C,UAKE,cAACuD,GAAA,EAAD,CACEvT,UAAW+B,EAAQuN,eACnB1M,QAAS,kBACP6P,EACExB,EAAc7J,GACd6J,EAAcpF,KACdoF,EAActE,MANpB,SAUE,eAACS,EAAA,EAAD,WACE,8BACE,qBACEC,IAAK8F,GACL7F,IAAI,2BACJtN,UAAW+B,EAAQ0N,aAGvB,qBAAKzP,UAAW+B,EAAQiO,WAAxB,SACGJ,EAAkBqB,KAEpB0B,EAAa1B,QAIlB,cAAC7N,EAAA,EAAD,IAEA,cAACoQ,GAAA,EAAD,CAAaxT,UAAW+B,EAAQ+N,oBAAhC,SACE,cAAC,GAAD,CACE/H,eAAgBQ,EAAW5E,GAC3BqE,SAAUiJ,EAAcpF,KACxB5D,QAASgJ,EAActE,UAjCtBsE,EAAc7J,YAwC3B,cAAC,GAAD,CACEkH,OAAQgD,EACR/C,YAAauD,EACbtD,cAAeA,EACfC,IAAK2B,EAAQ3B,IACbC,OAAQ0B,EAAQ1B,SAElB,cAAC,GAAD,CACEJ,OAAQkD,EACRjD,YAAawD,EACbvD,cAAeA,EACfC,IAAK2B,EAAQ3B,IACbC,OAAQ0B,EAAQ1B,SAElB,cAAC,GAAD,CACEJ,OAAQoD,EACRnD,YAAayD,EACbxD,cAAeA,EACfC,IAAK2B,EAAQ3B,IACbC,OAAQ0B,EAAQ1B,SAElB,cAAC,GAAD,CACEJ,OAAQsD,EACRrD,YAzNgB,WACtBsD,GAAoB,IAyNdrD,cAAeA,EACfE,OAAQ0B,EAAQ1B,YAKxB,OAAO,M,8NCjZF,ICQL+E,GCDUC,GFPCC,GAAkBjW,cAAH,MGWtB2B,GAAYC,aAAW,SAACC,GAAD,OAC3BwB,YAAa,CACXvB,KAAM,CACJoU,SAAU,GAEZ1P,OAAQ,CACN2P,OAAQtU,EAAMsU,OAAOC,OAAS,GAEhC/I,KAAM,CACJvJ,YAAajC,EAAMwU,QAAQ,GAC3BC,SAAU,GACVC,UAAW,IAEb9Q,MAAO,CACLyQ,SAAU,EACVpP,SAAU,WAEZ0P,YAAa,CACX/P,SAAU,SACV4B,gBAAiB,sBAEnB3B,gBAAiB,CACfC,MAAO,QACPC,aAAc,GACdC,WAAY,GACZC,SAAU,WACV/E,QAAS,OACTI,WAAY,eAWLsU,GAAY,SAACxV,GAAkB,IAClCyV,EAA4BzV,EAA5ByV,OAAQ5I,EAAoB7M,EAApB6M,UAAWzI,EAASpE,EAAToE,KACrBgK,EAAUE,cAFyB,EAIfjL,IAAMC,SAASC,OAAOC,YAJP,mBAIlCzC,EAJkC,KAI3B0C,EAJ2B,KAMnCC,EAAc,WACdH,OAAOC,aAAezC,GAAO0C,EAASF,OAAOC,aAGnDH,IAAMM,WAAU,WAEd,OADAJ,OAAOK,iBAAiB,SAAUF,GAC3B,kBAAMH,OAAOM,oBAAoB,SAAUH,OAZX,MAexBqJ,sBAA0B7N,EAAgB,CACzD8N,YAAa,SAACjG,GACRA,GAAQA,EAAK2O,aAAavI,aAC5BN,EAAU9F,EAAK2O,cACfC,eAAeC,WAAW,SAC1BC,QAAQC,IAAI,0BAGhBzI,QAAS,SAACC,GACRuI,QAAQC,IAAIxI,GACZuI,QAAQC,IAAI,qBAVTC,EAfkC,sBA4BjBhJ,sBAA2BiI,GAAiB,CAClEhI,YAAa,SAACjG,GACRA,GAAQA,EAAKiP,gBACfnJ,EAAU9F,EAAKiP,eACfH,QAAQC,IAAI,0BAGhBzI,QAAS,SAACC,GACRuI,QAAQC,IAAIxI,GACZuI,QAAQC,IAAI,qBATTE,EA5BkC,oBAwCnCC,EAAY,yCAAG,uBAAAC,EAAA,yDACN,WAAT9R,EADe,gCAEX2R,IAFW,OAGjB3H,EAAQqE,KAAK,WAHI,sCAKXuD,IALW,OAMjB5H,EAAQqE,KAAK,SANI,2CAAH,qDASZrP,EAAU1C,KAEhB,OACE,eAAC,IAAD,WACE,cAAC,IAAD,CAAOyV,KAAK,aAAaC,OAAK,IAC9B,cAAC,IAAD,CAAOD,KAAK,IAAZ,SACE,qBAAK9U,UAAW+B,EAAQvC,KAAxB,SACE,cAACwV,GAAA,EAAD,CAAQC,SAAS,QAAQjV,UAAW+B,EAAQmC,OAA5C,SACE,eAACgR,GAAA,EAAD,WACE,qBAAK7H,IAAKtC,GAAMuC,IAAI,2BAAOtN,UAAW+B,EAAQgJ,OAC9C,qBAAK/K,UAAW+B,EAAQoB,MAAxB,SACGjB,OAAOC,YAAc,IAClB,+GACA,qDAGN,cAAC,IAAD,UACE,cAAC,IAAD,CAAO2S,KAAM,CAAC,UAAW,SAAzB,SACGV,GAAUA,EAAOhJ,UAChB,cAAC1G,EAAA,EAAD,CACEC,MAAM,UACNC,UAAW,cAAC,KAAD,IACXhC,QAASgS,EAHX,SAKY,WAAT7R,EAAoB,uCAAW,8C,wEChHhD1D,GAAYC,aAAW,SAACC,GAAD,OAC3BwB,YAAa,CACXoU,aAAc,CACZxQ,MAAO,UACPH,SAAU,UACV8F,OAAQ,SAEV8K,gBAAiB,CACfpU,UAAW,EACXE,aAAc,QAKdmU,GAAS,CACb,OACA,SACA,MACA,YACA,YACA,kBAEIC,GAAe,CAAC,eAAM,eAAM,eAAM,eAAM,eAAM,gBACvCC,GAAsB,SAAC5W,GAIlC,IAHA,IA5ByB6W,EA4BnBzT,EAAU1C,KACR+U,EAAWzV,EAAXyV,OACFqB,EAAyB,GACtBC,EAAI,EAAGA,EAAIL,GAAOrL,OAAQ0L,SA9BlB5H,KADQ0H,EAgCDpB,EAAOiB,GAAOK,MA/BE,OAAVF,GAA4B,KAAVA,GAgC5CC,EAAarE,KAAKsE,GAGtB,OACE,mCACGD,EAAarN,KAAI,SAACuN,EAAYhS,GAAb,OAChB,gCACE,qBAAK3D,UAAW+B,EAAQoT,aAAxB,SAAuCG,GAAaK,KACpD,8BAAMvB,EAAOiB,GAAOM,MACnBhS,IAAU8R,EAAazL,OAAS,EAC/B,cAAC5G,EAAA,EAAD,CAASpD,UAAW+B,EAAQqT,kBAC1B,OALN,mBAAsBzR,U,oFCnBxBtE,GAAYC,aAAW,SAACC,GAAD,OAC3BwB,YAAa,CACX+S,OAAQ,CACNpU,MALc,IAMdkW,WAAY,EACZ,2BAA4B,CAC1BnW,QAAS,SAGboW,iBAAkB,CAChBvL,OAAQ,EACRnG,SAAU,QAEZ2R,wBAAyB,CACvB,eAAgB,CACdC,cAAe,KAGnBC,iBAAkB,CAChBC,WAAY,IACZzR,SAAU,UACVtD,aAAc,IAEhBgV,YAAa,CACXxW,MA1Bc,KA4BhByW,OAAQ,CACNnV,UAAW,EACXE,aAAc,GAEhBkV,UAAW,CACTzU,QAAS,GAEX0U,gBAAiB,CACf1W,OAAQ,GACRF,QAAS,OACTI,WAAY,SACZoW,WAAY,IACZzR,SAAU,WACVuL,YAAa,IAEfuG,KAAM,CACJ3R,MAAO,aAUA4R,GAAQ,SAAC5X,GACpB,IAAMoD,EAAU1C,KACV0N,EAAUE,cAaVjO,EAAWwX,cACTpC,EAAiBzV,EAAjByV,OAAQrR,EAASpE,EAAToE,KAhBqB,EAkBXf,IAAMC,SAASC,OAAOC,YAlBX,mBAkB9BzC,EAlB8B,KAkBvB0C,EAlBuB,KAoB/BC,EAAc,WACdH,OAAOC,aAAezC,GAAO0C,EAASF,OAAOC,aAQnD,OALAH,IAAMM,WAAU,WAEd,OADAJ,OAAOK,iBAAiB,SAAUF,GAC3B,kBAAMH,OAAOM,oBAAoB,SAAUH,OAIlD,eAACoU,GAAA,EAAD,CACEzW,UAAW+B,EAAQ+R,OACnBpT,QAAQ,YACRqB,QAAS,CAAEd,MAAOc,EAAQmU,aAC1BQ,MAAO,CACLjX,QACW,WAATsD,GAAqBb,OAAOC,YAAc,KAAO,YAAS2L,GANhE,UASE,cAACoH,GAAA,EAAD,IACU,WAATnS,EACC,qCACE,sBAAK/C,UAAW+B,EAAQsU,gBAAxB,UAA0CjC,EAAOvI,KAAjD,oCACA,cAACzI,EAAA,EAAD,IACA,eAACyP,GAAA,EAAD,CAAM7S,UAAW+B,EAAQqU,UAAzB,UACE,eAACpD,GAAA,EAAD,CAAUC,QAAM,EAAmBrQ,QApCtB,WACrBmK,EAAQqE,KAAR,kBAAwBgD,EAAOhJ,YAmCvB,UACE,cAACuL,GAAA,EAAD,UACE,cAAC,KAAD,CACEhS,MACE3F,EAASE,WAAT,kBAAiCkV,EAAOhJ,UACpC,UACA,cAIV,cAACgI,GAAA,EAAD,CAAcC,QAAS,+BAVJ,eAYrB,cAACjQ,EAAA,EAAD,IACA,eAAC4P,GAAA,EAAD,CAAUC,QAAM,EAAkBrQ,QA9Cf,WAC3BmK,EAAQqE,KAAR,kBAAwBgD,EAAOhJ,SAA/B,aA6CQ,UACE,cAACuL,GAAA,EAAD,UACE,cAAC,KAAD,CACEhS,MACE3F,EAASE,WAAT,kBAAiCkV,EAAOhJ,SAAxC,WACI,UACA,cAIV,cAACgI,GAAA,EAAD,CAAcC,QAAS,+BAVJ,cAYrB,cAACjQ,EAAA,EAAD,IACA,mBAAGF,KAAK,QAAQlD,UAAW+B,EAAQuU,KAAM1I,OAAO,SAAhD,SACE,eAACoF,GAAA,EAAD,CAAUC,QAAM,EAAhB,UACE,cAAC0D,GAAA,EAAD,UACE,cAAC,KAAD,MAEF,cAACvD,GAAA,EAAD,CAAcC,QAAS,yBAJJ,gBAOvB,cAACjQ,EAAA,EAAD,UAIJ,qCACE,cAAC+J,EAAA,EAAD,CAAMzM,QAAQ,WAAWV,UAAW+B,EAAQ8T,iBAA5C,SACE,eAACzI,EAAA,EAAD,CAAapN,UAAW+B,EAAQ+T,wBAAhC,UACE,qBAAK9V,UAAW+B,EAAQiU,iBAAxB,sCACA,qBAAKhW,UAAW+B,EAAQoU,OAAxB,SACE,cAACS,GAAA,EAAD,CACE9M,KAAK,QACL+M,KAAM,cAAC,KAAD,IACNlS,MAAM,UACNkB,MAAK,kCAASuO,EAAOhJ,UACrB1K,QAAQ,eAGZ,cAAC,GAAD,CAAqB0T,OAAQA,SAGjC,eAACvB,GAAA,EAAD,WACE,eAACG,GAAA,EAAD,CAAUC,QAAM,EAAYrQ,QAjGrB,WACfmK,EAAQqE,KAAK,eAgGL,UACE,cAACuF,GAAA,EAAD,UACE,cAAC,KAAD,CACEhS,MACwB,eAAtB3F,EAASE,SAA4B,UAAY,cAIvD,cAACkU,GAAA,EAAD,CAAcC,QAAS,mBARJ,QAUrB,eAACL,GAAA,EAAD,CAAUC,QAAM,EAAcrQ,QAxGjB,WACrBmK,EAAQqE,KAAK,iBAuGL,UACE,cAACuF,GAAA,EAAD,UACE,cAAC,KAAD,CACEhS,MACwB,iBAAtB3F,EAASE,SAA8B,UAAY,cAIzD,cAACkU,GAAA,EAAD,CAAcC,QAAS,mBARJ,oB,kDCvL3ByD,GAAqB,IACrBzX,GAAYC,aAAW,SAACC,GAAD,OAC3BwB,YAAa,CACXvB,KAAM,CACJE,MAAOoX,GACP/Q,gBAAiB,sBACjBtG,QAAS,OACT+B,YAAa,GACb7B,OAAQ,GACR0K,aAAc,GAEhB0M,SAAU,CACRrX,MAAO,EACPC,OAAQ,GACR0K,aAAc,cACdtE,gBAAiB,UACjBiO,SAAU8C,IAEZE,WAAY,CACV3M,aAAc,eAEhB4M,OAAQ,CACNtX,OAAQ,GACRD,MAAO,GACPqG,gBAAiB,WAEnBmR,cAAe,CACb/S,SAAU,UAEZgT,YAAa,CACX9M,aAAc,EACdtE,gBAAiB,WAEnBqR,mBAAoB,CAClB9V,YAAa,QAKN+V,GAAc,SAAC,GAA0C,IAAxCC,EAAuC,EAAvCA,YAAaC,EAA0B,EAA1BA,aACnCxV,EAAU1C,KACVmY,EACHV,IAAsBS,EAAe,GAAMD,EAC9C,OACE,qBAAKtX,UAAW+B,EAAQvC,KAAxB,SACGgY,EAAsB,GACrB,qCACE,qBACExX,UAAW+B,EAAQgV,SACnBL,MAAO,CACLhX,MAAO8X,KAGVV,GAAqBU,GAAuB,EAC3C,qBACExX,UACE+B,EAAQqV,mBAAqB,IAAMrV,EAAQmV,cAE7CR,MAAO,CAAEhX,MAAO,IAAMoX,GAAqBU,IAJ7C,SAME,qBAAKxX,UAAW+B,EAAQoV,YAAc,IAAMpV,EAAQkV,WAEpD,QAGN,qBACEjX,UAAW+B,EAAQmV,cACnBR,MAAO,CACLhX,MAAO8X,GAHX,SAME,qBAAKxX,UAAW+B,EAAQiV,WAAa,IAAMjV,EAAQkV,c,UC1EvD5X,GAAYC,aAAW,SAACC,GAAD,OAC3BwB,YAAa,CACXvB,KAAM,CACJC,QAAS,OACTI,WAAY,UAEd4X,WAAY,CACVnW,WAAY,GACZoW,WAAY,OACZC,iBAAkB,OAClBC,mBAAoB,OACpBC,gBAAiB,OACjBC,cAAe,OACfC,aAAc,aAIPC,GAAQ,WACnB,IAAMjW,EAAU1C,KADS,EAEK4C,mBAAS,GAFd,mBAElBgW,EAFkB,KAETC,EAFS,KAGzB5V,qBAAU,WACR,IAAM6V,EAAWC,YAAW,WAC1BF,EAAWD,EAAU,KACpB,KACH,OAAO,WACLI,aAAaF,MAEd,CAACF,IACJ,IAAMK,EAAOpR,KAAKqR,MAAMN,EAAU,MAC5BO,EAAStR,KAAKqR,MAAMN,EAAU,IAC9BQ,EAASR,EAAU,GACzB,OACE,sBAAKjY,UAAW+B,EAAQvC,KAAxB,UACE,cAAC,KAAD,IACA,sBAAMQ,UAAW+B,EAAQ0V,WAAzB,mBAAyCa,EAAO,GAAK,IAAMA,EAAOA,EAAlE,YACEE,EAAS,GAAK,IAAMA,EAASA,EAD/B,YAEIC,EAAS,GAAK,IAAMA,EAASA,S,uCCxC1BC,GAAiB,SAC5BC,EACAlL,EACAmL,EACAzY,GAGA,GADAqU,QAAQC,IAAIkE,EAAsBlL,QACpBK,IAAVL,GAAiC,OAAVA,GAA4B,KAAVA,EAG3C,OAFAmL,EAAgB,wCAChBzY,KACO,EAET,GAA6B,IAAzBwY,GACF,GAAIlL,GAAS,IAAMA,EAAQ,EAGzB,OAFAmL,EAAgB,oDAChBzY,KACO,OAEJ,GAA6B,IAAzBwY,GACT,GAAIlL,GAAS,MAAQA,EAAQ,EAG3B,OAFAmL,EAAgB,oDAChBzY,KACO,OAEJ,GAA6B,IAAzBwY,GACT,GAAIlL,GAAS,IAAMA,EAAQ,EAGzB,OAFAmL,EAAgB,oDAChBzY,KACO,OAEJ,GAA6B,IAAzBwY,IACLlL,EAAQ,GAAKA,GAAS,IAGxB,OAFAmL,EAAgB,oDAChBzY,KACO,EAGX,OAAO,GCqBHd,GAAYC,aAAW,SAACC,GAAD,OAC3BwB,YAAa,CACX8X,cAAe,CACblZ,OAAQ,OACRD,MAAO,OACPqG,gBAAiB,WAEnB+S,KAAM,CACJpZ,MAAO,IACPsU,SAAU,OACV1J,OAAQ,OACR/F,WAAY,IAEdwU,UAAW,CACT1O,aAAc,EACd0L,cAAe,GAEjBiD,eAAgB,CACdrZ,OAAQ,GACRsZ,oBAAqB,EACrBC,qBAAsB,EACtBnT,gBAAiBoT,IAEnBC,iBAAkB,CAChB7U,WAAY,EACZjD,WAAY,EACZE,YAAa,GAEf6X,kBAAmB,CACjB7U,SAAU,OACVyR,WAAY,IACZjV,UAAW,GACXE,aAAc,IAEhBoY,aAAc,CACZtY,UAAW,GACXqJ,aAAc,EACdnJ,aAAc,GACd6O,YAAa,EACbzL,aAAc,GAEhBiV,aAAc,CACZ/U,SAAU,OACVyR,WAAY,IACZ/U,aAAc,GACdF,UAAW,GACX6O,WAAY,UAEd2J,mBAAoB,CAClBhV,SAAU,SACVkT,WAAY,OACZC,iBAAkB,OAClBC,mBAAoB,OACpBC,gBAAiB,OACjBC,cAAe,OACfC,aAAc,QAEhB9E,OAAQ,CACNlN,gBAAiB,OACjBpB,MAAOwU,GACP,UAAW,CACTpT,gBAAiB,SAGrB0T,sBAAuB,CACrBjY,YAAa,IAEfmO,aAAc,CACZnL,SAAU,WACVxD,UAAW,GACXE,aAAc,IAEhBwY,SAAU,CACRlV,SAAU,YAEZmV,WAAY,CACV1E,SAAU,WACV2E,MAAO,GACPC,OAAQ,GACR9T,gBAAiB,OACjB,UAAW,CACTA,gBAAiB,SAGrB+T,cAAe,CACb7E,SAAU,WACV8E,KAAM,GACNF,OAAQ,IAEVG,OAAQ,CACNva,QAAS,OACTG,eAAgB,gBAChBC,WAAY,UAEdoa,gBAAiB,CACfxa,QAAS,OACTI,WAAY,SACZ6X,WAAY,OACZC,iBAAkB,OAClBC,mBAAoB,OACpBC,gBAAiB,OACjBC,cAAe,OACfC,aAAc,QAEhBmC,8BAA+B,CAC7BlZ,UAAW,IAEbmZ,eAAgB,CACdtK,WAAY,SACZlL,MAAO,WAETyV,YAAa,CACX5Y,YAAa,GACbF,WAAY,SAKL+Y,GAAO,WAClB,IAAMhK,EAAgBC,aAAc,qBAC9BvO,EAAU1C,KAEV+H,EADQ,IAAIkT,gBAAgB9D,cAAc+D,QAC/BC,IAAI,MAJG,EAKEjK,mBAGxBtC,GAAuB,CACvBjB,UAAW,CACT5F,GAAIA,GAAM,IAEZuE,YAAa,SAACjG,GAAoC,IAAD,EACvC+U,EAAkB/U,EAAlB+U,cAOR,GANAC,EACEhV,EAAKuL,cAAc0J,UAAUvS,KAAI,SAACwS,GAChC,OAAOA,EAASC,QAAQzS,KAAI,SAAC0S,GAAD,OAAY,SAI5C,OAAIL,QAAJ,IAAIA,GAAJ,UAAIA,EAAeM,eAAnB,aAAI,EAAwB/Q,OAAQ,CAEhCyQ,EAAcM,QAAQ/Q,SAAWtE,EAAKuL,cAAc0J,UAAU3Q,QAE9DgR,GAAqB,GAEvB,IAAMC,EAAa,GACfC,OAA8CpN,EAClD2M,EAAcM,QAAQ/J,SAAQ,SAACmK,EAAQxX,IACrB,IAAZwX,EAAeF,EAAWtX,GAASwX,OACFrN,IAA5BoN,IACPA,EAA0BvX,MAE9ByX,EAAWH,GAETI,OAD8BvN,IAA5BoN,EAEAhU,KAAKoU,IACHb,EAAcM,QAAQ/Q,OACtBtE,EAAKuL,cAAc0J,UAAU3Q,OAAS,GAGfkR,KAGjC1K,YAAa,aAvCPlN,EALgB,EAKhBA,QAASoC,EALO,EAKPA,KALO,EA+CCgG,sBAGvB/N,EAAkB,CAClBgO,YAAa,SAACjG,GACRA,EAAK6V,eAAezP,YACtB0P,GAAU,MANTD,EA/CiB,sBA0DI7P,sBAG1B9N,GAHK6d,EA1DiB,oBA+DlBC,EAAoBtW,iBAAOmW,GAC3BI,EAAuBvW,iBAAOqW,GAC9BG,EAAaxW,iBAA8B,MAC3CyW,EAAqBzW,iBAA8B,MAlEjC,EAmEgCnD,mBAAiB,GAnEjD,mBAmEjB0W,EAnEiB,KAmEK0C,EAnEL,OAoEoBpZ,qBApEpB,mBAoEjB6Z,EApEiB,KAoEDpB,EApEC,OAqEMzY,mBAAsC,IArE5C,mBAqEjB8Y,EArEiB,KAqERK,EArEQ,OAsEInZ,oBAAS,GAtEb,mBAsEjB8Z,EAtEiB,KAsETP,EAtES,OAuE0BvZ,oBAAS,GAvEnC,mBAuEjB+Z,EAvEiB,KAuEEhB,EAvEF,OAwEgC/Y,oBAAS,GAxEzC,mBAwEjBga,EAxEiB,KAwEKC,EAxEL,OAyEUja,oBAAS,GAzEnB,mBAyEjBka,GAzEiB,KAyENC,GAzEM,KA0ElBrP,GAAUE,cACVoP,GAAsBjX,kBAAO,GA3EX,GA4EgBnD,oBAAS,GA5EzB,qBA4EjBqa,GA5EiB,MA4EHC,GA5EG,SA6EgBta,mBAAS,IA7EzB,qBA6EjB5B,GA7EiB,MA6EHuY,GA7EG,MA8ElBzY,GAAY,WAChBoc,IAAgB,IAGZC,GAAiBC,uBAAY,WACjC,IAAMxL,EAAa,OAAGvL,QAAH,IAAGA,OAAH,EAAGA,EAAMuL,cAC5B,IAAKA,EACH,MAAO,GAGT,IADA,IAAMyL,EAAc,GACXhH,EAAI,EAAGA,EAAIzE,EAAc0J,UAAU3Q,OAAQ0L,SAC/B5H,IAAfiN,EAAQrF,GAAkBgH,EAAYtL,KAAK2J,EAAQrF,IAClDgH,EAAYtL,MAAM,GAEzB,OAAOsL,IACN,CAAC3B,EAAD,OAAUrV,QAAV,IAAUA,OAAV,EAAUA,EAAMuL,gBACb0L,GAA6BF,uBAAY,WAC7C,IAAMC,EAAcF,KACpB,OAAIpV,GAA6B,IAAvBsV,EAAY1S,OACb2R,EAAqBrW,QAAQ,CAClC0H,UAAW,CACTtC,MAAO,CAAEkS,gBAAiBxV,EAAI2T,QAAS2B,MAGtCG,QAAQC,YACd,CAACN,GAAgBpV,IAapB,GAZA9E,qBAAU,WAIR,OAHAuZ,EAAmBvW,QAAUyX,aAAY,WACvCJ,OACC,KACI,WACDd,EAAmBvW,UACrB0X,cAAcnB,EAAmBvW,SACjCuW,EAAmBvW,QAAU,SAGhC,CAACqX,KAEArZ,EACF,OAAO,cAAC,EAAD,IAET,IAAKoC,EACH,OAAO,wCAxHe,IA2HhBuL,GAAkBvL,EAAlBuL,cAEFgM,GAAqB,WACzBb,IAAa,IAGTc,GAAU,yCAAG,2CAAArI,EAAA,yDAAOsI,EAAP,gCACblM,GAActE,MAAQjF,GADT,qBAEH,IAARyV,EAFW,iBAGJzH,EAAI,EAHA,YAGGA,EAAIzE,GAAc0J,UAAU3Q,QAH/B,oBAIN0O,GAAehD,EAAGqF,EAAQrF,GAAIkD,GAAiBzY,IAJzC,0CAKF,GALE,OAGuCuV,IAHvC,iDAQN,GARM,iCAURgD,GACLC,EACAoC,EAAQpC,GACRC,GACAzY,KAda,kCAiBV,GAjBU,4CAAH,qDAmBVid,GAAiB,yCAAG,uBAAAvI,EAAA,sEACOqI,KADP,WAEC,IAFD,wDAKxB7B,EAAwB1C,EAAuB,GAC3CiD,EAAWtW,SACb+S,aAAauD,EAAWtW,SAPF,2CAAH,qDAWjB+X,GAAQ,yCAAG,6BAAAxI,EAAA,sEACgBqI,IAAW,GAD3B,WAEU,IAFV,wDAKXrB,EAAmBvW,UACrB+S,aAAawD,EAAmBvW,SAChCuW,EAAmBvW,QAAU,MAE3B8B,IACIsV,EAAcF,KACpBd,EAAkBpW,QAAQ,CACxB0H,UAAW,CACTtC,MAAO,CAAEkS,gBAAiBxV,EAAI2T,QAAS2B,OAb9B,2CAAH,qDAmBRY,GAAiB,yCAAG,uBAAAzI,EAAA,sDAKxBwG,EAAwB1C,EAAuB,GAC3CiD,EAAWtW,SACb+S,aAAauD,EAAWtW,SAPF,2CAAH,qDAWjBiY,GAAW,WACfxQ,GAAQqE,KAAK,eAGToM,GAAqB,yCAAG,uBAAA3I,EAAA,6DACxBgH,EAAmBvW,UACrB+S,aAAawD,EAAmBvW,SAChCuW,EAAmBvW,QAAU,MAHH,SAKtBqX,KALsB,OAM5BY,KAN4B,2CAAH,qDAyBrBE,GAAqB,SACzB9P,EACAhK,EACA+Z,GAEA,KACErB,GAAoB/W,SACnBwW,GAAkBA,EAAenD,GAAsBhV,IAF1D,CAMA,IAAMsX,EAAU,eAAQF,GAaxB,GAZAE,EAAWtC,GAAwBhV,EAC/BsN,GAActE,MAAQnF,GCvZQ,SACpC4T,EAKAV,EAGAoB,EACAb,EAGAtC,GAEA,GAA6B,IAAzBA,EAA4B,CAC9B,IAAMgF,EAAoB,CAAC,EAAG,EAAG,EAAG,GACpC,GAAyC,IAArC1C,EAAWtC,GAA6B,CAAC,IAAD,iBACNgF,GADM,IAC1C,2BACE1C,EADqD,SACjB,EAFI,8BAK1C,GADAG,EAAWH,GACPa,EAAgB,CAClB,IADkB,EACZ8B,EAAoB9B,EAAe1T,KAAI,SAACyS,GAAD,oBAAiBA,MAD5C,eAEkB8C,GAFlB,IAElB,2BACE,IADsD,IAA7CE,EAA4C,QAE/CnI,EAAI,EACRA,EAAIkI,EAAkBC,GAAuB7T,OAC7C0L,IAEU,IAANA,IACFkI,EAAkBC,GAAuBnI,IAAK,GATlC,8BAalBgF,EAAkBkD,SAIpB,GADAxC,EAAWH,GACPa,EAAgB,CAClB,IADkB,EACZ8B,EAAoB9B,EAAe1T,KAAI,SAACyS,GAAD,oBAAiBA,MAD5C,eAEkB8C,GAFlB,IAElB,2BACE,IADsD,IAA7CE,EAA4C,QAE/CnI,EAAI,EACRA,EAAIkI,EAAkBC,GAAuB7T,OAC7C0L,IAEU,IAANA,IACFkI,EAAkBC,GAAuBnI,IAAK,GATlC,8BAalBgF,EAAkBkD,SAGjB,GAA6B,IAAzBjF,EAA4B,CACrC,IAAMgF,EAAoB,CAAC,EAAG,EAAG,EAAG,GACpC,GAAyC,IAArC1C,EAAWtC,GAA6B,CAAC,IAAD,iBACNgF,GADM,IAC1C,2BACE1C,EADqD,SACjB,EAFI,8BAK1C,GADAG,EAAWH,GACPa,EAAgB,CAClB,IADkB,EACZ8B,EAAoB9B,EAAe1T,KAAI,SAACyS,GAAD,oBAAiBA,MAD5C,eAEkB8C,GAFlB,IAElB,2BACE,IADsD,IAA7CE,EAA4C,QAE/CnI,EAAI,EACRA,EAAIkI,EAAkBC,GAAuB7T,OAC7C0L,IAEU,IAANA,IACFkI,EAAkBC,GAAuBnI,IAAK,GATlC,8BAalBgF,EAAkBkD,SAIpB,GADAxC,EAAWH,GACPa,EAAgB,CAClB,IADkB,EACZ8B,EAAoB9B,EAAe1T,KAAI,SAACyS,GAAD,oBAAiBA,MAD5C,eAEkB8C,GAFlB,IAElB,2BACE,IADsD,IAA7CE,EAA4C,QAE/CnI,EAAI,EACRA,EAAIkI,EAAkBC,GAAuB7T,OAC7C0L,IAEU,IAANA,IACFkI,EAAkBC,GAAuBnI,IAAK,GATlC,8BAalBgF,EAAkBkD,SAItBxC,EAAWH,GDwTT6C,CACE1C,EACAV,EACAoB,EACAb,EACAtC,GAGFyC,EAAWH,GAETtC,IAAyB1H,GAAc0J,UAAU3Q,OAAS,EAAG,CAC/DkS,GAAwB,GACxBG,GAAoB/W,SAAU,EAC9B,IAAMyY,EAAU3F,YAAW,WACrBnH,GAActE,MAAQnF,GClUI,SACpCwW,EACA3C,EACAP,EACAE,GAE8B,IAA1BgD,GAA0C,IAAXlD,EACjCO,EAAwB,GACW,IAA1B2C,GAA0C,IAAXlD,GACxCO,EAAwB,GACxBL,GAAqB,IAErBK,EAAwB2C,EAAwB,GDuT1CC,CACEtF,EACA0C,EACA1X,EACAqX,IAGFK,EAAwB1C,EAAuB,GAC3CiD,EAAWtW,SACb+S,aAAauD,EAAWtW,UAG5B4W,GAAwB,GACxBG,GAAoB/W,SAAU,IAC7B,KACHsW,EAAWtW,QAAUyY,OAErB/C,GAAqB,KAInBkD,GAAkBjN,GAAc0J,UAAUhC,GAChD,OACE,sBAAK3Y,UAAW+B,EAAQ8W,cAAxB,UACE,sBAAK7Y,UAAW+B,EAAQ+W,KAAxB,UACE,eAAC3L,EAAA,EAAD,CAAMnN,UAAW+B,EAAQgX,UAAWrY,QAAQ,WAA5C,UACE,qBAAKV,UAAW+B,EAAQiX,iBACxB,eAAC5L,EAAA,EAAD,CAAapN,UAAW+B,EAAQqX,iBAAhC,UACE,qBAAKpZ,UAAW+B,EAAQsX,kBAAxB,SACGpI,GAAcpF,OAEhBkQ,GACC,qCACE,qBAAK/b,UAAW+B,EAAQ4N,aAAxB,gFAGA,cAAC,KAAD,CACE/M,QAlFY,SAAC+K,GAC3BA,EAAEwQ,iBACFZ,MAiFcvd,UAAW+B,EAAQ2X,SACnBxW,KAAK,IAHP,gDAWN6Y,GACA,qCACE,cAAC5O,EAAA,EAAD,CAAMnN,UAAW+B,EAAQuX,aAAc5Y,QAAQ,WAA/C,SACE,eAAC0M,EAAA,EAAD,WACG8Q,GAAgBE,OACf,qBAAKpe,UAAW+B,EAAQoY,eAAxB,SACG+D,GAAgBE,SAEjB,KACJ,qBAAKpe,UAAW+B,EAAQwX,aAAxB,SACsC,IAAnC2E,GAAgBrD,QAAQ7Q,QACzBkU,GAAgBlP,SAChBkP,GAAgBlP,QAAQrF,SAAS,WAC/B,qCACGuU,GAAgBlP,QAAQqP,MAAM,WAAW,GAC1C,cAAC9Q,EAAA,EAAD,CACExK,KAAK,SACL/C,UAAW+B,EAAQqY,YACnB3M,MACoC,OAAlCsN,EAAQpC,SAC0B7K,IAAlCiN,EAAQpC,GACJoC,EAAQpC,GACR,GAENjL,SAhHM,SAACC,GAC3B,IAAMsN,EAAU,eAAQF,GACxBvG,QAAQC,IAAI9G,EAAEC,OAAOH,YAEAK,IAAnBH,EAAEC,OAAOH,OACU,OAAnBE,EAAEC,OAAOH,OACU,KAAnBE,EAAEC,OAAOH,MAETwN,EAAWtC,GAAwBnQ,OAAOmF,EAAEC,OAAOH,cACzCwN,EAAWtC,GACvByC,EAAWH,MAwGQiD,GAAgBlP,QAAQqP,MAAM,WAAW,MAG5CH,GAAgBlP,UAGpB,cAACsP,GAAA,EAAD,CAAaC,UAAU,WAAvB,SACGL,GAAgBrD,QAAQzS,KAAI,SAAC0S,EAAQnX,GAAT,OAC3B,cAAC6a,GAAA,EAAD,CACE/Q,MAAOqN,EACP2D,QAAS,cAACC,GAAA,EAAD,CAAO/Z,MAAM,YAEtBkB,MACE,sBAAM7F,UAAW+B,EAAQyX,mBAAzB,SACGsB,IAGL/Q,YACE+R,IACAA,EAAenD,GAAsBhV,UAEjCmK,EAEN6Q,QAAS5D,EAAQpC,KAA0BhV,EAC3Cf,QAAS,SAAC+K,GAAD,OACP8P,GAAmB9P,EAAGhK,KAjB1B,iBAGiBA,cAsBzB,sBAAK3D,UAAWqQ,EAAgB,GAAKtO,EAAQiY,OAA7C,UACE,gCACE,cAACtV,EAAA,EAAD,CACE1E,UACE+B,EAAQ0X,sBAAwB,IAAM1X,EAAQkR,OAEhDvS,QAAQ,YACRkC,QAAS0a,GACTvT,SAAmC,IAAzB4O,EANZ,gCAUA,cAACjU,EAAA,EAAD,CACE1E,UACE+B,EAAQ0X,sBAAwB,IAAM1X,EAAQkR,OAEhDvS,QAAQ,YACRkC,QAASwa,GACTrT,WACG4O,IACC1H,GAAc0J,UAAU3Q,OAAS,QACC8D,IAAlCiN,EAAQpC,KACRsD,QAEkCnO,IAAlCiN,EAAQpC,SAC8B7K,IAAtCiN,EAAQpC,EAAuB,IAbrC,gCAqBA,cAACjU,EAAA,EAAD,CACEhE,QAAQ,YACRiE,MAAM,UACN/B,QAASya,GACTtT,UAAWiS,EAJb,6BASF,sBACEhc,UACE+B,EAAQkY,gBACR,KACC5J,EAAgBtO,EAAQmY,8BAAgC,IAJ7D,UAOE,cAAC,GAAD,CACE5C,YAAarG,GAAc0J,UAAU3Q,OACrCuN,aAAcoB,IATlB,iBAWQA,EAAuB,EAX/B,iDAYK1H,GAAc0J,UAAU3Q,OAZ7B,uBAeF,qBAAKhK,UAAW+B,EAAQ+X,cAAxB,SACE,cAAC,GAAD,MAEF,eAAC8E,GAAA,EAAD,CACE5e,UAAW+B,EAAQ4X,WACnB/W,QAAS4a,GACT9c,QAAQ,WAHV,UAKE,cAAC,KAAD,CAAmBiE,MAAM,YAL3B,0CAWN,eAACsF,GAAA,EAAD,CACE1J,MAAO4b,MAAelL,GAAc4N,YACpCre,QAASyc,GAFX,UAIE,cAAC/S,GAAA,EAAD,iCACA,cAACC,GAAA,EAAD,UACE,cAACwE,GAAA,EAAD,UAAoBsC,GAAc4N,gBAEpC,cAACjQ,GAAA,EAAD,UACE,cAAClK,EAAA,EAAD,CAAQ9B,QAASqa,GAAoBtY,MAAM,UAAU6I,WAAS,EAA9D,+BAKJ,cAAC,EAAD,CACErN,UAAWmc,GACXlc,aAAcmc,GACdlc,aAAcA,S,kCEhlBJf,aAAW,SAACC,GAAD,OAC3BwB,YAAa,CACX+d,kBAAmB,CACjBzU,aAAc,EACd3K,MAAO,IACP4K,OAAQ,eAEVyU,kBAAmB,CACjBva,SAAU,SACVgG,UAAW,OACXtJ,aAAc,GACdF,UAAW,GACX+O,YAAa,IAEftF,WAAY,CACVvJ,aAAc,GACdI,WAAY,GACZkD,SAAU,QAEZmG,eAAgB,CACdL,OAAQ,UAEVI,MAAO,CACLhL,MAAO,MACP4E,aAAc,GACdpD,aAAc,IAEhB4J,gBAAiB,CACf9J,UAAW,GACXM,WAAY,GACZE,YAAa,GACbN,aAAc,GACdzB,QAAS,OACTG,eAAgB,iBAElBof,iBAAkB,CAChBra,MAAO,UACPH,SAAU,QACVtD,aAAc,EACdF,UAAW,S,8ECtCXie,IXhBJxL,GWgBkC7R,GXZ3B,YAOC,IANN/C,EAMK,EANLA,SACAqgB,EAKK,EALLA,cACApd,EAIK,EAJLA,YAIK,EAEqByO,mBAAsCrC,GAAQ,CACtElB,UAAW,CACTkS,iBAEF1O,YAAa,aAJP9K,EAFH,EAEGA,KAOR,OATK,EAESpC,UAOEoC,EACP,cAAC,EAAD,IAGLA,EAAKyZ,QAAUzZ,EAAKyZ,OAAOC,IAE3B,cAAC3L,GAAD,CAAkB5R,QAAS6D,EAAKyZ,OAAOC,IAAKtd,YAAaA,EAAzD,SACGjD,IAKA,OWfLQ,GAAYC,aAAW,SAACC,GAAD,OAC3BwB,YAAa,CACXiO,QAAS,CACPrN,QAAS,YAEX0d,mBAAoB,CAClBre,UAAW,GACXE,aAAc,IAEhBoe,SAAU,CACR3a,MAAO,gBAKA4a,GAAS,WACpB,IAAMxd,EAAU1C,KADU,EAEAkR,mBAGxBvC,GAAoB,CACpBhB,UAAW,CAAEyD,UAAU,GACvBD,YAAa,WACb7E,YAAa,SAACjG,GACZ,IADqB,EACfqL,EAAoBrL,EAAKqL,kBAC3ByO,EAAQ,EAFS,eAGOzO,GAHP,IAGrB,2BAA+C,SAC3B6B,OAChB4M,GAAS,IALQ,8BAQrBC,EAAkCD,GAClC,IATqB,EASfE,EAAyB,IAAI5O,IATd,eAUOC,GAVP,IAUrB,2BAA+C,CAAC,IAArCE,EAAoC,QACzCA,EAAc2B,MAAQ3B,EAAc0O,cACtCD,EAAuBrO,IAAIJ,EAAc0O,eAZxB,8BAcrBC,EAAuBF,MApBnBpc,EAFkB,EAElBA,QAASoC,EAFS,EAETA,KAFS,EAyB4BzD,mBACpD,IAAI6O,KA1BoB,mBAyBnB+O,EAzBmB,KAyBED,EAzBF,OA+BtB3d,mBAAwB,MA/BF,mBA6BxB6d,EA7BwB,KA8BxBL,EA9BwB,OAgCoBxd,oBAAS,GAhC7B,mBAgCnB8d,EAhCmB,KAgCFC,EAhCE,KAkC1B,GAAID,EACF,OACE,cAACd,GAAD,CACEC,cAAezb,MAAMrE,KAAKygB,GAC1B/d,YAAa,kBAAMke,GAAmB,MAI5C,GAAI1c,IAAYoC,GAA2C,OAAnCoa,EACtB,OAAO,cAAC,EAAD,IAET,IAAM/O,EAAoBrL,EAAKqL,kBA+B/B,OACE,sBAAK/Q,UAAW+B,EAAQiN,QAAxB,UACE,cAACiR,GAAA,EAAD,CAAgB1B,UAAW3a,IAAO5D,UAAW+B,EAAQsd,mBAArD,SACE,eAACa,GAAA,EAAD,CAAOpW,KAAK,QAAQqW,aAAW,iFAA/B,UACE,cAACC,GAAA,EAAD,UACE,eAACC,GAAA,EAAD,WACE,cAACC,GAAA,EAAD,CAAW3e,QAAQ,WAAnB,SACE,cAAC4e,GAAA,EAAD,CACE5B,QACEkB,EAAoB/V,OAClBgW,GAC2B,IAA7BD,EAAoB/V,KAEtBC,SAA6C,IAAnC+V,EACVpS,SA9BgB,SAC9BhB,GAEA,IAAMiS,EAAUjS,EAAMkB,OAAO+Q,QACvBe,EAAyB,IAAI5O,IACnC,GAAI6N,EAAS,CAAC,IAAD,iBACiB5N,GADjB,IACX,2BAA+C,CAAC,IAArCE,EAAoC,QACzCA,EAAc2B,MAAQ3B,EAAc0O,cACtCD,EAAuBrO,IAAIJ,EAAc0O,eAHlC,+BAMbC,EAAuBF,QAsBb,cAACY,GAAA,EAAD,2BACA,cAACA,GAAA,EAAD,uCACA,cAACA,GAAA,EAAD,4CAGJ,cAACE,GAAA,EAAD,UACGzP,EAAkB3I,KAAI,SAAC6I,EAAetN,GAAhB,OACrB,eAAC0c,GAAA,EAAD,WACE,cAACC,GAAA,EAAD,CAAW3e,QAAQ,WAAnB,SACE,cAAC4e,GAAA,EAAD,CACExW,UAAWkH,EAAc2B,KACzB+L,UACI1N,EAAc0O,cAChBE,EAAoB3O,IAAID,EAAc0O,cAExCjS,SAAU,SAACC,GAAD,OACRsD,EAAc0O,cA9DN,SAC1BjT,EACAiT,GAEA,IAAMhB,EAAUjS,EAAMkB,OAAO+Q,QACvBe,EAAyB,IAAI5O,IAAI+O,GACnClB,EACFe,EAAuBrO,IAAIsO,GAE3BD,EAAuBe,OAAOd,GAEhCC,EAAuBF,GAoDLgB,CAAoB/S,EAAGsD,EAAc0O,mBAI3C,cAACW,GAAA,EAAD,UAAYrP,EAAcpF,OAC1B,cAACyU,GAAA,EAAD,UACGrP,EAAc2B,KACb,cAAC+N,GAAA,EAAD,CACE3gB,UAAW+B,EAAQud,SACnB9a,SAAS,UAET,OAEN,cAAC8b,GAAA,EAAD,UACGrP,EAAcE,qBAAuB,SAxB1C,wBAAgCxN,cA+BxC,cAACe,EAAA,EAAD,CACEhE,QAAQ,YACRiE,MAAM,UACNoF,SAAuC,IAA7B8V,EAAoB/V,KAC9BlH,QA9DiB,WACrBod,GAAmB,IAyDjB,0C,mvCVpKMtM,K,0BAAAA,E,2BAAAA,Q,KWPL,IAAMkN,GAAaljB,cAAH,M,+ICcVmjB,GAAwB,CACnC,YACA,UACA,WACA,iBAEWC,GAAuC,CAClD,2BACA,2BACA,2BACA,kCAGWC,GAAyB,SAAKC,EAAYC,GACrD,IADoE,EAC9DC,EAAgB,GAD8C,eAEzCF,GAFyC,IAEpE,2BAAkC,CAAC,IAA1BG,EAAyB,QAC5BA,IAAmBF,GACrBC,EAAS9P,KAAK+P,IAJkD,8BAOpE,OAAOD,GAGIE,GAAwB,SAAC,GAKxB,IAJZxX,EAIW,EAJXA,aACAyX,EAGW,EAHXA,kBACAC,EAEW,EAFXA,iBACAC,EACW,EADXA,oBAYA,OACE,eAACtX,GAAA,EAAD,CACE1J,KAAMqJ,EACNpJ,QAAS6gB,EACTG,kBAAgB,oBAHlB,UAKE,cAACtX,GAAA,EAAD,CAAa9C,GAAG,oBAAhB,sCACA,cAAC+C,GAAA,EAAD,UACG2W,GAAqC1Y,KAAI,SAACqZ,EAAa9d,GACtD,OACE,8BACE,cAAC6a,GAAA,EAAD,CACEC,QACE,cAAC8B,GAAA,EAAD,CACE5B,QAAS2C,EAAiB3X,SACxBkX,GAAsBld,IAExB+J,SAAU,SAAChB,GA3BC,IAC5BgV,IA4BoBb,GAAsBld,GACtB+I,EAAMkB,OAAO+Q,QAxBrB2C,EAAiB3X,SAAS+X,IACpCH,EAAoB,GAAD,oBAAKD,GAAL,CAAuBI,KAF1CH,EAAoBR,GAAuBO,EAAkBI,OA8BnD7b,MAAO4b,KAfDA,Y,qBC5BhBE,GAA6B,mDAE7BtiB,GAAYC,aAAW,SAACC,GAAD,OAC3BwB,YAAa,CACX0J,WAAY,CACV9F,MAAO,UACPH,SAAU,QACVuR,cAAe,EACfxR,WAAY,GAEdmG,MAAO,CACLhL,MAAO,MACP4E,aAAc,GACdyR,cAAe,GAEjB6L,aAAc,CACZniB,QAAS,gBAEXoiB,cAAe,CACbniB,MAAO,OAEToiB,iBAAkB,CAChBpiB,MAAO,OAETqiB,gBAAiB,CACfriB,MAAO,MACP4E,aAAc,IAEhB0d,eAAgB,CACdtiB,MAAO,MACP4E,aAAc,IAEhB2d,oBAAqB,CACnBviB,MAAO,MACPD,QAAS,cACTG,eAAgB,SAChB2E,WAAY,IAEd2d,cAAe,CACb3d,WAAY,IAEd4d,mBAAoB,CAClB5d,WAAY,IAEd6d,aAAc,CACZ5gB,YAAa,IAEf6gB,YAAa,CACXtc,gBAAiB,OACjBpB,MAAOwU,GACP,UAAW,CACTpT,gBAAiB,SAGrBuc,iBAAkB,CAChB5iB,MAAO,OACPG,WAAY,aACZJ,QAAS,QAEX8iB,aAAc,CACZ7iB,MAAO,GACPC,OAAQ,GACRgF,MAAO,uBAET6d,KAAM,CACJhhB,YAAa,GAEfihB,sBAAuB,CACrBjhB,YAAa,QAKbkhB,GAAkB,CACtBC,OAAQ,aACRC,QAAS,eACTC,YAAa,eACbC,aAAc,mDACdC,eAAgB,mDAChBC,eAAgB,mDAChBC,mBAAoB,mDACpBnZ,KAAM,SAeKoZ,GAAoBC,sBAC/B,WAEE9b,GACI,IAFF+b,EAEC,EAFDA,eAAgBC,EAEf,EAFeA,MAAyBC,GAExC,EAFsBC,iBAEtB,EAFwCD,qBAAqBE,EAE7D,EAF6DA,OAG1DzhB,EAAU1C,KADb,EAE6B4C,mBAAS,IAFtC,mBAEImJ,EAFJ,KAEcqY,EAFd,OAOqBxhB,mBAAS,IAP9B,mBAOI4J,EAPJ,KAOU6X,EAPV,OAYyBzhB,mBAAgC,IAZzD,mBAYIyM,EAZJ,KAYYiV,EAZZ,OAsB6B1hB,mBAAS,CACvCqZ,IAAK,GACLsI,IAAK,KAxBJ,mBAsBIC,EAtBJ,KAsBcC,EAtBd,OAuD+B7hB,mBAG/B,CACDqZ,IAAK,KACLsI,IAAK,OA5DJ,mBAuDIG,EAvDJ,KAuDeC,EAvDf,OAqFuC/hB,oBAAS,GArFhD,mBAqFIgiB,EArFJ,KAqFmBC,EArFnB,OA4F+BjiB,oBAAS,GA5FxC,mBA4FI9B,EA5FJ,KA4FeC,EA5Ff,OA6FqC6B,mBAAS,IA7F9C,mBA6FI5B,EA7FJ,KA6FkBuY,EA7FlB,OA8FiC3W,mBAAwB,MA9FzD,mBA8FIkiB,EA9FJ,KA8FgBC,EA9FhB,OAkGCniB,oBAAS,GAlGV,mBAgGDoiB,EAhGC,KAiGDC,EAjGC,QAmG6CriB,mBAAmB,IAnGhE,qBAmGIqf,GAnGJ,MAmGsBC,GAnGtB,MA6GGgD,GAA0B,WAC9B,OAAIV,EAASvI,KAAO9S,OAAOqb,EAASvI,KAAO,GACzC1C,EAAgB+I,IAChBvhB,GAAa,QACbgkB,EAAc,WAGZP,EAASD,KAAOpb,OAAOqb,EAASD,KAAO,GACzChL,EAAgB+I,IAChBvhB,GAAa,QACbgkB,EAAc,WAIdP,EAASvI,KACTuI,EAASD,KACTpb,OAAOqb,EAASvI,KAAO9S,OAAOqb,EAASD,MAEvChL,EApO6B,4EAqO7BxY,GAAa,QACbgkB,EAAc,aAIZL,EAAUzI,KAAOyI,EAAUH,KAAOG,EAAUzI,IAAMyI,EAAUH,KAC9DhL,EAAgB,kFAChBxY,GAAa,QACbgkB,EAAc,eAIhBd,EAAoB,QACpBF,EAAe,CACbhY,WACAS,OACA6C,SACAmV,SAAU,CACRvI,IAAKuI,EAASvI,IAAM9S,OAAOqb,EAASvI,KAAO,KAC3CsI,IAAKC,EAASD,IAAMpb,OAAOqb,EAASD,KAAO,MAE7CY,cAAeT,EAAUzI,IACrB,CACEmJ,KAAMV,EAAUzI,IAAIoJ,cACpBC,MAAOZ,EAAUzI,IAAIsJ,WACrBC,IAAKd,EAAUzI,IAAIwJ,WAErB,KACJC,cAAehB,EAAUH,IACrB,CACEa,KAAMV,EAAUH,IAAIc,cACpBC,MAAOZ,EAAUH,IAAIgB,WACrBC,IAAKd,EAAUH,IAAIkB,WAErB,KACJzB,QACAE,iBAAkB,EAClBU,gBACAT,SACAlC,wBAIJ0D,8BAAoB3d,GAAK,iBAAO,CAC9BkT,OAAQ,WACNgK,UA0BJ,OACE,uBAAMU,YAAU,EAACC,aAAa,MAA9B,UACE,qBAAKllB,UAAW+B,EAAQ0I,WAAxB,sCACA,gCACE,cAAC8C,EAAA,EAAD,CACE1H,MAAM,qBACNiE,KAAK,QACL9J,UAAW+B,EAAQ2I,MACnB+C,MAAOrC,EACPsC,SA7MiB,SAACC,GACxB8V,EAAY9V,EAAEC,OAAOH,UA8MjB,cAACF,EAAA,EAAD,CACE1H,MAAM,eACNiE,KAAK,QACL9J,UAAW+B,EAAQ2I,MACnB+C,MAAO5B,EACP6B,SA/Ma,SAACC,GACpB+V,EAAQ/V,EAAEC,OAAOH,UAgNb,eAAC6Q,GAAA,EAAD,CAAate,UAAW+B,EAAQ2I,MAAOZ,KAAK,QAA5C,UACE,cAACqb,GAAA,EAAD,2BACA,eAACC,GAAA,EAAD,CACEzgB,MAAM,UACNkB,MAAM,eACN4H,MAAOiB,EACPhB,SAlNa,SACrBC,GAKAgW,EAAUhW,EAAEC,OAAOH,QAwMb,UAME,cAAC4X,GAAA,EAAD,CAAU5X,MAAM,SAAhB,oBACA,cAAC4X,GAAA,EAAD,CAAU5X,MAAM,SAAhB,oBACA,cAAC4X,GAAA,EAAD,CAAU5X,MAAM,eAAhB,gCAGJ,sBAAKzN,UAAW+B,EAAQugB,iBAAxB,UACE,sBACEtiB,UAAW+B,EAAQggB,gBAAkB,IAAMhgB,EAAQ6f,aADrD,UAGE,qBAAK5hB,UAAW+B,EAAQ0I,WAAxB,0BACA,gCACE,cAAC8C,EAAA,EAAD,CACE1H,MAAM,2BACNiE,KAAK,QACL/G,KAAK,SACL/C,UAAW+B,EAAQ8f,cACnBpU,MAAOoW,EAASvI,IAChB5N,SAxNS,SAACC,GACtB,IAAM2X,EAAY9c,OAAOmF,EAAEC,OAAOH,OACf,aAAf0W,IACEmB,GAAa9c,OAAOqb,EAASD,MAAsB,IAAd0B,IACvClB,EAAc,MAGC,WAAfD,GACEmB,GAAa,GACflB,EAAc,MAGlBN,EAAY,2BAAKD,GAAN,IAAgBvI,IAAK3N,EAAEC,OAAOH,UA6M7BxB,MACiB,aAAfkY,GAA4C,WAAfA,QAEzBrW,IAGR,sBAAM9N,UAAW+B,EAAQkgB,oBAAzB,SACE,cAAC,KAAD,CAAkBjiB,UAAW+B,EAAQwgB,iBAEvC,cAAChV,EAAA,EAAD,CACE1H,MAAM,2BACNiE,KAAK,QACL/G,KAAK,SACL/C,UAAW+B,EAAQ8f,cACnBpU,MAAOoW,EAASD,IAChBlW,SA1NS,SAACC,GACtB,IAAM4X,EAAY/c,OAAOmF,EAAEC,OAAOH,OACf,aAAf0W,IACEoB,GAAa/c,OAAOqb,EAASvI,MAAsB,IAAdiK,IACvCnB,EAAc,MAGC,WAAfD,GACEoB,GAAa,GACfnB,EAAc,MAGlBN,EAAY,2BAAKD,GAAN,IAAgBD,IAAKjW,EAAEC,OAAOH,UA+M7BxB,MACiB,aAAfkY,GAA4C,WAAfA,QAEzBrW,UAKZ,sBACE9N,UAAW+B,EAAQ+f,iBAAmB,IAAM/f,EAAQ6f,aADtD,UAGE,qBAAK5hB,UAAW+B,EAAQ0I,WAAxB,sCACA,eAAC,KAAD,CAAyB+a,MAAOC,KAAcC,OAAQC,KAAtD,UACE,cAACC,GAAA,EAAD,yBACEnY,MAAOsW,EAAUzI,IACjB5N,SApNU,SAACmY,EAAmBC,GACvB,cAAf3B,IACW,OAAT0B,GAAkB9B,EAAUH,MAAQiC,IAAS9B,EAAUH,MACzDQ,EAAc,MAGlBJ,EAAa,2BACRD,GADO,IAEVzI,IAAKuK,MA6MKhgB,MAAO,2BACP7F,UAAW+B,EAAQigB,gBACfU,IALN,IAMEzW,MAAsB,cAAfkY,QAAoCrW,KAE7C,cAAC8X,GAAA,EAAD,yBACEnY,MAAOsW,EAAUH,IACjBlW,SAjNU,SAACmY,EAAmBC,GACvB,cAAf3B,IACW,OAAT0B,GAAkB9B,EAAUzI,MAAQuK,IAAS9B,EAAUzI,MACzD8I,EAAc,MAGlBJ,EAAa,2BACRD,GADO,IAEVH,IAAKiC,MA0MKhgB,MAAO,2BACP7F,UAAW+B,EAAQigB,gBACfU,IALN,IAMEzW,MAAsB,cAAfkY,QAAoCrW,iBAMrD,sBAAK9N,UAAW+B,EAAQogB,mBAAxB,UACE,cAAC3D,GAAA,EAAD,CACEC,QACE,cAAC8B,GAAA,EAAD,CACE5B,QAASsF,EACTvW,SAnN8B,SACxChB,GAEAwX,EAAiBxX,EAAMkB,OAAO+Q,YAmNxB9Y,MAAM,+CAER,cAACnB,EAAA,EAAD,CACEE,UAAW,cAAC,KAAD,IACXhC,QAvMgC,WACtC0hB,GAA+B,IAuMzB3f,MAAM,UACN3E,UAAW+B,EAAQ0gB,sBAJrB,sCAQC5B,GAAsBzY,KAAI,SAACsZ,EAAU/d,GACpC,GAAI2d,GAAiB3X,SAAS+X,GAAW,CAMvC,OACE,cAAC9K,GAAA,EAAD,CACElW,QAAQ,WACRoJ,KAAK,QACLic,SATiB,WACnBxE,GACER,GAAuBO,GAAkBI,KAQzC7K,KAAM,cAAC,KAAD,IACNlS,MAAM,UACNkB,MAAOib,GAAqCnd,GAE5C3D,UACE2D,IAAU2d,GAAiBtX,OAAS,EAAIjI,EAAQygB,KAAO,IAFpDd,GAOX,OAAO,WAGX,sBAAK1hB,UAAW+B,EAAQmgB,cAAxB,UACE,cAACxd,EAAA,EAAD,CACEhE,QAAQ,YACRiE,MAAM,UACNC,UAAW,cAAC,KAAD,IACX5E,UAAW+B,EAAQqgB,aACnBxf,QAAS2hB,GALX,0BASA,cAAC7f,EAAA,EAAD,CACEhE,QAAQ,YACRkE,UAAW,cAAC,KAAD,IACX5E,UAAW+B,EAAQsgB,YACnBzf,QA7KuB,WAC7B6gB,EAAY,IACZC,EAAQ,IACRC,EAAU,IACVG,EAAY,CACVxI,IAAK,GACLsI,IAAK,KAEPI,EAAa,CACX1I,IAAK,KACLsI,IAAK,OAEPQ,EAAc,MACdd,EAAoB,GACpBY,EAAiB8B,IACjB5C,EAAe,CACbC,QACAE,iBAAkB,EAClBC,SACAS,cAAe+B,KAEjBzE,GAAoB,KAoJhB,6BASF,cAAC,EAAD,CACEphB,UAAWA,EACXC,aAAcA,EACdC,aAAcA,IAEhB,cAAC,GAAD,CACEuJ,aAAcya,EACdhD,kBApQmC,WACvCiD,GAA+B,IAoQ3BhD,iBAAkBA,GAClBC,oBAAqBA,WCjfzBliB,GAAYC,aAAW,SAACC,GAAD,OAC3BwB,YAAa,CACXvB,KAAM,CACJG,OAAQ,GACRF,QAAS,OACTI,WAAY,SACZkQ,YAAa,GACbkG,WAAY,IACZzR,SAAU,iBASHyhB,GAAS,SAAC,GAAqB,IAAnBC,EAAkB,EAAlBA,KACjBnkB,EAAU1C,KAChB,OACE,qCACE,qBAAKW,UAAW+B,EAAQvC,KAAxB,SAA+B0mB,IAC/B,cAAC9iB,EAAA,EAAD,Q,oBCFO+iB,GAAmB,SAAC,GAA8B,IAA5BC,EAA2B,EAA3BA,cAC3BC,EACc,OAAlBD,GAAmD,IAAzBA,EAAcpc,OACpC0G,EAGFvI,mBAAQ,WACV,IAAKie,EACH,MAAO,CAAEzV,eAAgB,GAAIpI,WAAY,IAC3C,IAAMqI,EAA4B,GAC5BrI,EAA6B,GAC7BsI,EAAuB,IAAIC,IACjCsV,EAAcpV,SAAQ,SAACC,GACrB,GAAKJ,EAAQK,IAAID,EAAc7J,KAaxB,GAAI6J,EAActI,QAAUsI,EAAcE,oBAE/C,IADA,IAAIxN,EAAQ,EACLA,GAASiN,EAAS5G,QAAQ,CAC/B,GAAI4G,EAASjN,GAAOyD,KAAO6J,EAAc7J,GAAI,CAC3CmB,EAAW5E,GAAOyN,KAAK,CACrBzI,OAAQsI,EAActI,OACtBL,WAAY2I,EAAcE,sBAE5B,MAEFxN,GAAS,QAtBXkN,EAAQQ,IAAIJ,EAAc7J,IAC1BwJ,EAASQ,KAAKH,GACVA,EAActI,QAAUsI,EAAcE,oBACxC5I,EAAW6I,KAAK,CACd,CACEzI,OAAQsI,EAActI,OACtBL,WAAY2I,EAAcE,uBAI9B5I,EAAW6I,KAAK,OAgBtB,IAAMkV,EAAgB/d,EAAWH,KAAI,SAACO,GAAD,OAAY,aAAIA,GAAQ4d,aAC7D,MAAO,CAAE5V,eAAgBC,EAAUrI,WAAY+d,KAC9C,CAACF,IACIzV,EAA+BD,EAA/BC,eAAgBpI,EAAemI,EAAfnI,WA3CoC,EA4ChCtG,oBAAS,GA5CuB,mBA4CrDqM,EA5CqD,KA4C7CkY,EA5C6C,KA6CtDC,EAAa,WACjBD,GAAU,IAKZ,OACE,qCACE,cAAC9hB,EAAA,EAAD,CACEE,UAAW,cAAC,KAAD,IACXD,MAAM,UACNoF,SAAUsc,EACVzjB,QATY,WAChB4jB,GAAU,IASN1c,KAAK,QALP,0BASA,eAACG,GAAA,EAAD,CAAQ1J,KAAM+N,EAAQ9N,QAASimB,EAA/B,UACE,cAACvc,GAAA,EAAD,uCACA,eAACC,GAAA,EAAD,WACE,cAAC8V,GAAA,EAAD,UACE,eAACC,GAAA,EAAD,CAAOpW,KAAK,QAAZ,UACE,cAACsW,GAAA,EAAD,UACE,eAACC,GAAA,EAAD,WACE,cAACC,GAAA,EAAD,2BACA,cAACA,GAAA,EAAD,SAGJ,cAACE,GAAA,EAAD,UACG7P,EAAevI,KAAI,SAAC0Q,EAAMnV,GAAP,OAClB,eAAC0c,GAAA,EAAD,WACE,cAACC,GAAA,EAAD,UAAYxH,EAAKjN,OACjB,cAACyU,GAAA,EAAD,UACE,cAAC,GAAD,CACEvY,eAAgBQ,EAAW5E,GAC3BqE,SAAU8Q,EAAKjN,KACf5D,QAAS6Q,EAAKnM,UANpB,wBAAgChJ,cAcxC,cAACiL,GAAA,EAAD,UACE,cAAClK,EAAA,EAAD,CAAQ9B,QAAS6jB,EAAY9hB,MAAM,UAAnC,sC,qBC9ENtF,GAAYC,aAAW,SAACC,GAAD,OAC3BwB,YAAa,CACX2lB,cAAe,CACbC,SAAU,UAKHC,GAAoB,SAAC,GAMpB,IALZhd,EAKW,EALXA,aACAyX,EAIW,EAJXA,kBACAwF,EAGW,EAHXA,YACAC,EAEW,EAFXA,UACAC,EACW,EADXA,QACW,EACYrb,sBACrB3N,GADKipB,EADI,oBAIX1kB,qBAAU,WACR2kB,EAAa,MACZ,CAACJ,IACJ,IAAM9kB,EAAU1C,KAPL,EAQuB4C,mBAAS,IARhC,mBAQJilB,EARI,KAQOD,EARP,KAiBLE,EAAa,yCAAG,uBAAAtS,EAAA,yDACF,KAAdqS,EADgB,gCAEZF,EAAa,CACjBha,UAAW,CACTtC,MAAO,CACLoc,YACAI,UACErG,GACEC,GAAqCsG,QACnCF,QATM,6CAgBZF,EAAa,CACjBha,UAAW,CACTtC,MAAO,CACLoc,YACAI,gBApBY,OAyBpB7F,IACA0F,IA1BoB,2CAAH,qDA4BnB,OACE,eAAC9c,GAAA,EAAD,CAAQ1J,KAAMqJ,EAAcpJ,QAAS6gB,EAArC,UACE,cAACnX,GAAA,EAAD,2BACA,eAACC,GAAA,EAAD,WACE,eAACwE,GAAA,EAAD,CAAmB3O,UAAW+B,EAAQ2kB,cAAtC,mBACIG,EADJ,8BAGA,eAACvI,GAAA,EAAD,CAAa+I,WAAS,EAAtB,UACE,cAAClC,GAAA,EAAD,CAAYmC,QAAM,EAAlB,0BACA,cAAClC,GAAA,EAAD,CAAQ3X,MAAOyZ,EAAWxZ,SA7CE,SAClCC,GAKAsZ,EAAatZ,EAAEC,OAAOH,QAuChB,SACGqT,GAAqC1Y,KAAI,SAACmf,GAAD,OACxC,cAAClC,GAAA,EAAD,CAAU5X,MAAO8Z,EAAjB,SACGA,GAD2BA,cAOtC,eAAC3Y,GAAA,EAAD,WACE,cAAClK,EAAA,EAAD,CAAQ9B,QAASye,EAAjB,0BACA,cAAC3c,EAAA,EAAD,CAAQ9B,QAASukB,EAAexiB,MAAM,UAAtC,iCC/EFtF,GAAYC,aAAW,SAACC,GAAD,OAC3BwB,YAAa,CACXvB,KAAM,CACJwB,UAAW,GACXtB,MAAO,oBACPinB,SAAU,KACVniB,SAAU,UAEZgjB,wBAAyB,CACvB9nB,MAAO,OACPC,OAAQ,KAEV8nB,aAAc,CACZ1hB,gBAAiB,OACjBpB,MAAOwU,GACP,UAAW,CACTpT,gBAAiB,SAGrB2hB,0BAA2B,CACzBlmB,YAAa,GAEfmmB,UAAW,CACTxjB,SAAU,SACV8L,aAAc,WACdC,WAAY,UAEd0X,WAAY,CACVpmB,YAAa,QAIbqmB,GAAmB,CACvB,qBACA,eACA,eACA,eACA,eACA,eACA,eACA,2BACA,eACA,gBAEIC,GAAe,CACnB,WACA,OACA,SACA,MACA,YACA,YACA,iBACA,aACA,aACA,aAGIC,GAAgB,CAAC,GAAI,GAAI,GAAI,GAAI,GAAI,GAAI,GAAI,IAAK,GAAI,KACtDC,GAAgB,CAAC,IAAK,GAAI,GAAI,GAAI,GAAI,GAAI,GAAI,IAAK,GAAI,KAkBhDC,GAAe,SAACtpB,GAC3B,IAAMoD,EAAU1C,KAEdiE,EAaE3E,EAbF2E,QACA4kB,EAYEvpB,EAZFupB,YACAC,EAWExpB,EAXFwpB,sBACAC,EAUEzpB,EAVFypB,kBACAC,EASE1pB,EATF0pB,yBACAC,EAQE3pB,EARF2pB,iBACAjF,EAOE1kB,EAPF0kB,MACAE,EAME5kB,EANF4kB,iBACAgF,EAKE5pB,EALF4pB,kBACAC,EAIE7pB,EAJF6pB,6BACAhF,EAGE7kB,EAHF6kB,OACAiF,EAEE9pB,EAFF8pB,iBACA1B,EACEpoB,EADFooB,QAf0C,EAiBV9kB,oBAAS,GAjBC,mBAiBrC9B,EAjBqC,KAiB1BC,EAjB0B,OAkBgB6B,oBAAS,GAlBzB,mBAkBrCymB,EAlBqC,KAkBbC,EAlBa,OAmBI1mB,mBAE9C,MArB0C,mBAmBrC2mB,EAnBqC,KAmBnBC,EAnBmB,OAyCoB5mB,oBAC9D,GA1C0C,mBAyCrC6mB,EAzCqC,KAyCXC,EAzCW,OA4Cc9mB,mBAExD,MA9C0C,mBA4CrC+mB,EA5CqC,KA4CdC,EA5Cc,OAqDkBhnB,mBAE5D,MAvD0C,mBAqDrCinB,EArDqC,KAqDZC,EArDY,KAwDtCC,EAAiC,SACrCvC,EACAC,GAEAqC,EAA2BtC,GAC3BoC,EAAyBnC,GAVzBiC,GAA4B,IAsB9B,GATAzmB,qBAAU,YAEM,IAAZgB,QACgBwK,IAAhBoa,GACuC,IAAvCA,EAAYmB,UAAUC,MAAMtf,QAE5B5J,GAAa,KAEd,CAACkD,EAAS4kB,IACT5kB,EACF,OACE,qBAAKtD,UAAW+B,EAAQylB,wBAAxB,SACE,cAAC,EAAD,MAIN,QAAoB1Z,IAAhBoa,EACF,OAAO,KAET,GAA2C,IAAvCA,EAAYmB,UAAUC,MAAMtf,OAC9B,OACE,cAAC,EAAD,CACE7J,UAAWA,EACXC,aAAcA,EACdC,aAAa,uEA6BnB,OACE,qCACE,eAAC4f,GAAA,EAAD,CAAgB1B,UAAW3a,IAAO5D,UAAW+B,EAAQvC,KAArD,UACE,cAAC+pB,GAAA,EAAD,CACEC,YAAanG,EACboG,mBAAoB,CAAC,EAAG,GAAI,IAC5B/nB,KAAM6hB,EACN/D,MAAO0I,EAAYmB,UAAUzgB,MAC7B8gB,aA1BiB,SACvBC,EACAjoB,GAEA8mB,EAA6B9mB,IAuBvB6c,UAAU,MACVqL,oBAlCwB,SAC9Bld,GAEA6b,EAAkB/f,OAAOkE,EAAMkB,OAAOH,SAgChCoc,mBAtBmB,SAAC,GAQb,IAPbzqB,EAOY,EAPZA,KAEAogB,GAKY,EANZvgB,GAMY,EALZugB,OAMA,MAAM,eAAN,OAAYA,EAAZ,2DAA4BtY,KAAK4iB,KAAK1qB,EAAOikB,GAA7C,aAeI,eAACnD,GAAA,EAAD,CAAOpW,KAAK,QAAQigB,aAAW,2BAA/B,UACE,cAAC3J,GAAA,EAAD,UACE,eAACC,GAAA,EAAD,WACGwH,GAAiBzf,KAAI,SAAC8d,EAAMviB,GAAP,OACpB,cAAC2c,GAAA,EAAD,CAEE5J,MAAO,CACLiQ,SAAUoB,GAAcpkB,GACxBqQ,SAAUgU,GAAcrkB,GACxBhC,QAAS,EACToO,YAAuB,IAAVpM,EAAc,QAAKmK,GAElC9N,UAAW+B,EAAQ4lB,UARrB,SAU2B,eAAxBG,GAAankB,GACZ,cAACqmB,GAAA,EAAD,CACEC,OAAgC,eAAxBnC,GAAankB,GACrBumB,UACE1G,IAAW9P,GAAYyW,YAAc,OAAS,MAEhDvnB,QAAS6lB,EALX,SAOGvC,IAGHA,GApBGA,MAwBT,cAAC5F,GAAA,EAAD,CACE5J,MAAO,CACL/U,QAAS,UAKjB,cAAC6e,GAAA,EAAD,UACG0H,EAAYmB,UAAUC,MAAMlhB,KAAI,SAACgiB,GAChC,IAAMC,GACHD,EAAmBhE,eACwB,IAA5CgE,EAAmBhE,cAAcpc,OAEnC,OACE,eAACqW,GAAA,EAAD,WACGyH,GAAa1f,KAAI,SAACkiB,EAAQ3mB,GACzB,IAAMqL,EACJrL,IAAUmkB,GAAa9d,OAAS,EAC5B8W,GACED,GAAsBuG,QACpBgD,EACEE,KAINF,EAAmBE,GACzB,OACE,cAAChK,GAAA,EAAD,CAEE5J,MAAO,CACLiQ,SAAUoB,GAAcpkB,GACxBqQ,SAAUgU,GAAcrkB,GACxBhC,QAAS,EACToO,YAAuB,IAAVpM,EAAc,QAAKmK,GAElC9N,UAAW+B,EAAQ4lB,UACnBxkB,MAAO6L,QAAWlB,EATpB,SAWGnK,IAAUmkB,GAAa9d,OAAS,EAC/B,qCACE,cAACrH,EAAA,EAAD,CACEonB,aAAW,SACX/pB,UAAW+B,EAAQ6lB,WACnB9d,KAAK,QACLnF,MAAM,UACN/B,QAAS,kBACPwnB,EAAmBve,MACnBud,EACEgB,EAAmBve,KACnBue,EAAmBhjB,KATzB,SAaE,cAAC,KAAD,CAAU5C,SAAS,cAEpBwK,KAGHA,GA9BGsb,MAmCX,cAAChK,GAAA,EAAD,CAAW5J,MAAO,CAAEiQ,SAAU,IAAKhlB,QAAS,GAA5C,SACE,sBAAK+U,MAAO,CAAEjX,QAAS,QAAvB,UACE,sBAAMO,UAAW+B,EAAQ2lB,0BAAzB,SACE,cAAC,GAAD,CACEtB,cAAegE,EAAmBhE,kBAGtC,cAAC1hB,EAAA,EAAD,CACEoF,KAAK,QAELnF,MAAM,UACNC,UAAW,cAAC,KAAD,IACXmF,SAAUsgB,EACVznB,QAAS,kBACPwnB,EAAmBhE,eArNX,SAC9BA,EACAmE,GAEAnC,EAAkBmC,GAClB1B,EAAoBzC,GACpB,IAAM+B,EAAwB/B,EAC3Bhe,KAAI,SAACoiB,GAAD,OAAkBA,EAAa7K,gBACnC6D,QAAO,SAACgH,GAAD,OAA2D,OAAjBA,KACpDnC,EAAyBF,GACzBQ,GAA0B,GA4MJ8B,CACEL,EAAmBhE,cACnBgE,EAAmBhjB,KAVzB,iCAxDSgjB,EAAmBhf,qBAmF3Cwd,GAAoBT,GACnB,cAAC,GAAD,CACE7Z,OAAQoa,EACRjC,WAhOW,WACjBkC,GAA0B,IAgOpBC,iBAAkBA,EAClBT,sBAAuBA,EACvBE,yBAA0BA,EAC1BqC,gBAjOgB,WACtBpC,GAAiB,MAmOdY,GAA2BF,GAC1B,cAAC,GAAD,CACEpf,aAAckf,EACdzH,kBA9N6B,WACnC0H,GAA4B,IA8NtBlC,YAAaqC,EACbpC,UAAWkC,EACXjC,QAASA,QCnWb1nB,I,cClBYC,aAAW,SAACC,GAAD,OAC3BwB,YAAa,CACX4pB,QAAS,CACPC,cAAe,QAEjB3pB,MAAO,CACLU,QAASpC,EAAMwU,QAAQ,IAEzB8C,KAAM,CACJnX,MAAO,GACPC,OAAQ,SDQIL,aAAW,SAACC,GAAD,OAC3BwB,YAAa,CACXiH,SAAU,CACRgM,SAAU,IACV/D,aAAc,WACd9L,SAAU,SACV+L,WAAY,gBAKL2a,GAAkB,SAAC,GAOlB,IANZvc,EAMW,EANXA,OACAmY,EAKW,EALXA,WACAmC,EAIW,EAJXA,iBACAT,EAGW,EAHXA,sBACAE,EAEW,EAFXA,yBACAqC,EACW,EADXA,gBAEM3oB,EAAU1C,KA6BhB,OACE,eAAC4K,GAAA,EAAD,CACE1J,KAAM+N,EACN9N,QAASimB,EACTjF,kBAAgB,qBAChBsJ,mBAAiB,2BACjB9W,SAAS,KALX,UAOE,cAAC9J,GAAA,EAAD,CAAa9C,GAAG,qBAAhB,gFACA,cAAC+C,GAAA,EAAD,UACE,cAAC8V,GAAA,EAAD,UACE,eAACC,GAAA,EAAD,CAAOpW,KAAK,QAAQqW,aAAW,yDAA/B,UACE,cAACC,GAAA,EAAD,UACE,eAACC,GAAA,EAAD,WACE,cAACC,GAAA,EAAD,CAAW3e,QAAQ,WAAnB,SACE,cAAC4e,GAAA,EAAD,CACE5B,QACEwJ,EAAsBne,SACpB4e,EAAiB5e,QACc,IAAjCme,EAAsBne,OAExB0D,SAjDmB,WAC/Bya,EAAsBne,OAAS4e,EAAiB5e,OAClDqe,EACEO,EACGxgB,KAAI,SAAC0Q,GAAD,OAAUA,EAAK6G,gBACnB6D,QACC,SAAC7D,GAAD,OAA2D,OAAjBA,MAIhD0I,EAAyB,SA0Cf,cAAC/H,GAAA,EAAD,yDACA,cAACA,GAAA,EAAD,uCACA,cAACA,GAAA,EAAD,gCAGJ,cAACE,GAAA,EAAD,UACGoI,EAAiBxgB,KAAI,SAAC0Q,EAAMnV,GAAP,OACpB,eAAC0c,GAAA,EAAD,WACE,cAACC,GAAA,EAAD,CAAW3e,QAAQ,WAAnB,SACE,cAAC4e,GAAA,EAAD,CACE5B,UACI7F,EAAK6G,eAC+C,IAAtDwI,EAAsBf,QAAQtO,EAAK6G,cAErCjS,SAAU,kBACRoL,EAAK6G,eAtDQjN,EAuDaoG,EAAK6G,mBAtDJ,IAA3CwI,EAAsBf,QAAQ1U,GAChC2V,EACEF,EAAsB3E,QACpB,SAACuH,GAAD,OAAyBA,IAAwBrY,MAIrD2V,EAAyB,GAAD,oBAAKF,GAAL,CAA4BzV,OARtB,IAACA,OA2DnB,cAAC4N,GAAA,EAAD,CAAWtgB,UAAW+B,EAAQiG,SAA9B,SACG8Q,EAAKjN,OAER,cAACyU,GAAA,EAAD,UAAYxH,EAAK3H,qBAAuB,OACxC,cAACmP,GAAA,EAAD,UAAYxH,EAAKkS,YAAc,SAjBjC,wBAAgCrnB,gBAwB1C,eAACiL,GAAA,EAAD,WACE,cAAClK,EAAA,EAAD,CAAQ9B,QAAS6jB,EAAjB,0BACA,cAAC/hB,EAAA,EAAD,CACE9B,QA9DoB,WAC1B8nB,IACAjE,KA6DM9hB,MAAM,UACN6I,WAAS,EACTzD,SAA2C,IAAjCoe,EAAsBne,OAJlC,iCEpHF3K,GAAYC,aAAW,SAACC,GAAD,OAC3BwB,YAAa,CACXiO,QAAS,CACPrN,QAAS,iBAITsd,GCfmC,SACvCxL,GAIA,OAAO,YASC,IARN5U,EAQK,EARLA,SACAqgB,EAOK,EAPLA,cACApd,EAMK,EANLA,YACAyoB,EAKK,EALLA,OAKK,EAEqBha,mBACxBpC,GACA,CACEnB,UAAW,CACTkS,gBACAqL,UAEF/Z,YAAa,aAPT9K,EAFH,EAEGA,KAWR,OAbK,EAESpC,UAWEoC,EACP,cAAC,EAAD,IAGLA,EAAKulB,gBAAkBvlB,EAAKulB,eAAe7L,IAE3C,cAAC3L,EAAD,CACE5R,QAAS6D,EAAKulB,eAAe7L,IAC7Btd,YAAaA,EAFf,SAIGjD,IAKA,MD3BOqsB,CAA0BtpB,IAI/BokB,IAAyB,EAEzBmF,GAAqB,WAAO,IAAD,EACoBC,uBAGxDxK,GAAY,CAAEpQ,YAAa,aAJS,mBAC/B6a,EAD+B,YACb/nB,EADa,EACbA,QAAegoB,EADF,EACJ5lB,KAI5B6lB,EAAgBnmB,iBAA6C,MAL7B,EAMZnD,mBAVC,IAIW,mBAM/BohB,EAN+B,KAMxBmI,EANwB,OAOUvpB,mBAVR,GAGF,mBAO/BshB,EAP+B,KAObD,EAPa,OAUVrhB,mBAAsByR,GAAYyW,aAVxB,mBAU/B3G,EAV+B,KAUvBiI,EAVuB,KAWhC1pB,EAAU1C,KAXsB,EAYoB4C,mBAExD,MAdoC,mBAY/BkmB,EAZ+B,KAYRE,EAZQ,OAeMpmB,mBAAwB,MAf9B,mBAe/BypB,EAf+B,KAeftD,EAfe,OAgBInmB,oBAAS,GAhBb,mBAgB/B0pB,EAhB+B,KAgBhBrD,EAhBgB,KAwBhCsD,EAAoBxmB,iBAAOimB,GAxBK,EAyBEppB,mBAA6B,CACnEohB,MA9ByB,GA+BzBE,iBA9BsC,IAGF,mBAyB/BsI,EAzB+B,KAyBjBC,EAzBiB,KAyEtC,OAVAxpB,qBAAU,WACRspB,EAAkBtmB,QAAQ,CACxB0H,UAAW,CACTqW,MAtEqB,GAuErBE,iBAtEkC,EAuElCC,OAAQ9P,GAAYyW,YACpBlG,cAAe+B,QAGlB,IACC2F,GAAiBD,GAAkBvD,EAEnC,cAAC,GAAD,CACEoC,OAAQmB,EACRxM,cAAeiJ,EACfrmB,YA7Dc,WAClBwmB,GAAiB,MAiEjB,gCACE,cAAC,GAAD,CAAQpC,KAAM,yCACd,sBAAKlmB,UAAW+B,EAAQiN,QAAxB,UACE,cAACkU,GAAD,CACEE,eAnEe,SAAC2I,GACtBV,EAAe,CAAEre,UAAW+e,IAC5BD,EAAgBC,IAkEV1I,MAAOA,EACPE,iBAAkBA,EAClBlc,IAAKkkB,EACLjI,oBAAqBA,EACrBE,OAAQA,IAEV,cAAC,GAAD,CACElgB,QAASA,EACT4kB,YAAaoD,EACbnD,sBAAuBA,EACvBC,kBAAmBA,EACnBC,yBAA0BA,EAC1BC,iBAAkBA,EAClBjF,MAAOA,EACPE,iBAAkBA,EAClBgF,kBA1EkB,SAAClF,GACzBmI,EAASnI,GACTC,EAAoB,GACpB+H,EAAe,CACbre,UAAU,2BAAM6e,GAAP,IAAqBxI,QAAOE,iBAAkB,EAAGC,cAuEtDgF,6BApE6B,SAACjF,GACpCD,EAAoBC,GACpB8H,EAAe,CACbre,UAAU,2BAAM6e,GAAP,IAAqBxI,QAAOE,mBAAkBC,cAkEnDA,OAAQA,EACRiI,UAAWA,EACXhD,iBA5DiB,WACvB,IAAMuD,EACJxI,IAAW9P,GAAYyW,YACnBzW,GAAYuY,YACZvY,GAAYyW,YAClBsB,EAAUO,GACV1I,EAAoB,GACpB+H,EAAe,CACbre,UAAU,2BACL6e,GADI,IAEPxI,QACAE,iBAAkB,EAClBC,OAAQwI,OAiDNjF,QAlEQ,WACdsE,EAAe,CACbre,UAAU,2BAAM6e,GAAP,IAAqBxI,QAAOE,mBAAkBC,uB,IE3D3ClkB,aAAW,SAACC,GAAD,OAC3BwB,YAAa,CACXvB,KAAM,CACJ2E,SAAU,UAEZC,gBAAiB,CACfC,MAAO,QACPC,aAAc,GACdC,WAAY,GACZC,SAAU,WACV/E,QAAS,OACTI,WAAY,UAEdqsB,eAAgB,CACd5nB,aAAc,GACdyR,cAAe,Q,6BCDf1W,GAAYC,aAAW,SAACC,GAAD,OAC3BwB,YAAa,CACX8J,cAAe,CACb8b,SAAU,UAUHwF,GAAoBhJ,sBAC/B,SAACxkB,EAAc0I,GACb,IAAMoF,EAAiB,SAACC,GACJ,UAAdA,EAAMC,KACRyf,KAGJ9pB,qBAAU,WAGR,OAFAJ,OAAOK,iBAAiB,UAAWkK,GAE5B,WACLvK,OAAOM,oBAAoB,UAAWiK,OAG1C,IAAM1K,EAAU1C,KAEduK,EAKEjL,EALFiL,aACAC,EAIElL,EAJFkL,gBACAmhB,EAGErsB,EAHFqsB,WACAqB,EAEE1tB,EAFF0tB,kBACAC,EACE3tB,EADF2tB,mBAnBmB,EAqBWrqB,mBAAS,IArBpB,mBAqBdoJ,EArBc,KAqBJkhB,EArBI,OAsBmBtqB,oBAAS,GAtB5B,mBAsBdqa,EAtBc,KAsBAC,EAtBA,KAwBrByI,8BAAoB3d,GAAK,iBAAO,CAC9BlH,UAAW,WACToc,GAAgB,IAElBiQ,UAAW,WACTjQ,GAAgB,QAGpB,IAIM6P,EAAmB,WACvBC,EAAkBhhB,IAEdohB,EAAoB,WACxB5iB,GAAgB,IAElB,OACE,eAACI,GAAA,EAAD,CAAQ1J,KAAMqJ,EAAcpJ,QAASisB,EAArC,UACE,cAACviB,GAAA,EAAD,yDACA,eAACC,GAAA,EAAD,WACE,eAACwE,GAAA,EAAD,8DAA4Bqc,KAC5B,eAAC0B,GAAA,EAAD,CAAMC,WAAS,EAAC5Y,QAAS,EAAGlU,WAAW,SAAvC,UACE,cAAC6sB,GAAA,EAAD,CAAME,MAAI,EAAV,SACE,cAAC,KAAD,MAEF,cAACF,GAAA,EAAD,CAAME,MAAI,EAAV,SACE,cAACrf,EAAA,EAAD,CACEC,WAAS,EACTxN,UAAW+B,EAAQ8I,cACnBhF,MAAM,eACN9C,KAAK,WACL0K,MAAOpC,EACPqC,SA1BiB,SAACC,GAC5B2e,IACAC,EAAY5e,EAAEC,OAAOH,QAyBXI,WACEyO,IAAiBjR,EAAW,kDAAYyC,EAE1C7B,SAAOqQ,GAAiBjR,SAAkByC,YAKlD,eAACc,GAAA,EAAD,WACE,cAAClK,EAAA,EAAD,CAAQ9B,QAAS6pB,EAAmB9nB,MAAM,UAA1C,0BAGA,cAACD,EAAA,EAAD,CAAQ9B,QAASwpB,EAAkBznB,MAAM,UAAzC,mC,qBClGJtF,GAAYC,aAAW,SAACC,GAAD,OAC3BwB,YAAa,CACXvB,KAAM,CACJG,OAAQ,OACRD,MAAO,OACPmtB,WAAY,WAEd7hB,cAAe,CACbvL,QAAS,OACTqtB,UAAW,GACX7Y,UAAW,IACXtU,OAAQ,qBACRC,eAAgB,UAElBmL,KAAM,CACJkJ,UAAW,GACXtU,OAAQ,OACRqB,UAAW,QAEboD,gBAAiB,CACf6P,UAAW,IACXtS,QAAS,GACTlC,QAAS,OACTI,WAAY,SACZktB,cAAe,SACfvoB,SAAU,UAEZwoB,2BAA4B,CAC1BhsB,UAAW,IAEbisB,aAAc,CACZhY,SAAU,WACV2E,MAAO,GACPC,OAAQ,GACR9T,gBAAiB,QAEnBmnB,QAAS,CACP5iB,OAAQ,eAEVpG,OAAQ,CACNvE,OAAQ,SAaDwtB,GAAU,SAAC,GAAwC,EAAtC5hB,UAAuC,IAA5BE,EAA2B,EAA3BA,OAAQ2hB,EAAmB,EAAnBA,MACrCrgB,EAAUE,cACVlL,EAAU1C,KACVguB,EAAuBjoB,iBAC3B,MAJ4D,EAmBtBnD,oBAAS,GAnBa,mBAmBvD2H,EAnBuD,KAmBzCC,EAnByC,OA2BZ5H,oBAAS,GA3BG,mBA2BvDuK,EA3BuD,KA2BpCN,EA3BoC,KA4BxDmgB,EAAiB,yCAAG,WAAOhhB,GAAP,kBAAAwJ,EAAA,0DACpBpJ,EAAOL,SADa,oBAEjBC,EAFiB,uBAGpB,UAAAgiB,EAAqB/nB,eAArB,SAA8BnF,YAHV,mDAOMitB,EAAM,CAC9BpgB,UAAW,CACTtC,MAAO,CACLU,SAAUK,EAAOL,SACjBC,eAXc,QAOdiiB,EAPc,QAeJ5nB,MAAQ4nB,EAAY5nB,KAAKkG,YAAYR,WACnDoJ,QAAQC,IAAI,0BACZ1H,EAAQqE,KAAK,YAjBK,kDAoBpBlF,GAAqB,GApBD,0DAAH,sDA8BvB,OACE,sBAAKlM,UAAW+B,EAAQvC,KAAxB,UACE,qBAAKQ,UAAW+B,EAAQmC,SAExB,qBAAKlE,UAAW+B,EAAQiJ,cAAxB,SACE,qBAAKqC,IAAKtC,GAAMuC,IAAI,2BAAOtN,UAAW+B,EAAQgJ,SAEhD,sBAAK/K,UAAW+B,EAAQqC,gBAAxB,UACE,qBAAKpE,UAAW+B,EAAQmrB,QAAxB,0EACA,mFACA,qBAAKltB,UAAW+B,EAAQirB,2BAAxB,SACE,cAACtoB,EAAA,EAAD,CACEE,UAAW,cAAC,KAAD,IACXD,MAAM,UACNjE,QAAQ,YACRkC,QAlBa,WACrBmK,EAAQqE,KAAK,iBAaP,2CAkBH3F,EAAOI,MACN,cAACsgB,GAAD,CACEviB,aAAcA,EACdC,gBAAiBA,EACjBmhB,WAAYvf,EAAOI,KACnBwgB,kBAAmBA,EACnBC,mBAzCmB,WACzBpgB,GAAqB,IAyCf7E,IAAKgmB,IAGT,cAAC,EAAD,CACEltB,UAAWqM,EACXpM,aAAc8L,EACd7L,aAAc,6C,qBCnKhBhB,GAAYC,aAAW,SAACC,GAAD,OAC3BwB,YAAa,CACXvB,KAAM,CACJqtB,WAAY,UACZltB,OAAQ,OACRD,MAAO,QAET6tB,aAAc,CACZ5tB,OAAQ,QAEVwD,MAAO,CACLqB,SAAU,SACVgG,UAAW,UAEbgjB,oBAAqB,CACnB/tB,QAAS,OACTG,eAAgB,SAChB2E,WAAY,GACZsoB,WAAY,WAEdpiB,WAAY,CACV/K,MAAO,MACPinB,SAAU,kBACV9W,WAAY,UAEd/E,gBAAiB,CACfrL,QAAS,OACTG,eAAgB,SAChB2E,WAAY,GACZsoB,WAAY,UACZ9W,cAAe,IAEjB0X,eAAgB,CACdX,UAAW,GACX7Y,UAAW,IACXtU,OAAQ,qBACRF,QAAS,OACTstB,cAAe,SACfntB,eAAgB,WAChBitB,WAAY,gBAILa,GAAgB,WAC3B,IAAM3rB,EAAU1C,KAChB,OACE,sBAAKW,UAAW+B,EAAQvC,KAAxB,UACE,cAAC,GAAD,IACA,qBAAKQ,UAAW+B,EAAQ0rB,eAAxB,SACE,qBAAKztB,UAAW+B,EAAQoB,MAAxB,kCAEF,qBAAKnD,UAAW+B,EAAQyrB,oBAAxB,SACE,qBAAKxtB,UAAW+B,EAAQ0I,WAAxB,g8BAIF,qBAAKzK,UAAW+B,EAAQ+I,gBAAxB,SACE,cAAC,IAAD,CAAM7L,GAAG,cAAT,SACE,cAACyF,EAAA,EAAD,CACEhE,QAAQ,YACRiE,MAAM,UACNgpB,QAAS,cAAC,KAAD,IAHX,wC,kbC9DH,IAAMC,GAAiBlwB,cAAH,MCqCrB2B,GAAYC,aAAW,SAACC,GAAD,OAC3BwB,YAAa,CACXvB,KAAM,CACJqtB,WAAY,UACZltB,OAAQ,OACRD,MAAO,QAET6tB,aAAc,CACZ5tB,OAAQ,QAEVwD,MAAO,CACLqB,SAAU,SACVgG,UAAW,UAEbM,gBAAiB,CACfrL,QAAS,OACTG,eAAgB,SAChB2E,WAAY,GACZsoB,WAAY,UACZ9W,cAAe,IAEjB0X,eAAgB,CACdX,UAAW,GACX7Y,UAAW,IACXtU,OAAQ,qBACRF,QAAS,OACTstB,cAAe,SACfntB,eAAgB,WAChBitB,WAAY,WAEdliB,eAAgB,CACdlL,QAAS,OACTG,eAAgB,SAChB2E,WAAY,IAEdspB,6BAA8B,CAC5BpuB,QAAS,OACTstB,cAAe,SACfltB,WAAY,SACZ0E,WAAY,GACZsoB,WAAY,WAEdniB,MAAO,CACLhL,MAAO,IACP6E,WAAY,EACZwR,cAAe,GAEjB+X,eAAgB,CACdruB,QAAS,OACTG,eAAgB,SAChBitB,WAAY,WAEdkB,iBAAkB,CAChBtuB,QAAS,OACTG,eAAgB,gBAChB2E,WAAY,GACZsoB,WAAY,UACZ9W,cAAe,GACfrW,MAAO,UAcN,IAAMsuB,GAAe,SAAC,GAAoC,IAAlCC,EAAiC,EAAjCA,WACvBC,GADwD,EAArB9d,QAHlC,IAAIkK,gBAAgB9D,cAAc+D,SAKnClV,EAAUD,kBAAO,WACrB,IAAMgG,EAAW8iB,EAAY1T,IAAI,YAC7BpP,IACFqY,EAAYrY,GACZ+iB,GAAsB/iB,OAG1B9I,qBAAU,WACR+C,EAAQC,YACP,IACH,IAAMmH,EAAiB,SAACC,GACJ,UAAdA,EAAMC,MACJyhB,EACFC,KAEAF,QAAsBrgB,KAI5BxL,qBAAU,WAGR,OAFAJ,OAAOK,iBAAiB,UAAWkK,GAE5B,WACLvK,OAAOM,oBAAoB,UAAWiK,OAzBoB,MA6BvCf,sBACrBkiB,GACA,CACEjiB,YAAa,SAACjG,GACRA,GAAQA,EAAK4oB,cACfL,EAAWvoB,EAAK4oB,iBALjBA,EA7BuD,oBAuCxDvsB,EAAU1C,KAvC8C,EAwCR4C,oBAAS,GAxCD,mBAwCvDssB,EAxCuD,KAwClCC,EAxCkC,OAyChBvsB,oBAAS,GAzCO,mBAyCvDwsB,EAzCuD,KAyCtCC,EAzCsC,OA0CJtD,uBAGxDxK,GAAY,CACZpQ,YAAa,WACb7E,YAAa,SAACjG,GACZ,GAAIA,EAAK2jB,UAAUzgB,MAAQ,EAAG,CAC5B,IAAM+lB,EAAWjpB,EAAK2jB,UAAUC,MAAM,GACtCqF,EAAS9iB,MAAQ6X,EAAQiL,EAAS9iB,MAClC8iB,EAASjgB,QAAUiV,EAAUgL,EAASjgB,QACtCigB,EAASlgB,KAAOmgB,EAAOD,EAASlgB,KAChCkgB,EAASE,WAAaC,GAAaH,EAASE,WAC5CF,EAASI,WAAaC,GAAaL,EAASI,WAC5CJ,EAASM,gBAAkBC,GAAkBP,EAASM,gBACtDE,IAAmB,QAEnBzL,EAAQ,IACRC,EAAU,IACViL,EAAO,IACPE,GAAa,IACbE,GAAa,IACbE,GAAkB,OA/DsC,mBA0CvD7D,EA1CuD,YA0CrC/nB,EA1CqC,EA0CrCA,QAAegoB,EA1CsB,EA0C5B5lB,KA1C4B,EAmEAzD,oBAAS,GAnET,mBAmEvDmsB,EAnEuD,KAmE9BgB,EAnE8B,OAoE9BntB,mBAAS,IApEqB,mBAoEvDmJ,EApEuD,KAoE7CqY,EApE6C,OAqEtCxhB,mBAAS,IArE6B,mBAqEvD4J,EArEuD,KAqEjD6X,EArEiD,OAsElCzhB,mBAAS,IAtEyB,mBAsEvDyM,EAtEuD,KAsE/CiV,EAtE+C,OAuExC1hB,mBAAS,IAvE+B,mBAuEvDwM,EAvEuD,KAuElDmgB,EAvEkD,OAwE5B3sB,mBAAS,IAxEmB,mBAwEvD4sB,GAxEuD,KAwE5CC,GAxE4C,QAyE5B7sB,mBAAS,IAzEmB,qBAyEvD8sB,GAzEuD,MAyE5CC,GAzE4C,SA0ElB/sB,mBAAS,IA1ES,qBA0EvDgtB,GA1EuD,MA0EvCC,GA1EuC,SAyFhBjtB,oBAAS,GAzFO,qBAyFvDotB,GAzFuD,MAyFtCF,GAzFsC,MA0FxDG,GAAyB,WAC7BH,IAAmB,IA3FyC,GAgGNltB,oBAAS,GAhGH,qBAgGvDstB,GAhGuD,MAgGjCC,GAhGiC,MAiGxDC,GAA8B,WAClCD,IAAwB,IAqBpBrB,GAAqB,yCAAG,WAC5BuB,GAD4B,UAAA7a,EAAA,yDAGvBuZ,EAHuB,oBAItBhjB,IAAYskB,EAJU,gCAKlBrE,EAAe,CACnBre,UAAW,CACT5B,SAAUskB,GAENtkB,EACJiY,MAAO,EACPE,iBAAkB,KAXE,OAcxB6L,GAA2B,GAdH,sBAiBxBZ,GAAuB,GAjBC,2CAAH,sDAwBrBzhB,GAAUE,cACVohB,GAAsB,yCAAG,uBAAAxZ,EAAA,0DACzBhJ,EADyB,gCAErByiB,EAAa,CACjBthB,UAAW,CACTtC,MAAO,CACLU,WACAyjB,aACAhjB,OACA4C,IAAa,KAARA,EAAajG,OAAOiG,QAAOX,EAChCY,SACAqgB,aACAE,sBAXqB,OAe3BliB,GAAQqE,KAAK,cAfc,sBAiB3Bsd,GAAmB,GACnBc,IAAwB,GAlBG,2CAAH,qDAqB5B,OACE,sBAAKxvB,UAAW+B,EAAQvC,KAAxB,UACE,cAAC,GAAD,IACC4uB,EACC9qB,EACE,cAAC,EAAD,IAEA,qCACGgoB,GAAgBA,EAAajC,UAAUzgB,MAAQ,EAC9C,qBAAK5I,UAAW+B,EAAQ0rB,eAAxB,SACE,qBAAKztB,UAAW+B,EAAQoB,MAAxB,sEAGF,qBAAKnD,UAAW+B,EAAQ0rB,eAAxB,SACE,qBAAKztB,UAAW+B,EAAQoB,MAAxB,sEAGJ,sBAAKnD,UAAW+B,EAAQ8rB,6BAAxB,UACE,8BACE,eAACnB,GAAA,EAAD,CAAMC,WAAS,EAAC5Y,QAAS,EAAGlU,WAAW,WAAvC,UACE,cAAC6sB,GAAA,EAAD,CAAME,MAAI,EAAV,SACE,cAAC,KAAD,MAEF,cAACF,GAAA,EAAD,CAAME,MAAI,EAAV,SACE,cAACrf,EAAA,EAAD,CACE1H,MAAM,eACN7F,UAAW+B,EAAQ2I,MACnBilB,UAAQ,EACRliB,MAAO5B,EACP6B,SAvHC,SAACC,GACpB+V,EAAQ/V,EAAEC,OAAOH,QAuHCxB,SAAOwiB,GAAoB5iB,YAKnC,8BACE,eAAC6gB,GAAA,EAAD,CAAMC,WAAS,EAAC5Y,QAAS,EAAGlU,WAAW,WAAvC,UACE,cAAC6sB,GAAA,EAAD,CAAME,MAAI,EAAV,SACE,cAAC,KAAD,MAEF,cAACF,GAAA,EAAD,CAAME,MAAI,EAAV,SACE,eAACtO,GAAA,EAAD,CAAaxU,KAAK,QAAQ9J,UAAW+B,EAAQ2I,MAA7C,UACE,cAACya,GAAA,EAAD,2BACA,eAACC,GAAA,EAAD,CACEzgB,MAAM,UACNkB,MAAM,eACN6H,SArIC,SACrBC,GAKAgW,EAAUhW,EAAEC,OAAOH,QAgICA,MAAOiB,EAJT,UAME,cAAC2W,GAAA,EAAD,CAAU5X,MAAM,SAAhB,oBACA,cAAC4X,GAAA,EAAD,CAAU5X,MAAM,SAAhB,iCAMV,8BACE,eAACif,GAAA,EAAD,CAAMC,WAAS,EAAC5Y,QAAS,EAAGlU,WAAW,WAAvC,UACE,cAAC6sB,GAAA,EAAD,CAAME,MAAI,EAAV,SACE,cAAC,KAAD,MAEF,cAACF,GAAA,EAAD,CAAME,MAAI,EAAV,SACE,cAACrf,EAAA,EAAD,CACEvN,UAAW+B,EAAQ2I,MACnB/F,MAAM,UACNkB,MAAM,eACNiE,KAAK,QACL/G,KAAK,SACL0K,MAAOgB,EACPf,SApJA,SAACC,GACnBihB,EAAOjhB,EAAEC,OAAOH,iBAwJN,8BACE,eAACif,GAAA,EAAD,CAAMC,WAAS,EAAC5Y,QAAS,EAAGlU,WAAW,WAAvC,UACE,cAAC6sB,GAAA,EAAD,CAAME,MAAI,EAAV,SACE,cAAC,KAAD,MAEF,cAACF,GAAA,EAAD,CAAME,MAAI,EAAV,SACE,eAACtO,GAAA,EAAD,CAAaxU,KAAK,QAAQ9J,UAAW+B,EAAQ2I,MAA7C,UACE,cAACya,GAAA,EAAD,2BACA,eAACC,GAAA,EAAD,CACEzgB,MAAM,UACN8I,MAAOwhB,GACPvhB,SA9IS,SAC7BC,GAKAuhB,GAAkBvhB,EAAEC,OAAOH,QAqIT,UAKE,cAAC4X,GAAA,EAAD,CAAU5X,MAAM,eAAhB,0BACA,cAAC4X,GAAA,EAAD,CAAU5X,MAAM,eAAhB,uCAMV,8BACE,eAACif,GAAA,EAAD,CAAMC,WAAS,EAAC5Y,QAAS,EAAGlU,WAAW,WAAvC,UACE,cAAC6sB,GAAA,EAAD,CAAME,MAAI,EAAV,SACE,cAAC,KAAD,MAEF,cAACF,GAAA,EAAD,CAAME,MAAI,EAAV,SACE,eAACtO,GAAA,EAAD,CAAaxU,KAAK,QAAQ9J,UAAW+B,EAAQ2I,MAA7C,UACE,cAACya,GAAA,EAAD,2BACA,eAACC,GAAA,EAAD,CACEzgB,MAAM,UACN8I,MAAOohB,GACPnhB,SA1KI,SACxBC,GAKAmhB,GAAanhB,EAAEC,OAAOH,QAiKJ,UAKE,cAAC4X,GAAA,EAAD,CAAU5X,MAAM,2BAAhB,sCACA,cAAC4X,GAAA,EAAD,CAAU5X,MAAM,2BAAhB,sCACA,cAAC4X,GAAA,EAAD,CAAU5X,MAAM,eAAhB,0BACA,cAAC4X,GAAA,EAAD,CAAU5X,MAAM,eAAhB,0BACA,cAAC4X,GAAA,EAAD,CAAU5X,MAAM,eAAhB,uCAMV,8BACE,eAACif,GAAA,EAAD,CAAMC,WAAS,EAAC5Y,QAAS,EAAGlU,WAAW,WAAvC,UACE,cAAC6sB,GAAA,EAAD,CAAME,MAAI,EAAV,SACE,cAAC,KAAD,MAEF,cAACF,GAAA,EAAD,CAAME,MAAI,EAAV,SACE,cAACrf,EAAA,EAAD,CACE5I,MAAM,UACNkB,MAAM,eACNiE,KAAK,QACL9J,UAAW+B,EAAQ2I,MACnB+C,MAAOshB,GACPrhB,SAlLA,SAACC,GACnBqhB,GAAarhB,EAAEC,OAAOH,uBA0LlB,qCACE,qBAAKzN,UAAW+B,EAAQ0rB,eAAxB,SACE,qBAAKztB,UAAW+B,EAAQoB,MAAxB,gEAEF,qBAAKnD,UAAW+B,EAAQ4I,eAAxB,SACE,cAAC4C,EAAA,EAAD,CACE1H,MAAM,qBACN+pB,WAAY,CACVC,eACE,cAACC,GAAA,EAAD,CAAgB7a,SAAS,QAAzB,SACE,cAAC,KAAD,OAINxH,MAAOrC,EACPsC,SAjOiB,SAACC,GAC5B8V,EAAY9V,EAAEC,OAAOH,QAiOXD,WAAS,EACTvB,SAAOsiB,GAAwBnjB,SAAkB0C,EACjDD,WACE0gB,IAAwBnjB,EACpB,wDACA0C,SAMbsgB,EACC9qB,EAAU,KACR,qBAAKtD,UAAW+B,EAAQ+rB,eAAxB,SACE,sBAAK9tB,UAAW+B,EAAQgsB,iBAAxB,UACE,cAACrpB,EAAA,EAAD,CAAQ9B,QAlMC,WACnBwsB,GAA2B,IAiMjB,0BACA,cAAC1qB,EAAA,EAAD,CACEhE,QAAQ,YACRiE,MAAM,UACN/B,QAASyrB,GAHX,+BAWN,qBAAKruB,UAAW+B,EAAQ+I,gBAAxB,SACE,cAACpG,EAAA,EAAD,CACEhE,QAAQ,YACRiE,MAAM,UACNgpB,QAAS,cAAC,KAAD,IACT/qB,QAAS,kBAAMurB,QAAsBrgB,IAJvC,kCAUJ,cAACxN,EAAA,EAAD,CACEC,KAAM8uB,GACNU,iBAAkB,IAClBvvB,QAAS8uB,GACTU,aAAc,CAAEC,SAAU,SAAUC,WAAY,QAJlD,SAME,cAACC,EAAA,EAAD,CACE3vB,QAAS8uB,GACT3uB,SAAS,UACTD,QAAQ,SAHV,4EAQF,cAACJ,EAAA,EAAD,CACEC,KAAMgvB,GACNQ,iBAAkB,IAClBvvB,QAASivB,GACTO,aAAc,CAAEC,SAAU,SAAUC,WAAY,QAJlD,SAME,cAACC,EAAA,EAAD,CACE3vB,QAASivB,GACT9uB,SAAS,QACTD,QAAQ,SAHV,8D,sOCteD,IAAM0vB,GAAmC1yB,cAAH,M,SCQhC2yB,GAAmB,SAAC1xB,GAAkB,IACzC2xB,EAAgD3xB,EAAhD2xB,YAAaC,EAAmC5xB,EAAnC4xB,eAAgBC,EAAmB7xB,EAAnB6xB,eACrC,OACE,cAAClwB,EAAA,EAAD,CACEC,KAAM+vB,EACN9vB,QAAS,kBAAM+vB,GAAe,IAC9BP,aAAc,CAAEC,SAAU,SAAUC,WAAY,QAHlD,SAKE,cAAC,IAAD,CACEzvB,UAAW,EACXC,QAAQ,SACRC,SAAS,UACTH,QAAS,kBAAM+vB,GAAe,IAJhC,SAMGC,OCmBHnxB,GAAYC,aAAW,SAACC,GAAD,OAC3BwB,YAAa,CACX2J,MAAO,CACLjL,QAAS,QACT6K,OAAQ,EACRhG,aAAc,GAEhBqG,eAAgB,CACdlL,QAAS,OACTG,eAAgB,eAKT6wB,GAAkB,SAAC9xB,GAC9B,IAAMoD,EAAU1C,KAEdiP,EAME3P,EANF2P,OACAoiB,EAKE/xB,EALF+xB,YACAC,EAIEhyB,EAJFgyB,oBACAC,EAGEjyB,EAHFiyB,YACAC,EAEElyB,EAFFkyB,UACAC,EACEnyB,EADFmyB,gBAR6C,EAUL7uB,mBAAS,IAVJ,mBAUxC2I,EAVwC,KAUzBmmB,EAVyB,OAWb9uB,mBAAS,IAXI,mBAWxC+uB,EAXwC,KAW7BC,EAX6B,OAYLhvB,mBAAS,IAZJ,mBAYxC4I,EAZwC,KAYzBqmB,EAZyB,OAaOjvB,mBAAS,IAbhB,mBAaxCkvB,EAbwC,KAanBC,EAbmB,OAcInvB,oBAAS,GAdb,mBAcxCovB,EAdwC,KAcrBC,EAdqB,OAePrvB,oBAAS,GAfF,mBAexCqa,EAfwC,KAe1BC,EAf0B,OAgBPta,mBAAS,IAhBF,mBAgBxC5B,EAhBwC,KAgB1BuY,EAhB0B,OAiBH3W,oBAAS,GAjBN,mBAiBxCsvB,EAjBwC,KAiBxBC,EAjBwB,KAmBzCC,EAA+BhV,sBACnCiV,aAASf,EAAqB,KAC9B,CAACA,IAEHruB,qBAAU,WACRyuB,EAAiB,IACjBE,EAAa,IACbC,EAAiB,IACjBE,EAAuB,IACvBE,GAAsB,GACtBE,GAAkB,KACjB,CAACljB,IACJhM,qBAAU,WACRsuB,GACEU,GAAuBV,EAAYe,4BAA4BhpB,UAChE,CAACioB,IACJ,IAsBMgB,EAAoB,yCAAG,+BAAA/c,EAAA,yDACvBhK,IAAkBsmB,EADK,uBAEzBvY,EAAgB,sEAChB2D,GAAgB,GAHS,0CAMNsU,EAAU,CAC7B7jB,UAAW,CACTtC,MAAO,CACLU,SAAUR,EACViB,KAAMmlB,EACN3lB,SAAUR,MAXW,OAMrBlC,EANqB,QAe3B,UAAIA,EAAOjD,YAAX,aAAI,EAAamrB,UAAUloB,UACzB+nB,IACAI,IACAU,GAAkB,IAlBO,2CAAH,qDAqB1B,OACE,qCACE,eAACvnB,GAAA,EAAD,CACE1J,KAAM+N,EACN9N,QAASkwB,EACTlP,kBAAgB,oBAHlB,UAKE,cAACtX,GAAA,EAAD,CAAa9C,GAAG,oBAAhB,sCACA,eAAC+C,GAAA,EAAD,WACE,cAACwE,GAAA,EAAD,+GAGA,cAACpB,EAAA,EAAD,CACEC,WAAS,EACT3H,MAAM,qBACN7F,UAAW+B,EAAQ2I,MACnB2c,WAAS,EACTsI,UAAQ,EACRliB,MAAO7C,EACP8C,SA9DmB,SAACC,GAC5BojB,EAAiBpjB,EAAEC,OAAOH,OAC1B6jB,GAAsB,GACtBG,EAA6B,CAC3BzkB,UAAW,CACT5B,SAAUuC,EAAEC,OAAOH,UA0DfxB,MAAOolB,QAAqBvjB,EAC5BD,WAAYwjB,EAAoB,oEAAevjB,IAEjD,cAACP,EAAA,EAAD,CACE1H,MAAM,eACN7F,UAAW+B,EAAQ2I,MACnB2c,WAAS,EACTsI,UAAQ,EACRliB,MAAOujB,EACPtjB,SA/De,SAACC,GACxBsjB,EAAatjB,EAAEC,OAAOH,UAgEhB,cAACF,EAAA,EAAD,CACE1H,MAAM,eACN7F,UAAW+B,EAAQ2I,MACnB2c,WAAS,EACTsI,UAAQ,EACR5sB,KAAK,WACL0K,MAAO5C,EACP6C,SArEmB,SAACC,GAC5BujB,EAAiBvjB,EAAEC,OAAOH,UAsEpB,cAACF,EAAA,EAAD,CACE1H,MAAM,2BACN7F,UAAW+B,EAAQ2I,MACnB2c,WAAS,EACTsI,UAAQ,EACR5sB,KAAK,WACL0K,MAAO0jB,EACPzjB,SA1EwB,SAChCC,GAEAyjB,EAAuBzjB,EAAEC,OAAOH,aA0E5B,eAACmB,GAAA,EAAD,WACE,cAAClK,EAAA,EAAD,CAAQ9B,QAAS8tB,EAAjB,0BACA,cAAChsB,EAAA,EAAD,CACE9B,QAASgvB,EACTjtB,MAAM,UACNoF,YACEsnB,GACCL,GACApmB,GACAC,GACAsmB,SAEGrjB,EAVR,6BAgBF,cAAC,EAAD,CACE3N,UAAWmc,EACXlc,aAAcmc,EACdlc,aAAcA,OAGlB,cAAC,GAAD,CACEiwB,YAAaiB,EACbhB,eAAgBiB,EAChBhB,eAAe,6C,+BC7KjBnxB,GAAYC,aAAW,SAACC,GAAD,OAC3BwB,YAAa,CACX8wB,KAAM,CACJvnB,OAAQ,aAEVlG,gBAAiB,CACfkG,OAAQ,GACR7K,QAAS,OACTG,eAAgB,gBAChBC,WAAY,UAEdiyB,oBAAqB,CACnBryB,QAAS,OACTI,WAAY,UAEdkyB,gBAAiB,CACfvwB,YAAa,GAEfwwB,OAAQ,CACNjsB,gBAAiBksB,KAAK,KACtBttB,MAAOstB,KAAK,WAILC,GAAe,WAC1B,IAAMnwB,EAAU1C,KADgB,EAEGkR,mBACjCnC,GACA,CACEpB,UAAW,CACTqW,MAhCc,EAiCdE,iBAAkB,GAEpB/S,YAAa,iBAPTlN,EAFwB,EAExBA,QAASoC,EAFe,EAEfA,KAAMqhB,EAFS,EAETA,QAFS,EAYmBqE,uBAGjDgF,GAAkC,CAClC5f,YAAa,aAhBiB,mBAYzB2hB,EAZyB,KAYAC,EAZA,KAYN1sB,KAZM,EAkBZgG,sBAA2C1N,GAAxD6yB,EAlByB,sBAmBgB5uB,mBAAS,GAnBzB,mBAmBzBshB,EAnByB,KAmBPD,EAnBO,OAoB0BrhB,oBAAS,GApBnC,mBAoBzBowB,EApByB,KAoBFC,EApBE,KAqChC,OAAIhvB,IAAYoC,EACP,cAAC,EAAD,IAGP,qCACE,cAAC,GAAD,CAAQwgB,KAAM,yCACd,sBAAKlmB,UAAW+B,EAAQqC,gBAAxB,UACE,cAACM,EAAA,EAAD,CAAQhE,QAAQ,YAAYiE,MAAM,UAAU/B,QApB/B,WACjB0vB,GAAyB,IAmBrB,sCAGA,sBAAKtyB,UAAW+B,EAAQ+vB,oBAAxB,UACE,uBAAM9xB,UAAW+B,EAAQgwB,gBAAzB,yBACKrsB,EAAK6sB,WAAW3pB,MADrB,wBAGA,cAAC4pB,GAAA,EAAD,CACEhT,MAAOtY,KAAK4iB,KAAKpkB,EAAK6sB,WAAW3pB,MA9EvB,GA+EVlI,QAAQ,WACRiE,MAAM,UACNjD,KAAM6hB,EAAmB,EACzB7V,SA7BqB,SAC7Bic,EACA8I,GAEAnP,EAAoBmP,EAAY,GAChC1L,EAAQ,CAAE1D,MA1DQ,EA0DcE,iBAAkBkP,EAAY,aA4B5D,cAAC5f,GAAA,EAAD,CAAM0L,UAAW3a,IAAO5D,UAAW+B,EAAQ8vB,KAA3C,SACGnsB,EAAK6sB,WAAWG,OAAOtqB,KAAI,SAACuqB,EAAOhvB,GAAR,OAC1B,eAAC,IAAMivB,SAAP,WACE,eAAC5f,GAAA,EAAD,CAAUnT,WAAW,aAArB,UACE,cAACqT,GAAA,EAAD,UACE,cAAC2f,GAAA,EAAD,CAAQ7yB,UAAW+B,EAAQiwB,OAA3B,SACE,cAAC,KAAD,QAGJ,cAAC5e,GAAA,EAAD,CACEC,QAAO,kCAASsf,EAAMvnB,UACtBkI,UAAS,4BAAQqf,EAAM9mB,UARY8mB,EAAMvnB,UAW5CzH,IAAU+B,EAAK6sB,WAAWG,OAAO1oB,OAAS,GAAK,cAAC5G,EAAA,EAAD,MAZ7BuvB,EAAMvnB,eAgB/B,cAAC,GAAD,CACEkD,OAAQ+jB,EACR3B,YA3Dc,WAClB4B,GAAyB,IA2DrB3B,oBAAqBwB,EACrBvB,YAAawB,EACbvB,UAAWA,EACXC,gBAlDkB,WACtB/J,EAAQ,CAAE1D,MA7DQ,EA6DcE,4B,8BC5C9BuP,I,OAAS,IAAIC,eAAa,CAC9BC,IAAK,OACLC,MAAO,IAAIC,gBACXC,QAAS,CAAE,eAAgB7e,eAAe8e,QAAQ,UAAY,OAG1DC,GAAwB,CAC5BjoB,SAAU,KACVkoB,MAAO,KACPxnB,YAAY,EACZynB,SAAU,MAGNC,GAAwB,CAC5B3nB,KAAM,KACNT,SAAU,KACVU,YAAY,GAGRzM,GAAYC,aAAW,SAACC,GAAD,OAC3BwB,YAAa,CACXvB,KAAM,CACJC,QAAS,OACTE,OAAQ,QAEV8zB,iBAAkB,CAChB7f,SAAU,EACVjU,OAAQ,aAKDwZ,GAAgB,UACvBua,GAAM,WACV,IAAM3xB,EAAU1C,KADA,EAIY4C,mBAAiBuxB,IAJ7B,mBAIT/nB,EAJS,KAIDF,EAJC,OAKctJ,mBAAkBoxB,IALhC,mBAKTjjB,EALS,KAKA6d,EALA,OAoBuCviB,sBAGrD5N,EAAe,CACf6N,YAAa,SAACjG,GACZ,GAAIA,GAAQA,EAAKkG,YAAa,CAAC,IAAD,EACWlG,EAAKkG,YAApCC,EADoB,EACpBA,KAAMT,EADc,EACdA,SAAUU,EADI,EACJA,WACxBP,EAAU,CACRM,OACAT,WACAU,mBA9BQ,mBAoBTF,EApBS,KAoBe+nB,EApBf,KAoBMrwB,QAehBswB,EAAiBxuB,iBAAOwG,GAnCd,EAqCyCF,sBAGvDkiB,GAAgB,CAChBjiB,YAAa,SAACjG,GACRA,GAAQA,EAAK4oB,cACfL,EAAWvoB,EAAK4oB,iBA3CN,mBAqCTA,EArCS,KAqCgBuF,EArChB,KAqCOvwB,QAWjBwwB,EAAkB1uB,iBAAOkpB,GAM/B,GALAhsB,qBAAU,WACRsxB,EAAetuB,UAEfwuB,EAAgBxuB,YACf,IAEDquB,IACCloB,EAAOK,YACR+nB,IACCzjB,EAAQtE,WAET,OAAO,cAAC,EAAD,IAET,IAAMlN,IAAiB6M,EAAOL,SAC9B,OACE,eAAC,IAAD,WAEE,eAAC,IAAD,WACE,cAAC,IAAD,CAAO2J,OAAK,EAACD,KAAK,MAClB,cAAC,IAAD,CAAOC,OAAK,EAACD,KAAK,iBAClB,cAAC,IAAD,CAAOC,OAAK,EAACD,KAAK,gBAClB,cAAC,IAAD,CAAOA,KAAK,eACZ,eAAC,IAAD,CAAOA,KAAK,UAAZ,UACE,cAAC,GAAD,CAAWV,OAAQ3I,EAAQD,UAAWD,EAAWxI,KAAK,WACtD,cAAC,IAAD,UACE,cAAC,IAAD,CAAOgS,OAAK,EAACD,KAAK,cAKxB,eAAC,IAAD,WACE,cAAC,IAAD,CAAOC,OAAK,EAACD,KAAK,SAAlB,SACE,cAAC,GAAD,CACElW,aAAcA,EACd4M,UAAWD,EACXA,UAAWA,EACXE,OAAQA,MAGZ,cAAC,IAAD,CACEsJ,OAAK,EACLD,KAAK,UACL/V,OAAQ,gBAAGC,EAAH,EAAGA,SAAH,OACN,cAAC,IAAD,CAAUC,GAAI,CAAEC,SAAU,SAAUC,MAAO,CAAEC,KAAMJ,SAIvD,cAAC,EAAD,CAAcJ,aAAcA,EAAckW,KAAK,QAAQC,OAAK,EAA5D,SACE,cAAC,GAAD,CACExJ,UAAWA,EACXE,OAAQA,EACR2hB,MAAOwG,EAAetuB,YAG1B,cAAC,EAAD,CAAc1G,aAAcA,EAAckW,KAAK,eAAeC,OAAK,EAAnE,SACE,cAAC,GAAD,MAEF,cAAC,EAAD,CAAcnW,aAAcA,EAAckW,KAAK,cAAcC,OAAK,EAAlE,SACE,cAAC,GAAD,CAAckZ,WAAYA,EAAY7d,QAASA,MAEhD3E,EAAOL,UACN,cAAC,EAAD,CACExM,aAAcA,EACdkW,KAAI,kBAAarJ,EAAOL,UAF1B,SAIE,sBAAKpL,UAAW+B,EAAQvC,KAAxB,UACE,cAAC,GAAD,CAAO4U,OAAQ3I,EAAQ1I,KAAK,WAC5B,sBAAK/C,UAAW+B,EAAQ0xB,iBAAxB,UACE,cAACve,GAAA,EAAD,IACA,eAAC,IAAD,WACE,cAAC,IAAD,CACEH,OAAK,EACLD,KAAI,kBAAarJ,EAAOL,UACxBmT,UAAW4M,KAEb,cAAC,IAAD,CACEpW,OAAK,EACLD,KAAI,kBAAarJ,EAAOL,SAApB,WACJmT,UAAW2T,gBAOtB9hB,EAAQhF,UACP,eAAC,EAAD,CAAcxM,aAAcA,EAAckW,KAAK,QAA/C,UACE,cAAC,GAAD,CAAWV,OAAQhE,EAAS5E,UAAWyiB,EAAYlrB,KAAK,SACxD,eAAC,IAAD,WACE,cAAC,EAAD,CAAcnE,aAAcA,EAAckW,KAAK,aAAaC,OAAK,EAAjE,SACE,cAAC,GAAD,MAGF,cAAC,EAAD,CAAcnW,aAAcA,EAAckW,KAAK,QAA/C,SACE,sBAAK9U,UAAW+B,EAAQvC,KAAxB,UACE,cAAC,GAAD,CAAO4U,OAAQhE,EAASrN,KAAK,SAC7B,sBAAK/C,UAAW+B,EAAQ0xB,iBAAxB,UACE,cAACve,GAAA,EAAD,IACA,eAAC,IAAD,WACE,cAAC,IAAD,CAAOH,OAAK,EAACD,KAAK,aAAlB,SACE,cAAC,GAAD,CAAM1E,QAASA,MAEjB,cAAC,IAAD,CAAO2E,OAAK,EAACD,KAAK,eAAeyJ,UAAWgB,sBAQ1D,cAAC,EAAD,CAAc3gB,aAAcA,EAAckW,KAAK,QAA/C,SACE,+BAEF,cAAC,EAAD,CAAclW,aAAcA,EAAckW,KAAK,UAA/C,SACE,+BAEF,cAAC,IAAD,CAAOC,OAAK,EAACD,KAAK,IAAlB,SACE,cAAC,IAAD,CAAU7V,GAAG,mBAOjBM,GAAQw0B,aACZ,CACEC,QAAS,CACP3gB,QAAS,CACP4gB,MAAO,UACPC,KAAM/a,GACNgb,KAAM,UACNC,aAAc,UAIpBC,SAEFC,IAASv1B,OACP,cAAC,iBAAD,CAAgB+zB,OAAQA,GAAxB,SACE,cAACyB,GAAA,EAAD,CAAeh1B,MAAOA,GAAtB,SACE,cAAC,GAAD,QAGJwE,SAASC,eAAe,SAM1B/F,M","file":"static/js/main.ec9d4175.chunk.js","sourcesContent":["import { gql } from \"@apollo/client\";\n\nexport const LOG_IN = gql`\n  mutation LogIn($input: LogInInput) {\n    logIn(input: $input) {\n      ... on UserViewer {\n        token\n        name\n        userName\n        gender\n        education\n        jobStatus\n        age\n        marriageStatus\n        didRequest\n        catelogy\n      }\n      ... on AdminViewer {\n        name\n        userName\n        didRequest\n        token\n        catelogy\n      }\n    }\n  }\n`;\n","import { gql } from \"@apollo/client\";\n\nexport const LOG_OUT = gql`\n  mutation Logout {\n    logOut {\n      ... on UserViewer {\n        id\n        token\n        didRequest\n        catelogy\n      }\n      ... on AdminViewer {\n        id\n        token\n        didRequest\n        catelogy\n      }\n    }\n  }\n`;\n","import { gql } from \"@apollo/client\";\n\nexport const CREATE_ACCOUNT = gql`\n  mutation CreateAccount($input: CreateAccountInput) {\n    createAccount(input: $input) {\n      token\n      name\n      userName\n      gender\n      education\n      jobStatus\n      marriageStatus\n      didRequest\n      age\n      catelogy\n    }\n  }\n`;\n","import { gql } from \"@apollo/client\";\n\nexport const SAVE_USER_ANSWER = gql`\n  mutation SaveUserAnswer($input: UserAnswerInput) {\n    saveUserAnswer(input: $input) {\n      didRequest\n    }\n  }\n`;\n","import { gql } from \"@apollo/client\";\n\nexport const SAVE_PARTIAL_ANSWER = gql`\n  mutation SavePartialAnswer($input: UserAnswerInput) {\n    savePartialAnswer(input: $input) {\n      didRequest\n    }\n  }\n`;\n","import { gql } from \"@apollo/client\";\n\nexport const DOCTOR_LOG_OUT = gql`\n  mutation DoctorLogOut {\n    doctorLogOut {\n      didRequest\n    }\n  }\n`;\n","import { gql } from \"@apollo/client\";\n\nexport const DOCTOR_LOG_IN = gql`\n  mutation DoctorLogIn($input: DoctorLoginInput) {\n    doctorLogIn(input: $input) {\n      name\n      userName\n      didRequest\n    }\n  }\n`;\n","import { gql } from \"@apollo/client\";\n\nexport const ADD_DIAGNOSIS = gql`\n  mutation AddDiagnosis($input: AddDiagnosisInput) {\n    addDiagnosis(input: $input) {\n      result\n    }\n  }\n`;\n","import { gql } from \"@apollo/client\";\n\nexport const ADD_DOCTOR = gql`\n  mutation AddDoctor($input: AddDoctorInput) {\n    addDoctor(input: $input) {\n      result\n    }\n  }\n`;\n","import { ReportHandler } from 'web-vitals';\n\nconst reportWebVitals = (onPerfEntry?: ReportHandler) => {\n  if (onPerfEntry && onPerfEntry instanceof Function) {\n    import('web-vitals').then(({ getCLS, getFID, getFCP, getLCP, getTTFB }) => {\n      getCLS(onPerfEntry);\n      getFID(onPerfEntry);\n      getFCP(onPerfEntry);\n      getLCP(onPerfEntry);\n      getTTFB(onPerfEntry);\n    });\n  }\n};\n\nexport default reportWebVitals;\n","import React, { ReactNode } from \"react\";\nimport { Redirect, Route, RouteProps } from \"react-router-dom\";\n\ninterface Props extends RouteProps {\n  isAuthorized: boolean;\n  children: ReactNode;\n}\n\nexport const PrivateRoute = (props: Props) => {\n  const { isAuthorized, children, ...rest } = props;\n  return (\n    <Route\n      {...rest}\n      render={({ location }) =>\n        isAuthorized ? (\n          children\n        ) : (\n          <Redirect to={{ pathname: \"/login\", state: { from: location } }} />\n        )\n      }\n    />\n  );\n};\n","import { CircularProgress, makeStyles } from \"@material-ui/core\";\nimport React from \"react\";\n\nconst useStyles = makeStyles((theme) => ({\n  root: {\n    display: \"flex\",\n    width: \"100%\",\n    height: \"100%\",\n    justifyContent: \"center\",\n    alignItems: \"center\",\n  },\n}));\nexport const LoadingIndicator = () => {\n  const styles = useStyles();\n  return (\n    <div className={styles.root}>\n      <CircularProgress />\n    </div>\n  );\n};\n","import { Snackbar } from \"@material-ui/core\";\nimport React from \"react\";\nimport MuiAlert from \"@material-ui/lab/Alert\";\n\ninterface Props {\n  showError: boolean;\n  setShowError: (showError: boolean) => void;\n  errorMessage: string;\n}\n\nexport const ErrorIndicator = (props: Props) => {\n  const { showError, setShowError, errorMessage } = props;\n  return (\n    <Snackbar open={showError} onClose={() => setShowError(false)}>\n      <MuiAlert\n        elevation={6}\n        variant=\"filled\"\n        severity=\"error\"\n        onClose={() => setShowError(false)}\n      >\n        {errorMessage}\n      </MuiAlert>\n    </Snackbar>\n  );\n};\n","import React, { useState } from \"react\";\nimport { Document, Page } from \"react-pdf\";\nimport { pdfjs } from \"react-pdf\";\nimport {\n  createStyles,\n  Divider,\n  IconButton,\n  makeStyles,\n  Paper,\n  Theme,\n} from \"@material-ui/core\";\nimport ArrowBackIcon from \"@material-ui/icons/ArrowBack\";\nimport CloudDownloadIcon from \"@material-ui/icons/CloudDownload\";\nimport printJS from \"print-js\";\nimport PrintIcon from \"@material-ui/icons/Print\";\n\npdfjs.GlobalWorkerOptions.workerSrc = \"/pdf.worker.js\";\n\nconst useStyles = makeStyles((theme: Theme) =>\n  createStyles({\n    root: {\n      display: \"flex\",\n      justifyContent: \"center\",\n      marginTop: 10,\n    },\n    paper: {\n      marginBottom: 10,\n    },\n    pdfViewer: {},\n    topbar: {\n      height: 48,\n      display: \"flex\",\n      justifyContent: \"space-between\",\n    },\n    returnButton: {\n      marginLeft: 5,\n    },\n    downloadButton: {\n      marginRight: 5,\n    },\n    printIcon: {},\n    page: {\n      padding: 3,\n    },\n  })\n);\n\ninterface Props {\n  pdfData: string;\n  closeReport: () => void;\n}\n\nexport const ReportPdf = ({ pdfData, closeReport }: Props) => {\n  const classes = useStyles();\n\n  const [width, setWidth] = React.useState(window.innerWidth);\n\n  const updateWidth = () => {\n    if (window.innerWidth !== width) setWidth(window.innerWidth);\n  };\n\n  React.useEffect(() => {\n    window.addEventListener(\"resize\", updateWidth);\n    return () => window.removeEventListener(\"resize\", updateWidth);\n  });\n  const printReport = () => {\n    printJS({\n      printable: `${pdfData}`,\n      type: \"pdf\",\n      base64: true,\n    });\n  };\n  const [numPages, setNumPages] = useState<number>(0);\n  const onDocumentLoadSuccess = ({\n    numPages: nextNumPages,\n  }: {\n    numPages: number;\n  }) => {\n    setNumPages(nextNumPages);\n  };\n\n  return (\n    <>\n      <div>\n        <div className={classes.topbar}>\n          <IconButton onClick={closeReport} className={classes.returnButton}>\n            <ArrowBackIcon />\n          </IconButton>\n          <div>\n            <IconButton className={classes.printIcon} onClick={printReport}>\n              <PrintIcon />\n            </IconButton>\n            <a\n              download=\"心理评估报告单\"\n              href={`data:application/pdf;base64,${pdfData}`}\n              title=\"下载心理评估报告单\"\n            >\n              <IconButton className={classes.downloadButton}>\n                <CloudDownloadIcon />\n              </IconButton>\n            </a>\n          </div>\n        </div>\n        <Divider />\n      </div>\n      <div className={classes.root}>\n        <Document\n          file={`data:application/pdf;base64,${pdfData}`}\n          loading={<div></div>}\n          className={classes.pdfViewer}\n          onLoadSuccess={onDocumentLoadSuccess}\n        >\n          {Array.from(new Array(numPages), (el, index) => (\n            <Paper elevation={3} className={classes.paper} key={index}>\n              <Page\n                pageNumber={index + 1}\n                loading={<></>}\n                renderMode=\"svg\"\n                width={\n                  document.getElementById(\"root\")\n                    ? (document.getElementById(\"root\")!.offsetWidth > 750\n                        ? document.getElementById(\"root\")!.offsetWidth - 240\n                        : document.getElementById(\"root\")!.offsetWidth) * 0.8\n                    : 1000\n                }\n              />\n            </Paper>\n          ))}\n        </Document>\n      </div>\n    </>\n  );\n};\n","import { makeStyles, Theme, createStyles, Button } from \"@material-ui/core\";\nimport React from \"react\";\nimport { Link } from \"react-router-dom\";\nimport HomeIcon from \"@material-ui/icons/Home\";\n\nconst useStyles = makeStyles((theme: Theme) =>\n  createStyles({\n    header: {\n      overflow: \"hidden\",\n    },\n    actionContainer: {\n      float: \"right\",\n      paddingRight: 10,\n      paddingTop: 10,\n      fontSize: \"0.875rem\",\n      display: \"flex\",\n      alignItems: \"center\",\n    },\n  })\n);\nexport const ReturnToHomeHeader = () => {\n  const classes = useStyles();\n  return (\n    <div className={classes.header}>\n      <span className={classes.actionContainer}>\n        <Link to=\"/\">\n          <Button color=\"secondary\" startIcon={<HomeIcon />}>\n            返回主页\n          </Button>\n        </Link>\n      </span>\n    </div>\n  );\n};\n","import React, { useEffect, useRef } from \"react\";\nimport Chart, { ChartDataSets } from \"chart.js\";\nimport \"chartjs-plugin-datalabels\";\nimport { createStyles, makeStyles, Theme } from \"@material-ui/core\";\n\ninterface Props {\n  labelList: string[];\n  dataList?: number[];\n  multipleDataList?: ChartDataSets[];\n  showLabel: boolean;\n}\n\nconst useStyles = makeStyles((theme: Theme) =>\n  createStyles({\n    canvasContainer: {\n      width: 550,\n      height: 400,\n    },\n  })\n);\n\nexport const LineChart = ({\n  labelList,\n  dataList,\n  multipleDataList,\n  showLabel,\n}: Props) => {\n  const classes = useStyles();\n  const chartRef = useRef<HTMLCanvasElement>(null);\n  const init = () => {\n    if (chartRef.current) {\n      const lineChart = chartRef.current.getContext(\"2d\");\n      if (lineChart)\n        new Chart(lineChart, {\n          type: \"line\",\n          data: {\n            //Bring in data\n            labels: labelList,\n            datasets: multipleDataList\n              ? multipleDataList\n              : [\n                  {\n                    label: \"得分\",\n                    data: dataList,\n                    borderColor: \"#0d47a1\",\n                    backgroundColor: \"#bbdefb\",\n                    fill: false,\n                    lineTension: 0,\n                  },\n                ],\n          },\n          options: {\n            tooltips: {\n              mode: \"index\",\n              intersect: false,\n            },\n            hover: {\n              mode: \"nearest\",\n              intersect: true,\n            },\n            maintainAspectRatio: false,\n            responsive: true,\n            scales: {\n              yAxes: [\n                {\n                  ticks: {\n                    beginAtZero: true,\n                  },\n                },\n              ],\n            },\n            plugins: {\n              datalabels: {\n                anchor: \"start\",\n                align: \"top\",\n                formatter: Math.round,\n                display: showLabel ? true : false,\n              },\n            },\n          },\n        });\n    }\n  };\n  const initRef = useRef(init);\n  useEffect(() => {\n    initRef.current();\n  }, []);\n  return (\n    <div className={classes.canvasContainer}>\n      <canvas id=\"line-chart\" ref={chartRef} />\n    </div>\n  );\n};\n","export const EYSCENCK_FORM_NAME = \"艾森克个性测试（EPQ）\";\nexport const EYSCENCK_CHILDREN_FORM_NAME = \"艾森克个性测试儿童版（EPQ）\";\nexport const SCL_90_NAME = \"90项症状清单（SCL-90）\";\nexport const YAML_BROWN_FORM_KEY = \"yale-brown\";\nexport const PSSS_FORM_KEY = \"psss\";\nexport const MDQ_FORM_KEY = \"mdq\";\nexport const PSQI_FORM_KEY = \"psqi\";\nexport const PHCSS_FORM_KEY = \"phcss\";\n","import {\n  Button,\n  // createStyles,\n  Dialog,\n  DialogContent,\n  DialogTitle,\n  // makeStyles,\n  // Theme,\n} from \"@material-ui/core\";\nimport React, { useMemo, useState } from \"react\";\nimport EqualizerIcon from \"@material-ui/icons/Equalizer\";\nimport {\n  EysenckFormResult,\n  MdqResult,\n  PsqiResult,\n  PsssResult,\n  YamlBrownResult,\n  PhcssResult,\n} from \"./type\";\nimport { ChartDataSets } from \"chart.js\";\nimport {\n  EYSCENCK_CHILDREN_FORM_NAME,\n  EYSCENCK_FORM_NAME,\n  MDQ_FORM_KEY,\n  PHCSS_FORM_KEY,\n  PSQI_FORM_KEY,\n  PSSS_FORM_KEY,\n  SCL_90_NAME,\n  YAML_BROWN_FORM_KEY,\n} from \"../../utils/constants\";\nimport { FormResult } from \"../../../sections\";\nimport { LineChart } from \"..\";\n\n// const useStyles = makeStyles((theme: Theme) => createStyles({}));\n\ninterface Props {\n  formResultList: FormResult[];\n  formName: string;\n  formKey: string;\n}\n\nconst HIDE_LABEL_FORMS = [EYSCENCK_FORM_NAME, EYSCENCK_CHILDREN_FORM_NAME];\nconst HIDE_LABEL_KEYS: string[] = [];\n\nexport const LineChartPopOver = (props: Props) => {\n  const { formResultList, formName, formKey } = props;\n  const fillInDateList = useMemo(\n    () => formResultList.map((formResult) => formResult.fillInDate),\n    [formResultList]\n  );\n  const resultList = useMemo(() => {\n    if (formName === SCL_90_NAME) {\n      return formResultList.map((formResult) =>\n        Number(JSON.parse(formResult.result).total)\n      );\n    }\n    return formResultList.map((formResult) => Number(formResult.result));\n  }, [formResultList, formName]);\n  const multipleDataList: undefined | ChartDataSets[] = useMemo(() => {\n    if (\n      formName === EYSCENCK_FORM_NAME ||\n      formName === EYSCENCK_CHILDREN_FORM_NAME\n    ) {\n      const eArray = formResultList.map((formResult) => {\n        const resultObject: EysenckFormResult = JSON.parse(formResult.result);\n        return Number(resultObject.eTScore);\n      });\n      const pArray = formResultList.map((formResult) => {\n        const resultObject: EysenckFormResult = JSON.parse(formResult.result);\n        return Number(resultObject.pTScore);\n      });\n      const nArray = formResultList.map((formResult) => {\n        const resultObject: EysenckFormResult = JSON.parse(formResult.result);\n        return Number(resultObject.nTScore);\n      });\n      const lArray = formResultList.map((formResult) => {\n        const resultObject: EysenckFormResult = JSON.parse(formResult.result);\n        return Number(resultObject.lTScore);\n      });\n      return [\n        {\n          label: \"E量表得分\",\n          data: eArray,\n          borderColor: \"#0d47a1\",\n          backgroundColor: \"#0d47a1\",\n          lineTension: 0,\n          fill: false,\n        },\n        {\n          label: \"P量表得分\",\n          data: pArray,\n          borderColor: \"#4caf50\",\n          backgroundColor: \"#4caf50\",\n          fill: false,\n          lineTension: 0,\n        },\n        {\n          label: \"N量表得分\",\n          data: nArray,\n          borderColor: \"#ffeb3b\",\n          backgroundColor: \"#ffeb3b\",\n          fill: false,\n          lineTension: 0,\n        },\n        {\n          label: \"L量表得分\",\n          data: lArray,\n          borderColor: \"#d32f2f\",\n          backgroundColor: \"#d32f2f\",\n          fill: false,\n          lineTension: 0,\n        },\n      ];\n    } else if (formKey === YAML_BROWN_FORM_KEY) {\n      const mindArray = formResultList.map((formResult) => {\n        const resultObject: YamlBrownResult = JSON.parse(formResult.result);\n        return resultObject.yaleBrownMind;\n      });\n      const behaviorArray = formResultList.map((formResult) => {\n        const resultObject: YamlBrownResult = JSON.parse(formResult.result);\n        return resultObject.yaleBrownBehavior;\n      });\n      const totalArray = formResultList.map((formResult) => {\n        const resultObject: YamlBrownResult = JSON.parse(formResult.result);\n        return resultObject.yaleBrownTotal;\n      });\n      return [\n        {\n          label: \"强迫思维部分分数\",\n          data: mindArray,\n          borderColor: \"#0d47a1\",\n          backgroundColor: \"#0d47a1\",\n          lineTension: 0,\n          fill: false,\n        },\n        {\n          label: \"强迫行为部分分数\",\n          data: behaviorArray,\n          borderColor: \"#4caf50\",\n          backgroundColor: \"#4caf50\",\n          fill: false,\n          lineTension: 0,\n        },\n        {\n          label: \"两部分总分\",\n          data: totalArray,\n          borderColor: \"#d32f2f\",\n          backgroundColor: \"#d32f2f\",\n          fill: false,\n          lineTension: 0,\n        },\n      ];\n    } else if (formKey === PSSS_FORM_KEY) {\n      const pArray = formResultList.map((formResult) => {\n        const resultObject: PsssResult = JSON.parse(formResult.result);\n        return resultObject.psssP;\n      });\n      const sArray = formResultList.map((formResult) => {\n        const resultObject: PsssResult = JSON.parse(formResult.result);\n        return resultObject.psssS;\n      });\n      const totalArray = formResultList.map((formResult) => {\n        const resultObject: PsssResult = JSON.parse(formResult.result);\n        return resultObject.psssTotal;\n      });\n      return [\n        {\n          label: \"心理（P）因子分数\",\n          data: pArray,\n          borderColor: \"#0d47a1\",\n          backgroundColor: \"#0d47a1\",\n          lineTension: 0,\n          fill: false,\n        },\n        {\n          label: \"躯体（S）因子分数\",\n          data: sArray,\n          borderColor: \"#4caf50\",\n          backgroundColor: \"#4caf50\",\n          fill: false,\n          lineTension: 0,\n        },\n        {\n          label: \"总分\",\n          data: totalArray,\n          borderColor: \"#d32f2f\",\n          backgroundColor: \"#d32f2f\",\n          fill: false,\n          lineTension: 0,\n        },\n      ];\n    } else if (formKey === MDQ_FORM_KEY) {\n      const totalArray = formResultList.map((formResult) => {\n        const resultObject: MdqResult = JSON.parse(formResult.result);\n        return resultObject.mdqTotal;\n      });\n      return [\n        {\n          label: \"总分\",\n          data: totalArray,\n          borderColor: \"#d32f2f\",\n          backgroundColor: \"#d32f2f\",\n          fill: false,\n          lineTension: 0,\n        },\n      ];\n    } else if (formKey === PSQI_FORM_KEY) {\n      const totalArray = formResultList.map((formResult) => {\n        const resultObject: PsqiResult = JSON.parse(formResult.result);\n        return resultObject.psqiTotal;\n      });\n      // const aArray = formResultList.map((formResult) => {\n      //   const resultObject: PsqiResult = JSON.parse(formResult.result);\n      //   return resultObject.psqiA;\n      // });\n      // const bArray = formResultList.map((formResult) => {\n      //   const resultObject: PsqiResult = JSON.parse(formResult.result);\n      //   return resultObject.psqiB;\n      // });\n      // const cArray = formResultList.map((formResult) => {\n      //   const resultObject: PsqiResult = JSON.parse(formResult.result);\n      //   return resultObject.psqiC;\n      // });\n      // const dArray = formResultList.map((formResult) => {\n      //   const resultObject: PsqiResult = JSON.parse(formResult.result);\n      //   return resultObject.psqiD;\n      // });\n      // const eArray = formResultList.map((formResult) => {\n      //   const resultObject: PsqiResult = JSON.parse(formResult.result);\n      //   return resultObject.psqiE;\n      // });\n      // const fArray = formResultList.map((formResult) => {\n      //   const resultObject: PsqiResult = JSON.parse(formResult.result);\n      //   return resultObject.psqiF;\n      // });\n      // const gArray = formResultList.map((formResult) => {\n      //   const resultObject: PsqiResult = JSON.parse(formResult.result);\n      //   return resultObject.psqiG;\n      // });\n      return [\n        {\n          label: \"总分\",\n          data: totalArray,\n          borderColor: \"#d32f2f\",\n          backgroundColor: \"#d32f2f\",\n          fill: false,\n          lineTension: 0,\n        },\n        // {\n        //   label: \"因子A（主观睡眠质量）\",\n        //   data: aArray,\n        //   borderColor: \"#ffeb3b\",\n        //   backgroundColor: \"#ffeb3b\",\n        //   fill: false,\n        //   lineTension: 0,\n        // },\n        // {\n        //   label: \"因子B（睡眠潜伏期）\",\n        //   data: bArray,\n        //   borderColor: \"#4caf50\",\n        //   backgroundColor: \"#4caf50\",\n        //   fill: false,\n        //   lineTension: 0,\n        // },\n        // {\n        //   label: \"因子C（睡眠持续性）\",\n        //   data: cArray,\n        //   borderColor: \"#0d47a1\",\n        //   backgroundColor: \"#0d47a1\",\n        //   fill: false,\n        //   lineTension: 0,\n        // },\n        // {\n        //   label: \"因子D（习惯性睡眠效率）\",\n        //   data: dArray,\n        //   borderColor: \"#9E9E9E\",\n        //   backgroundColor: \"#9E9E9E\",\n        //   fill: false,\n        //   lineTension: 0,\n        // },\n        // {\n        //   label: \"因子E（睡眠紊乱\",\n        //   data: eArray,\n        //   borderColor: \"#FF5722\",\n        //   backgroundColor: \"#FF5722\",\n        //   fill: false,\n        //   lineTension: 0,\n        // },\n        // {\n        //   label: \"因子F（使用睡眠药物）\",\n        //   data: fArray,\n        //   borderColor: \"#26A69A\",\n        //   backgroundColor: \"#26A69A\",\n        //   fill: false,\n        //   lineTension: 0,\n        // },\n        // {\n        //   label: \"因子G（白天功能紊乱）\",\n        //   data: gArray,\n        //   borderColor: \"#4DD0E1\",\n        //   backgroundColor: \"#4DD0E1\",\n        //   fill: false,\n        //   lineTension: 0,\n        // },\n      ];\n    } else if (formKey === PHCSS_FORM_KEY) {\n      const totalArray = formResultList.map((formResult) => {\n        const resultObject: PhcssResult = JSON.parse(formResult.result);\n        return resultObject.phcssTotal;\n      });\n      return [\n        {\n          label: \"总分\",\n          data: totalArray,\n          borderColor: \"#d32f2f\",\n          backgroundColor: \"#d32f2f\",\n          fill: false,\n          lineTension: 0,\n        },\n      ];\n    }\n    return undefined;\n  }, [formKey, formName, formResultList]);\n  let showLabel = true;\n  if (\n    HIDE_LABEL_FORMS.includes(formName) ||\n    HIDE_LABEL_KEYS.includes(formKey)\n  ) {\n    showLabel = false;\n  }\n  // const classes = useStyles();\n  const [isDialogOpen, setIsDialogOpen] = useState(false);\n  const handleCloseDialog = () => {\n    setIsDialogOpen(false);\n  };\n  const openDialog = () => {\n    setIsDialogOpen(true);\n  };\n  return (\n    <div>\n      <div>\n        <Button\n          startIcon={<EqualizerIcon />}\n          size=\"small\"\n          color=\"primary\"\n          disabled={formResultList.length <= 1}\n          onClick={openDialog}\n        >\n          趋势\n        </Button>\n      </div>\n      <Dialog onClose={handleCloseDialog} open={isDialogOpen}>\n        <DialogTitle>{formName}分数趋势</DialogTitle>\n        <DialogContent>\n          <LineChart\n            labelList={fillInDateList}\n            dataList={resultList}\n            multipleDataList={multipleDataList}\n            showLabel={showLabel}\n          />\n        </DialogContent>\n      </Dialog>\n    </div>\n  );\n};\n","export default __webpack_public_path__ + \"static/media/logo.bcf589ff.png\";","import { useMutation } from \"@apollo/client\";\nimport {\n  Button,\n  Card,\n  CardContent,\n  createStyles,\n  makeStyles,\n  TextField,\n  Theme,\n} from \"@material-ui/core\";\nimport React, { useEffect, useRef, useState } from \"react\";\nimport { Redirect, useHistory } from \"react-router-dom\";\nimport { ErrorIndicator, LoadingIndicator } from \"../../lib/components\";\nimport { DOCTOR_LOG_IN } from \"../../lib/graphql/mutations\";\nimport {\n  DoctorLogIn,\n  DoctorLogInVariables,\n} from \"../../lib/graphql/mutations/DoctorLogIn/__generated__/DoctorLogIn\";\n// import {\n//   LogIn as LogInData,\n//   LogInVariables,\n// } from \"../../lib/graphql/mutations/Login/__generated__/LogIn\";\nimport { Doctor, Viewer } from \"../../lib/type\";\nimport logo from \"../AppHeader/assets/logo.png\";\n\nconst useStyles = makeStyles((theme: Theme) =>\n  createStyles({\n    logInCard: {\n      borderRadius: 8,\n      width: \"min(450px, 90%)\",\n      margin: \"0 auto 0\",\n    },\n    logInText: {\n      fontSize: \"1.5rem\",\n      textAlign: \"center\",\n      marginBottom: 20,\n      marginTop: 25,\n    },\n    promptText: {\n      marginBottom: 24,\n      fontSize: \"1rem\",\n      textAlign: \"center\",\n    },\n    input: {\n      width: \"100%\",\n    },\n    inputContainer: {\n      margin: \"0 40px\",\n    },\n    userNameInput: {\n      marginBottom: 15,\n    },\n    passwordInput: {\n      marginBottom: 30,\n    },\n    buttonContainer: {\n      display: \"flex\",\n      justifyContent: \"center\",\n    },\n    logo: {\n      height: 92,\n    },\n    logoContainer: {\n      display: \"flex\",\n      justifyContent: \"center\",\n    },\n    pageContainer: {\n      backgroundColor: \"#f5f5f5\",\n      width: \"100%\",\n      height: \"100%\",\n    },\n    topPadding: {\n      height: \"min(100px, 30%)\",\n    },\n  })\n);\n\ninterface AccountInfo {\n  userName: string;\n  password: string;\n}\n\nconst initialAccountInfo = {\n  userName: \"\",\n  password: \"\",\n};\n\ninterface Props {\n  isAuthorized: boolean;\n  setViewer: (viewer: Viewer) => void;\n  setDoctor: (doctor: Doctor) => void;\n  doctor: Doctor;\n}\n\nexport const Login = ({\n  isAuthorized,\n  setViewer,\n  setDoctor,\n  doctor,\n}: Props) => {\n  const classes = useStyles();\n  // const [logIn] = useMutation<LogInData, LogInVariables>(LOG_IN, {\n  //   onCompleted: (data) => {\n  //     if (data && data.logIn && data.logIn.token) {\n  //       setViewer(data.logIn);\n  //     }\n  //   },\n  //   onError: (error) => {\n  //     setIsLogInErrorShown(true);\n  //   },\n  // });\n  // const logInRef = useRef(logIn);\n  const [doctorLogIn] = useMutation<DoctorLogIn, DoctorLogInVariables>(\n    DOCTOR_LOG_IN,\n    {\n      onCompleted: (data) => {\n        if (data && data.doctorLogIn) {\n          const { name, userName, didRequest } = data.doctorLogIn;\n          setDoctor({\n            name,\n            userName,\n            didRequest,\n          });\n          setIsRedo(false);\n        }\n      },\n      onError: (error) => {\n        setIsLogInErrorShown(true);\n      },\n    }\n  );\n  const doctorLoginRef = useRef(doctorLogIn);\n  const [accountInfo, setAccountInfo] = useState<AccountInfo>(\n    initialAccountInfo\n  );\n  const [isNameAndPasswordValidated, setIsNameAndPasswordValidated] = useState(\n    false\n  );\n  const [isLogInErrorShown, setIsLogInErrorShown] = useState(false);\n  const handleKeyPress = (event: KeyboardEvent) => {\n    if (event.key === \"Enter\") {\n      logInButtonOnClick();\n    }\n  };\n  useEffect(() => {\n    window.addEventListener(\"keydown\", handleKeyPress);\n\n    return () => {\n      window.removeEventListener(\"keydown\", handleKeyPress);\n    };\n  });\n  const [isRedo, setIsRedo] = useState(true);\n  const detectRedoRef = useRef(() => {\n    if (\n      history.location.state &&\n      history.location.state.from.pathname === \"/doctor\"\n    ) {\n      setIsRedo(true);\n    } else {\n      setIsRedo(false);\n    }\n  });\n\n  useEffect(() => {\n    detectRedoRef.current();\n  }, []);\n  const handleNameChange = (e: React.ChangeEvent<HTMLInputElement>) => {\n    setAccountInfo({ ...accountInfo, userName: e.target.value });\n  };\n  const handlePasswordChange = (e: React.ChangeEvent<HTMLInputElement>) => {\n    setAccountInfo({ ...accountInfo, password: e.target.value });\n  };\n  const logInButtonOnClick = () => {\n    setIsNameAndPasswordValidated(true);\n    if (accountInfo.userName && accountInfo.password)\n      doctorLoginRef.current({\n        variables: {\n          input: {\n            userName: accountInfo.userName,\n            password: accountInfo.password,\n          },\n        },\n      });\n  };\n  const history = useHistory<\n    { from: Location; redo: boolean | undefined } | undefined\n  >();\n  const isDoctor =\n    history.location.state &&\n    history.location.state.from.pathname.includes(\"doctor\")\n      ? true\n      : false;\n  if (isAuthorized) {\n    // let redirectUrl = \"/user\";\n    // if (history.location.state) {\n    //   redirectUrl = history.location.state.from.pathname;\n    // }\n    if (!isRedo) {\n      if (isDoctor) {\n        if (!doctor.userName) {\n          return <LoadingIndicator />;\n        } else {\n          return <Redirect to={`/doctor/${doctor.userName}`} />;\n        }\n      }\n      return <Redirect to=\"/user\" />;\n    }\n  }\n\n  return (\n    <div className={classes.pageContainer}>\n      <div className={classes.topPadding} />\n      <Card className={classes.logInCard}>\n        <CardContent>\n          <div className={classes.logoContainer}>\n            <img src={logo} className={classes.logo} alt=\"医院标志\" />\n          </div>\n          <div className={classes.logInText}>\n            {isDoctor ? \"医生端\" : \"用户端\"}\n          </div>\n          <div className={classes.promptText}>请输入医生的用户名和密码</div>\n          <form>\n            <div className={classes.inputContainer}>\n              <TextField\n                autoFocus\n                className={classes.input + \" \" + classes.userNameInput}\n                color=\"primary\"\n                value={accountInfo.userName}\n                label=\"用户名\"\n                onChange={handleNameChange}\n                helperText={\n                  isNameAndPasswordValidated && !accountInfo.userName\n                    ? \"请输入您的用户名\"\n                    : undefined\n                }\n                error={\n                  isNameAndPasswordValidated && !accountInfo.userName\n                    ? true\n                    : undefined\n                }\n                inputProps={{ \"aira-label\": \"用户名\" }}\n              />\n              <TextField\n                className={classes.input + \" \" + classes.passwordInput}\n                color=\"primary\"\n                value={accountInfo.password}\n                label=\"密码\"\n                helperText={\n                  isNameAndPasswordValidated && !accountInfo.password\n                    ? \"请输入您的密码\"\n                    : undefined\n                }\n                error={\n                  isNameAndPasswordValidated && !accountInfo.password\n                    ? true\n                    : undefined\n                }\n                onChange={handlePasswordChange}\n                type=\"password\"\n                inputProps={{ \"aira-label\": \"密码\" }}\n              />\n            </div>\n            <div className={classes.buttonContainer}>\n              <Button\n                variant=\"contained\"\n                color=\"primary\"\n                onClick={logInButtonOnClick}\n              >\n                登录\n              </Button>\n            </div>\n          </form>\n        </CardContent>\n      </Card>\n      <ErrorIndicator\n        showError={isLogInErrorShown}\n        setShowError={setIsLogInErrorShown}\n        errorMessage={\"用户名或密码不正确！\"}\n      />\n    </div>\n  );\n};\n","export default __webpack_public_path__ + \"static/media/cardIcon.2b436e10.png\";","import { gql } from \"@apollo/client\";\n\nexport const QUESTIONNAIRE_LIST = gql`\n  query QuestionnaireList($isReport: Boolean!) {\n    questionnaireList(isReport: $isReport) {\n      name\n      description\n      id\n      done\n      displayedFillInDate\n      userAnswerId\n      result\n      key\n    }\n  }\n`;\n","import { gql } from \"@apollo/client\";\n\nexport const QUESTIONNAIRE_CONTENT = gql`\n  query QuestionnaireContent($id: String!) {\n    questionnaire(id: $id) {\n      instruction\n      name\n      questions {\n        choices\n        content\n        parent\n      }\n      key\n    }\n    partialAnswer(questionnaireId: $id) {\n      answers\n    }\n  }\n`;\n","import { gql } from \"@apollo/client\";\n\nexport const REPORT = gql`\n  query Report($userAnswerIds: [String!]!) {\n    report(userAnswerIds: $userAnswerIds) {\n      pdf\n    }\n  }\n`;\n","import { gql } from \"@apollo/client\";\n\nexport const REPORT_FOR_ADMIN = gql`\n  query ReportForAdmin($userId: String, $userAnswerIds: [String!]!) {\n    reportForAdmin(userId: $userId, userAnswerIds: $userAnswerIds) {\n      pdf\n    }\n  }\n`;\n","import { gql } from \"@apollo/client\";\n\nexport const DOCTOR_LIST = gql`\n  query DoctorList($limit: Int!, $currentPageIndex: Int!) {\n    doctorList(limit: $limit, currentPageIndex: $currentPageIndex) {\n      total\n      admins {\n        name\n        userName\n      }\n    }\n  }\n`;\n","// Error dialog for EPQ (adult version).\nimport {\n  Dialog,\n  DialogTitle,\n  DialogContent,\n  DialogContentText,\n  DialogActions,\n  Button,\n} from \"@material-ui/core\";\nimport React from \"react\";\n\ninterface Props {\n  isOpen: boolean;\n  handleClose: () => void;\n  goToLogInPage: () => void;\n  age?: null | number;\n  gender?: null | string;\n}\n\nexport const EnterGenderAndAgeDialog = ({\n  isOpen,\n  handleClose,\n  goToLogInPage,\n  age,\n  gender,\n}: Props) => {\n  return (\n    <Dialog open={isOpen} onClose={handleClose}>\n      <DialogTitle>\n        {!age || (age >= 16 && !gender)\n          ? \"请您完善信息\"\n          : age >= 7 && age < 16\n          ? \"请使用儿童版量表\"\n          : \"年龄不符合条件\"}\n      </DialogTitle>\n      <DialogContent>\n        <DialogContentText>\n          {(!age || !gender) && \"请您填写性别和年龄信息。\"}\n          {age !== undefined && age !== null && age < 16\n            ? \"填写该量表最小年龄为16岁。\"\n            : null}\n        </DialogContentText>\n      </DialogContent>\n      <DialogActions>\n        <Button\n          onClick={!age || age >= 16 ? goToLogInPage : handleClose}\n          color=\"primary\"\n          autoFocus\n        >\n          确定\n        </Button>\n      </DialogActions>\n    </Dialog>\n  );\n};\n","// Error dialog for EPQ (children version).\nimport {\n  Dialog,\n  DialogTitle,\n  DialogContent,\n  DialogContentText,\n  DialogActions,\n  Button,\n} from \"@material-ui/core\";\nimport React from \"react\";\n\ninterface Props {\n  isOpen: boolean;\n  handleClose: () => void;\n  goToLogInPage: () => void;\n  age?: null | number;\n  gender?: null | string;\n}\n\nexport const ChildrenEnterGenderAndAgeDialog = ({\n  isOpen,\n  handleClose,\n  goToLogInPage,\n  age,\n  gender,\n}: Props) => {\n  return (\n    <Dialog open={isOpen} onClose={handleClose}>\n      <DialogTitle>\n        {!age || (age < 16 && age > 7 && !gender)\n          ? \"请您完善信息\"\n          : age >= 16\n          ? \"请使用成人版量表\"\n          : \"年龄不符合条件\"}\n      </DialogTitle>\n      <DialogContent>\n        <DialogContentText>\n          {(!age || !gender) && \"请您填写性别和年龄信息。\"}\n          {age !== undefined && age !== null && (age >= 16 || age < 7)\n            ? \"填写该量表年龄应在7岁到15岁之间。\"\n            : null}\n        </DialogContentText>\n      </DialogContent>\n      <DialogActions>\n        <Button\n          onClick={\n            !age || !(age >= 16 || age < 7) ? goToLogInPage : handleClose\n          }\n          color=\"primary\"\n          autoFocus\n        >\n          确定\n        </Button>\n      </DialogActions>\n    </Dialog>\n  );\n};\n","// Error dialog for EPQ (children version).\nimport {\n  Dialog,\n  DialogTitle,\n  DialogContent,\n  DialogContentText,\n  DialogActions,\n  Button,\n} from \"@material-ui/core\";\nimport React from \"react\";\n\ninterface Props {\n  isOpen: boolean;\n  handleClose: () => void;\n  goToLogInPage: () => void;\n  age?: null | number;\n  gender?: null | string;\n}\n\nexport const PhcssGenderAndAgeDialog = ({\n  isOpen,\n  handleClose,\n  goToLogInPage,\n  age,\n  gender,\n}: Props) => {\n  return (\n    <Dialog open={isOpen} onClose={handleClose}>\n      <DialogTitle>\n        {!age || (age < 17 && age > 7 && !gender)\n          ? \"请您完善信息\"\n          : \"年龄不符合条件\"}\n      </DialogTitle>\n      <DialogContent>\n        <DialogContentText>\n          {(!age || !gender) && \"请您填写性别和年龄信息。\"}\n          {age !== undefined && age !== null && (age >= 17 || age <= 7)\n            ? \"填写该量表年龄应在8岁到16岁之间。\"\n            : null}\n        </DialogContentText>\n      </DialogContent>\n      <DialogActions>\n        <Button\n          onClick={\n            !age || !(age >= 17 || age <= 7) ? goToLogInPage : handleClose\n          }\n          color=\"primary\"\n          autoFocus\n        >\n          确定\n        </Button>\n      </DialogActions>\n    </Dialog>\n  );\n};\n","// Error dialog for EPQ (children version).\nimport {\n  Dialog,\n  DialogTitle,\n  DialogContent,\n  DialogContentText,\n  DialogActions,\n  Button,\n} from \"@material-ui/core\";\nimport React from \"react\";\n\ninterface Props {\n  isOpen: boolean;\n  handleClose: () => void;\n  goToLogInPage: () => void;\n  gender?: null | string;\n}\n\nexport const PsssGenderDialog = ({\n  isOpen,\n  handleClose,\n  goToLogInPage,\n  gender,\n}: Props) => {\n  return (\n    <Dialog open={isOpen} onClose={handleClose}>\n      <DialogTitle>请您完善信息</DialogTitle>\n      <DialogContent>\n        <DialogContentText>请您填写性别信息。</DialogContentText>\n      </DialogContent>\n      <DialogActions>\n        <Button onClick={goToLogInPage} color=\"primary\" autoFocus>\n          确定\n        </Button>\n      </DialogActions>\n    </Dialog>\n  );\n};\n","import { useQuery } from \"@apollo/client\";\nimport {\n  Card,\n  CardActionArea,\n  CardActions,\n  CardContent,\n  createStyles,\n  Divider,\n  List,\n  ListItem,\n  ListItemAvatar,\n  ListItemText,\n  ListSubheader,\n  makeStyles,\n  Theme,\n  useMediaQuery,\n} from \"@material-ui/core\";\nimport indigo from \"@material-ui/core/colors/indigo\";\nimport React, { useMemo, useState } from \"react\";\nimport { useHistory } from \"react-router-dom\";\nimport CardIcon from \"./assets/cardIcon.png\";\nimport {\n  QuestionnaireList as QuestionnaireListData,\n  QuestionnaireListVariables,\n  QuestionnaireList_questionnaireList as QuestionnaireData,\n} from \"../../lib/graphql/queries/QuestionnaireList/__generated__/QuestionnaireList\";\nimport { QUESTIONNAIRE_LIST } from \"../../lib/graphql/queries\";\nimport { LineChartPopOver, LoadingIndicator } from \"../../lib/components\";\nimport { Patient } from \"../../lib/type\";\nimport {\n  EYSCENCK_CHILDREN_FORM_NAME,\n  EYSCENCK_FORM_NAME,\n  PHCSS_FORM_KEY,\n  PSSS_FORM_KEY,\n} from \"../../lib/utils/constants\";\nimport {\n  EnterGenderAndAgeDialog,\n  PhcssGenderAndAgeDialog,\n  PsssGenderDialog,\n} from \"./components\";\nimport { ChildrenEnterGenderAndAgeDialog } from \"./components/ChildrenEnterGenderAndAgeDialog\";\n\nconst CARD_WIDTH = 250;\n\nconst useStyles = makeStyles((theme: Theme) =>\n  createStyles({\n    content: {\n      padding: \"5px 10px\",\n    },\n    listName: {\n      fontSize: \"1rem\",\n      color: \"rgba(0, 0, 0, .654)\",\n      marginTop: 20,\n      marginBottom: 20,\n    },\n    root: {\n      display: \"grid\",\n      gridTemplateColumns: `repeat(auto-fill, ${CARD_WIDTH}px)`,\n      rowGap: \"20px\",\n      columnGap: \"20px\",\n    },\n    card: {\n      height: 212,\n    },\n    cardActionArea: {\n      width: CARD_WIDTH,\n      cursor: \"pointer\",\n      \"&:hover\": {\n        backgroundColor: indigo[50],\n      },\n      height: 160,\n      display: \"flex\",\n      justifyContent: \"flex-start\",\n      alignItems: \"flex-start\",\n    },\n    cardIcon: {\n      width: 40,\n      height: 40,\n    },\n    unfinishedText: {\n      fontSize: \"0.8125rem\",\n      color: \"rgba(0, 0, 0, .54)\",\n      margin: \"5px 0\",\n    },\n    finishedText: {\n      fontSize: \"0.8125rem\",\n      color: \"#4caf50\",\n      margin: \"5px 0\",\n    },\n    questionnaireName: {\n      fontSize: \"1rem\",\n      color: \"#111\",\n      lineHeight: \"1.5rem\",\n    },\n    cardActionContainer: {\n      paddingLeft: 20,\n      height: 50,\n    },\n    noOverflow: {\n      overflow: \"hidden\",\n      textOverflow: \"ellipsis\",\n      whiteSpace: \"nowrap\",\n    },\n  })\n);\n\nexport type FormResult = { result: string; fillInDate: string };\n\ninterface Props {\n  patient: Patient;\n}\n\nexport const Home = ({ patient }: Props) => {\n  const isSmallScreen = useMediaQuery(\"(max-width:780px)\");\n  const classes = useStyles();\n  const { loading, data } = useQuery<\n    QuestionnaireListData,\n    QuestionnaireListVariables\n  >(QUESTIONNAIRE_LIST, {\n    fetchPolicy: \"no-cache\",\n    variables: { isReport: false },\n  });\n  const listData: {\n    uniqueFormList: QuestionnaireData[];\n    resultList: FormResult[][];\n  } = useMemo(() => {\n    if (!data) return { uniqueFormList: [], resultList: [] as FormResult[][] };\n    const formList: QuestionnaireData[] = [];\n    const resultList: FormResult[][] = [];\n    const formSet: Set<string> = new Set();\n    data.questionnaireList.forEach((questionnaire) => {\n      if (!formSet.has(questionnaire.id)) {\n        formSet.add(questionnaire.id);\n        formList.push(questionnaire);\n        if (questionnaire.result && questionnaire.displayedFillInDate) {\n          resultList.push([\n            {\n              result: questionnaire.result,\n              fillInDate: questionnaire.displayedFillInDate,\n            },\n          ]);\n        } else {\n          resultList.push([] as FormResult[]);\n        }\n      } else if (questionnaire.result && questionnaire.displayedFillInDate) {\n        let index = 0;\n        while (index <= formList.length) {\n          if (formList[index].id === questionnaire.id) {\n            resultList[index].push({\n              result: questionnaire.result,\n              fillInDate: questionnaire.displayedFillInDate,\n            });\n            break;\n          }\n          index += 1;\n        }\n      }\n    });\n    return { uniqueFormList: formList, resultList };\n  }, [data]);\n  const { uniqueFormList, resultList } = listData;\n  const [isGenderAndAgeDialogOpen, setIsGenderAndAgeDialogOpen] = useState(\n    false\n  );\n  const [\n    isChildrenGenderAndAgeDialogOpen,\n    setIsChildrenGenderAndAgeDialogOpen,\n  ] = useState(false);\n  const [isPhcssDialogOpen, setIsPhcssDialogOpen] = useState(false);\n  const [isPsssDialogOpen, setIsPsssDialogOpen] = useState(false);\n  const closeGenderAndAgeDialog = () => {\n    setIsGenderAndAgeDialogOpen(false);\n  };\n  const closeChildrenGenderAndAgeDialog = () => {\n    setIsChildrenGenderAndAgeDialogOpen(false);\n  };\n  const closePhcssDialog = () => {\n    setIsPhcssDialogOpen(false);\n  };\n  const closePsssDialog = () => {\n    setIsPsssDialogOpen(false);\n  };\n  const goToLogInPage = () => {\n    history.push(`/user/login?userName=${patient.userName}`);\n  };\n  const history = useHistory();\n  if (loading) {\n    return <LoadingIndicator />;\n  }\n  if (data) {\n    const questionnaireName = (questionnaire: QuestionnaireData) => {\n      const defaultReturn = (\n        <span className={classes.questionnaireName}>{questionnaire.name}</span>\n      );\n      // Note that this is Chinese parentheses!\n      if (!/^.*（.*）$/.test(questionnaire.name)) {\n        return defaultReturn;\n      } else {\n        const nameMatchFormResult = questionnaire.name.match(/^.*（/);\n        const abbreviationMatchFormResult = questionnaire.name.match(/（.*）/);\n        if (nameMatchFormResult && abbreviationMatchFormResult) {\n          const name = nameMatchFormResult[0].substring(\n            0,\n            nameMatchFormResult[0].length - 1\n          );\n          const abbreviation = abbreviationMatchFormResult[0];\n          return (\n            <span\n              className={classes.questionnaireName + \" \" + classes.noOverflow}\n            >\n              <span className={classes.noOverflow}>{name}</span>\n              <br />\n              {abbreviation.replace(\"（\", \"(\").replace(\"）\", \")\")}\n            </span>\n          );\n        }\n        return defaultReturn;\n      }\n    };\n    const goToFormPage = (\n      formId: string,\n      formName: string,\n      formKey: string\n    ) => {\n      if (formName === EYSCENCK_FORM_NAME) {\n        if (!patient.gender || !patient.age || patient.age < 16) {\n          setIsGenderAndAgeDialogOpen(true);\n          return;\n        }\n      } else if (formName === EYSCENCK_CHILDREN_FORM_NAME) {\n        if (\n          !patient.gender ||\n          !patient.age ||\n          patient.age >= 16 ||\n          patient.age <= 6\n        ) {\n          setIsChildrenGenderAndAgeDialogOpen(true);\n          return;\n        }\n      } else if (formKey === PHCSS_FORM_KEY) {\n        if (\n          !patient.gender ||\n          !patient.age ||\n          patient.age >= 17 || // Age should be a number between 8 - 16.\n          patient.age <= 7\n        ) {\n          setIsPhcssDialogOpen(true);\n          return;\n        }\n      } else if (formKey === PSSS_FORM_KEY) {\n        if (!patient.gender) {\n          setIsPsssDialogOpen(true);\n          return;\n        }\n      }\n      history.push(`/user/form?id=${formId}`);\n    };\n    const finishStatus = (questionnaire: QuestionnaireData) => (\n      <span\n        className={\n          questionnaire.done ? classes.finishedText : classes.unfinishedText\n        }\n      >\n        {questionnaire.done ? \"已完成\" : \"未完成\"}\n      </span>\n    );\n    if (isSmallScreen) {\n      return (\n        <>\n          <List subheader={<ListSubheader>量表</ListSubheader>}>\n            {uniqueFormList.map((questionnaire, index) => (\n              <ListItem\n                button\n                onClick={() =>\n                  goToFormPage(\n                    questionnaire.id,\n                    questionnaire.name,\n                    questionnaire.key\n                  )\n                }\n                key={questionnaire.id}\n              >\n                <ListItemAvatar>\n                  <img\n                    src={CardIcon}\n                    alt=\"量表图标\"\n                    className={classes.cardIcon}\n                  />\n                </ListItemAvatar>\n                <ListItemText\n                  primary={\n                    <div className={classes.questionnaireName}>\n                      {questionnaire.name}\n                    </div>\n                  }\n                  secondary={finishStatus(questionnaire)}\n                />\n              </ListItem>\n            ))}\n          </List>\n          <EnterGenderAndAgeDialog\n            isOpen={isGenderAndAgeDialogOpen}\n            handleClose={closeGenderAndAgeDialog}\n            goToLogInPage={goToLogInPage}\n            age={patient.age}\n            gender={patient.gender}\n          />\n          <ChildrenEnterGenderAndAgeDialog\n            isOpen={isChildrenGenderAndAgeDialogOpen}\n            handleClose={closeChildrenGenderAndAgeDialog}\n            goToLogInPage={goToLogInPage}\n            age={patient.age}\n            gender={patient.gender}\n          />\n          <PhcssGenderAndAgeDialog\n            isOpen={isPhcssDialogOpen}\n            handleClose={closePhcssDialog}\n            goToLogInPage={goToLogInPage}\n            age={patient.age}\n            gender={patient.gender}\n          />\n        </>\n      );\n    }\n    return (\n      <>\n        <div className={classes.content}>\n          <p className={classes.listName}>量表</p>\n          <div className={classes.root}>\n            {uniqueFormList.map((questionnaire, index) => (\n              <Card\n                variant=\"outlined\"\n                className={classes.card + \" \" + classes.noOverflow}\n                key={questionnaire.id}\n              >\n                <CardActionArea\n                  className={classes.cardActionArea}\n                  onClick={() =>\n                    goToFormPage(\n                      questionnaire.id,\n                      questionnaire.name,\n                      questionnaire.key\n                    )\n                  }\n                >\n                  <CardContent>\n                    <div>\n                      <img\n                        src={CardIcon}\n                        alt=\"量表图标\"\n                        className={classes.cardIcon}\n                      />\n                    </div>\n                    <div className={classes.noOverflow}>\n                      {questionnaireName(questionnaire)}\n                    </div>\n                    {finishStatus(questionnaire)}\n                  </CardContent>\n                </CardActionArea>\n\n                <Divider />\n\n                <CardActions className={classes.cardActionContainer}>\n                  <LineChartPopOver\n                    formResultList={resultList[index]}\n                    formName={questionnaire.name}\n                    formKey={questionnaire.key}\n                  />\n                </CardActions>\n              </Card>\n            ))}\n          </div>\n        </div>\n        <EnterGenderAndAgeDialog\n          isOpen={isGenderAndAgeDialogOpen}\n          handleClose={closeGenderAndAgeDialog}\n          goToLogInPage={goToLogInPage}\n          age={patient.age}\n          gender={patient.gender}\n        />\n        <ChildrenEnterGenderAndAgeDialog\n          isOpen={isChildrenGenderAndAgeDialogOpen}\n          handleClose={closeChildrenGenderAndAgeDialog}\n          goToLogInPage={goToLogInPage}\n          age={patient.age}\n          gender={patient.gender}\n        />\n        <PhcssGenderAndAgeDialog\n          isOpen={isPhcssDialogOpen}\n          handleClose={closePhcssDialog}\n          goToLogInPage={goToLogInPage}\n          age={patient.age}\n          gender={patient.gender}\n        />\n        <PsssGenderDialog\n          isOpen={isPsssDialogOpen}\n          handleClose={closePsssDialog}\n          goToLogInPage={goToLogInPage}\n          gender={patient.gender}\n        />\n      </>\n    );\n  }\n  return null;\n};\n","import { gql } from \"@apollo/client\";\n\nexport const PATIENT_LOG_OUT = gql`\n  mutation PatientLogOut {\n    patientLogOut {\n      didRequest\n    }\n  }\n`;\n","import { useQuery } from \"@apollo/client\";\nimport React, { ComponentType, PropsWithChildren } from \"react\";\nimport { LoadingIndicator } from \"../../../../lib/components\";\nimport { REPORT } from \"../../../../lib/graphql/queries\";\nimport {\n  Report as ReportData,\n  ReportVariables,\n} from \"../../../../lib/graphql/queries/Report/__generated__/Report\";\n\nexport const withReportPdfData = (\n  WrappedComponent: ComponentType<\n    PropsWithChildren<{ pdfData: string; closeReport: () => void }>\n  >\n) => {\n  return ({\n    children,\n    userAnswerIds,\n    closeReport,\n  }: PropsWithChildren<{\n    userAnswerIds: string[];\n    closeReport: () => void;\n  }>) => {\n    // Get PDF data.\n    const { data, loading } = useQuery<ReportData, ReportVariables>(REPORT, {\n      variables: {\n        userAnswerIds,\n      },\n      fetchPolicy: \"no-cache\",\n    });\n\n    if (loading || !data) {\n      return <LoadingIndicator />;\n    }\n\n    if (data.report && data.report.pdf) {\n      return (\n        <WrappedComponent pdfData={data.report.pdf} closeReport={closeReport}>\n          {children}\n        </WrappedComponent>\n      );\n    }\n\n    return null;\n  };\n};\n","/* tslint:disable */\n/* eslint-disable */\n// @generated\n// This file was automatically generated and should not be edited.\n\n//==============================================================\n// START Enums and Input Objects\n//==============================================================\n\nexport enum UsersFilter {\n  DATE_LATEST = \"DATE_LATEST\",\n  DATE_OLDEST = \"DATE_OLDEST\",\n}\n\nexport interface AddDiagnosisInput {\n  patientId: string;\n  diagnosis: string;\n}\n\nexport interface AddDoctorInput {\n  userName: string;\n  name: string;\n  password: string;\n}\n\nexport interface AgeRange {\n  min?: number | null;\n  max?: number | null;\n}\n\nexport interface CreateAccountInput {\n  userName: string;\n  password: string;\n  name: string;\n  education: string;\n  jobStatus: string;\n  gender: string;\n  marriageStatus: string;\n  age?: number | null;\n}\n\nexport interface DoctorLoginInput {\n  userName: string;\n  password: string;\n}\n\nexport interface LogInInput {\n  userName: string;\n  password: string;\n}\n\nexport interface SignUpDate {\n  year: number;\n  month: number;\n  day: number;\n}\n\nexport interface UserAnswerInput {\n  questionnaireId: string;\n  answers: number[];\n}\n\nexport interface UserLoginInput {\n  userName: string;\n  name: string;\n  education?: string | null;\n  jobStatus?: string | null;\n  gender?: string | null;\n  marriageStatus?: string | null;\n  age?: number | null;\n}\n\n//==============================================================\n// END Enums and Input Objects\n//==============================================================\n","import React from \"react\";\nimport { createStyles, makeStyles, Theme } from \"@material-ui/core/styles\";\nimport { AppBar, Button, Toolbar } from \"@material-ui/core\";\nimport logo from \"./assets/logo.png\";\nimport ExitToAppIcon from \"@material-ui/icons/ExitToApp\";\nimport { Viewer } from \"../../lib/type\";\nimport { useMutation } from \"@apollo/client\";\nimport { DOCTOR_LOG_OUT } from \"../../lib/graphql/mutations\";\nimport { Route, Switch, useHistory } from \"react-router-dom\";\nimport { PatientLogOut } from \"../../lib/graphql/mutations/PatientLogOut/__generated__/PatientLogOut\";\nimport { PATIENT_LOG_OUT } from \"../../lib/graphql/mutations/PatientLogOut\";\nimport { DoctorLogOut } from \"../../lib/graphql/mutations/DoctorLogOut/__generated__/doctorLogOut\";\n\nconst useStyles = makeStyles((theme: Theme) =>\n  createStyles({\n    root: {\n      flexGrow: 1,\n    },\n    header: {\n      zIndex: theme.zIndex.drawer + 1,\n    },\n    logo: {\n      marginRight: theme.spacing(2),\n      maxWidth: 30,\n      maxHeight: 30,\n    },\n    title: {\n      flexGrow: 1,\n      fontSize: \"1.25rem\",\n    },\n    timerHeader: {\n      overflow: \"hidden\",\n      backgroundColor: \"rgb(236, 238, 248)\",\n    },\n    actionContainer: {\n      float: \"right\",\n      paddingRight: 20,\n      paddingTop: 10,\n      fontSize: \"0.875rem\",\n      display: \"flex\",\n      alignItems: \"center\",\n    },\n  })\n);\n\ninterface Props {\n  viewer: Viewer;\n  setViewer: (viewer: Viewer) => void;\n  type: \"doctor\" | \"user\";\n}\n\nexport const AppHeader = (props: Props) => {\n  const { viewer, setViewer, type } = props;\n  const history = useHistory();\n\n  const [width, setWidth] = React.useState(window.innerWidth);\n\n  const updateWidth = () => {\n    if (window.innerWidth !== width) setWidth(window.innerWidth);\n  };\n\n  React.useEffect(() => {\n    window.addEventListener(\"resize\", updateWidth);\n    return () => window.removeEventListener(\"resize\", updateWidth);\n  });\n\n  const [logOut] = useMutation<DoctorLogOut>(DOCTOR_LOG_OUT, {\n    onCompleted: (data) => {\n      if (data && data.doctorLogOut.didRequest) {\n        setViewer(data.doctorLogOut);\n        sessionStorage.removeItem(\"token\");\n        console.log(\"log out successfully\");\n      }\n    },\n    onError: (error) => {\n      console.log(error);\n      console.log(\"log out failed\");\n    },\n  });\n  const [patientLogOut] = useMutation<PatientLogOut>(PATIENT_LOG_OUT, {\n    onCompleted: (data) => {\n      if (data && data.patientLogOut) {\n        setViewer(data.patientLogOut);\n        console.log(\"log out successfully\");\n      }\n    },\n    onError: (error) => {\n      console.log(error);\n      console.log(\"log out failed\");\n    },\n  });\n  const handleLogout = async () => {\n    if (type === \"doctor\") {\n      await logOut();\n      history.push(\"/doctor\");\n    } else {\n      await patientLogOut();\n      history.push(\"/user\");\n    }\n  };\n  const classes = useStyles();\n\n  return (\n    <Switch>\n      <Route path=\"/user/form\" exact />\n      <Route path=\"/\">\n        <div className={classes.root}>\n          <AppBar position=\"fixed\" className={classes.header}>\n            <Toolbar>\n              <img src={logo} alt=\"中大医院\" className={classes.logo} />\n              <div className={classes.title}>\n                {window.innerWidth >= 650\n                  ? \"东南大学附属中大医院心理健康评估系统\"\n                  : \"心理健康评估系统\"}\n              </div>\n\n              <Switch>\n                <Route path={[\"/doctor\", \"/user\"]}>\n                  {viewer && viewer.userName && (\n                    <Button\n                      color=\"inherit\"\n                      startIcon={<ExitToAppIcon />}\n                      onClick={handleLogout}\n                    >\n                      {type === \"doctor\" ? \"退出医生登录\" : \"退出系统\"}\n                    </Button>\n                  )}\n                </Route>\n              </Switch>\n            </Toolbar>\n          </AppBar>\n        </div>\n      </Route>\n    </Switch>\n  );\n};\n","import { createStyles, Divider, makeStyles, Theme } from \"@material-ui/core\";\nimport React from \"react\";\nimport { Viewer } from \"../../../../lib/type\";\n\ninterface Props {\n  viewer: Viewer;\n}\n\nconst checkIsFieldValid = (field: string | number | undefined | null) => {\n  return field !== undefined && field !== null && field !== \"\";\n};\n\nconst useStyles = makeStyles((theme: Theme) =>\n  createStyles({\n    propertyName: {\n      color: \"#5f6368\",\n      fontSize: \"0.75rem\",\n      margin: \"8px 0\",\n    },\n    propertyDivider: {\n      marginTop: 5,\n      marginBottom: 5,\n    },\n  })\n);\n\nconst fields = [\n  \"name\",\n  \"gender\",\n  \"age\",\n  \"education\",\n  \"jobStatus\",\n  \"marriageStatus\",\n] as const;\nconst displayNames = [\"姓名\", \"性别\", \"年龄\", \"教育\", \"工作\", \"婚姻\"];\nexport const PersonalInformation = (props: Props) => {\n  const classes = useStyles();\n  const { viewer } = props;\n  const validIndexes: number[] = [];\n  for (let i = 0; i < fields.length; i++) {\n    if (checkIsFieldValid(viewer[fields[i]])) {\n      validIndexes.push(i);\n    }\n  }\n  return (\n    <>\n      {validIndexes.map((validIndex, index) => (\n        <div key={`property-${index}`}>\n          <div className={classes.propertyName}>{displayNames[validIndex]}</div>\n          <div>{viewer[fields[validIndex]]}</div>\n          {index !== validIndexes.length - 1 ? (\n            <Divider className={classes.propertyDivider} />\n          ) : null}\n        </div>\n      ))}\n    </>\n  );\n};\n","import {\n  Card,\n  CardContent,\n  Chip,\n  createStyles,\n  Divider,\n  Drawer,\n  List,\n  ListItem,\n  ListItemIcon,\n  ListItemText,\n  makeStyles,\n  Theme,\n  Toolbar,\n} from \"@material-ui/core\";\nimport DescriptionIcon from \"@material-ui/icons/Description\";\nimport AssignmentIndIcon from \"@material-ui/icons/AssignmentInd\";\nimport React from \"react\";\nimport { Viewer } from \"../../lib/type\";\nimport { useHistory, useLocation } from \"react-router-dom\";\nimport { PersonalInformation } from \"./components\";\nimport PeopleIcon from \"@material-ui/icons/People\";\nimport LocalHospitalIcon from \"@material-ui/icons/LocalHospital\";\nimport LinkIcon from \"@material-ui/icons/Link\";\nimport NoteIcon from \"@material-ui/icons/Note\";\n\nconst drawerWidth = 240;\n\nconst useStyles = makeStyles((theme: Theme) =>\n  createStyles({\n    drawer: {\n      width: drawerWidth,\n      flexShrink: 0,\n      \"@media (max-width:780px)\": {\n        display: \"none\",\n      },\n    },\n    personalInfoCard: {\n      margin: 5,\n      overflow: \"auto\",\n    },\n    personalInfoCardContent: {\n      \"&:last-child\": {\n        paddingBottom: 16,\n      },\n    },\n    personalInfoText: {\n      fontWeight: 400,\n      fontSize: \"1.25rem\",\n      marginBottom: 10,\n    },\n    drawerPaper: {\n      width: drawerWidth,\n    },\n    idChip: {\n      marginTop: 3,\n      marginBottom: 3,\n    },\n    adminMenu: {\n      padding: 0,\n    },\n    adminMenuHeader: {\n      height: 48,\n      display: \"flex\",\n      alignItems: \"center\",\n      fontWeight: 500,\n      fontSize: \"1.125rem\",\n      paddingLeft: 10,\n    },\n    link: {\n      color: \"#111\",\n    },\n  })\n);\n\ninterface Props {\n  viewer: Viewer;\n  type: \"doctor\" | \"user\";\n}\n\nexport const Sider = (props: Props) => {\n  const classes = useStyles();\n  const history = useHistory();\n  const goToHome = () => {\n    history.push(\"/user/home\");\n  };\n  const goToReportPage = () => {\n    history.push(\"/user/report\");\n  };\n  const goToDoctorPage = () => {\n    history.push(`/doctor/${viewer.userName}`);\n  };\n  const goToDoctorManagePage = () => {\n    history.push(`/doctor/${viewer.userName}/manage`);\n  };\n  const location = useLocation();\n  const { viewer, type } = props;\n\n  const [width, setWidth] = React.useState(window.innerWidth);\n\n  const updateWidth = () => {\n    if (window.innerWidth !== width) setWidth(window.innerWidth);\n  };\n\n  React.useEffect(() => {\n    window.addEventListener(\"resize\", updateWidth);\n    return () => window.removeEventListener(\"resize\", updateWidth);\n  });\n\n  return (\n    <Drawer\n      className={classes.drawer}\n      variant=\"permanent\"\n      classes={{ paper: classes.drawerPaper }}\n      style={{\n        display:\n          type === \"doctor\" && window.innerWidth <= 1150 ? \"none\" : undefined,\n      }}\n    >\n      <Toolbar />\n      {type === \"doctor\" ? (\n        <>\n          <div className={classes.adminMenuHeader}>{viewer.name}医生已登入</div>\n          <Divider />\n          <List className={classes.adminMenu}>\n            <ListItem button key=\"patientInfo\" onClick={goToDoctorPage}>\n              <ListItemIcon>\n                <PeopleIcon\n                  color={\n                    location.pathname === `/doctor/${viewer.userName}`\n                      ? \"primary\"\n                      : \"inherit\"\n                  }\n                />\n              </ListItemIcon>\n              <ListItemText primary={\"病人信息\"} />\n            </ListItem>\n            <Divider />\n            <ListItem button key=\"doctorInfo\" onClick={goToDoctorManagePage}>\n              <ListItemIcon>\n                <LocalHospitalIcon\n                  color={\n                    location.pathname === `/doctor/${viewer.userName}/manage`\n                      ? \"primary\"\n                      : \"inherit\"\n                  }\n                />\n              </ListItemIcon>\n              <ListItemText primary={\"医生信息\"} />\n            </ListItem>\n            <Divider />\n            <a href=\"/user\" className={classes.link} target=\"_blank\">\n              <ListItem button key=\"doctorInfo\">\n                <ListItemIcon>\n                  <LinkIcon />\n                </ListItemIcon>\n                <ListItemText primary={\"患者端\"} />\n              </ListItem>\n            </a>\n            <Divider />\n          </List>\n        </>\n      ) : (\n        <>\n          <Card variant=\"outlined\" className={classes.personalInfoCard}>\n            <CardContent className={classes.personalInfoCardContent}>\n              <div className={classes.personalInfoText}>个人信息</div>\n              <div className={classes.idChip}>\n                <Chip\n                  size=\"small\"\n                  icon={<AssignmentIndIcon />}\n                  color=\"primary\"\n                  label={`门诊号：${viewer.userName}`}\n                  variant=\"outlined\"\n                />\n              </div>\n              <PersonalInformation viewer={viewer} />\n            </CardContent>\n          </Card>\n          <List>\n            <ListItem button key=\"form\" onClick={goToHome}>\n              <ListItemIcon>\n                <DescriptionIcon\n                  color={\n                    location.pathname === \"/user/home\" ? \"primary\" : \"inherit\"\n                  }\n                />\n              </ListItemIcon>\n              <ListItemText primary={\"量表\"} />\n            </ListItem>\n            <ListItem button key=\"report\" onClick={goToReportPage}>\n              <ListItemIcon>\n                <NoteIcon\n                  color={\n                    location.pathname === \"/user/report\" ? \"primary\" : \"inherit\"\n                  }\n                />\n              </ListItemIcon>\n              <ListItemText primary={\"报告\"} />\n            </ListItem>\n          </List>\n        </>\n      )}\n    </Drawer>\n  );\n};\n","import { createStyles, makeStyles, Theme } from \"@material-ui/core\";\nimport React from \"react\";\n\ninterface Props {\n  totalNumber: number;\n  currentIndex: number;\n}\nconst PROGRESS_BAR_WIDTH = 100;\nconst useStyles = makeStyles((theme: Theme) =>\n  createStyles({\n    root: {\n      width: PROGRESS_BAR_WIDTH,\n      backgroundColor: \"rgba(0, 0, 0, 0.12)\",\n      display: \"flex\",\n      marginRight: 10,\n      height: 12,\n      borderRadius: 6,\n    },\n    finished: {\n      width: 0,\n      height: 12,\n      borderRadius: \"6px 0 0 6px\",\n      backgroundColor: \"#5eb8ff\",\n      maxWidth: PROGRESS_BAR_WIDTH - 6,\n    },\n    leftCircle: {\n      borderRadius: \"6px 0 0 6px\",\n    },\n    circle: {\n      height: 12,\n      width: 12,\n      backgroundColor: \"#5eb8ff\",\n    },\n    circlewrapper: {\n      overflow: \"hidden\",\n    },\n    rightCircle: {\n      borderRadius: 6,\n      backgroundColor: \"#5eb8ff\",\n    },\n    rightCircleWrapper: {\n      marginLeft: -6,\n    },\n  })\n);\n\nexport const ProgressBar = ({ totalNumber, currentIndex }: Props) => {\n  const classes = useStyles();\n  const widthOfFinishedPart =\n    (PROGRESS_BAR_WIDTH * (currentIndex + 1)) / totalNumber;\n  return (\n    <div className={classes.root}>\n      {widthOfFinishedPart > 12 ? (\n        <>\n          <div\n            className={classes.finished}\n            style={{\n              width: widthOfFinishedPart,\n            }}\n          />\n          {PROGRESS_BAR_WIDTH - widthOfFinishedPart <= 6 ? (\n            <div\n              className={\n                classes.rightCircleWrapper + \" \" + classes.circlewrapper\n              }\n              style={{ width: 12 - (PROGRESS_BAR_WIDTH - widthOfFinishedPart) }}\n            >\n              <div className={classes.rightCircle + \" \" + classes.circle} />\n            </div>\n          ) : null}\n        </>\n      ) : (\n        <div\n          className={classes.circlewrapper}\n          style={{\n            width: widthOfFinishedPart,\n          }}\n        >\n          <div className={classes.leftCircle + \" \" + classes.circle} />\n        </div>\n      )}\n    </div>\n  );\n};\n","import React, { useEffect, useState } from \"react\";\nimport { Timer as TimerIcon } from \"@material-ui/icons\";\nimport { createStyles, makeStyles, Theme } from \"@material-ui/core\";\n\nconst useStyles = makeStyles((theme: Theme) =>\n  createStyles({\n    root: {\n      display: \"flex\",\n      alignItems: \"center\",\n    },\n    timeNumber: {\n      marginLeft: 10,\n      userSelect: \"none\",\n      WebkitUserSelect: \"none\",\n      WebkitTouchCallout: \"none\",\n      KhtmlUserSelect: \"none\",\n      MozUserSelect: \"none\",\n      msUserSelect: \"none\",\n    },\n  })\n);\nexport const Timer = () => {\n  const classes = useStyles();\n  const [seconds, setSeconds] = useState(0);\n  useEffect(() => {\n    const interval = setTimeout(() => {\n      setSeconds(seconds + 1);\n    }, 1000);\n    return () => {\n      clearTimeout(interval);\n    };\n  }, [seconds]);\n  const hour = Math.floor(seconds / 3600);\n  const minute = Math.floor(seconds / 60);\n  const second = seconds % 60;\n  return (\n    <div className={classes.root}>\n      <TimerIcon />\n      <span className={classes.timeNumber}>{`${hour < 10 ? \"0\" + hour : hour}:${\n        minute < 10 ? \"0\" + minute : minute\n      }:${second < 10 ? \"0\" + second : second}`}</span>\n    </div>\n  );\n};\n","export const psqiValidation = (\n  currentQuestionIndex: number,\n  value: number | string,\n  setErrorMessage: (errorMessage: string) => void,\n  showError: () => void\n) => {\n  console.log(currentQuestionIndex, value);\n  if (value === undefined || value === null || value === \"\") {\n    setErrorMessage(\"未填写数值！\");\n    showError();\n    return false;\n  }\n  if (currentQuestionIndex === 0) {\n    if (value >= 24 || value < 0) {\n      setErrorMessage(\"数值不符合要求！\");\n      showError();\n      return false;\n    }\n  } else if (currentQuestionIndex === 1) {\n    if (value >= 1440 || value < 0) {\n      setErrorMessage(\"数值不符合要求！\");\n      showError();\n      return false;\n    }\n  } else if (currentQuestionIndex === 2) {\n    if (value >= 24 || value < 0) {\n      setErrorMessage(\"数值不符合要求！\");\n      showError();\n      return false;\n    }\n  } else if (currentQuestionIndex === 3) {\n    if (value < 0 || value >= 24) {\n      setErrorMessage(\"数值不符合要求！\");\n      showError();\n      return false;\n    }\n  }\n  return true;\n};\n","import { useMutation, useQuery } from \"@apollo/client\";\nimport {\n  Button,\n  Card,\n  CardContent,\n  createStyles,\n  FormControl,\n  FormControlLabel,\n  makeStyles,\n  Radio,\n  Theme,\n  Link,\n  Fab,\n  useMediaQuery,\n  Dialog,\n  DialogActions,\n  DialogContent,\n  DialogContentText,\n  DialogTitle,\n  TextField,\n} from \"@material-ui/core\";\nimport React, {\n  SyntheticEvent,\n  useCallback,\n  useEffect,\n  useRef,\n  useState,\n} from \"react\";\nimport { useHistory, useLocation } from \"react-router-dom\";\nimport { ErrorIndicator, LoadingIndicator } from \"../../lib/components\";\nimport {\n  SAVE_PARTIAL_ANSWER,\n  SAVE_USER_ANSWER,\n} from \"../../lib/graphql/mutations\";\nimport {\n  SaveUserAnswer as SaveUserAnswerData,\n  SaveUserAnswerVariables,\n} from \"../../lib/graphql/mutations/SaveUserAnswer/__generated__/SaveUserAnswer\";\nimport { QUESTIONNAIRE_CONTENT } from \"../../lib/graphql/queries\";\nimport {\n  QuestionnaireContent as QuestionnaireContentData,\n  QuestionnaireContentVariables,\n} from \"../../lib/graphql/queries/QuestionnaireContent/__generated__/QuestionnaireContent\";\nimport { ProgressBar } from \"./Components\";\nimport DirectionsRunIcon from \"@material-ui/icons/DirectionsRun\";\nimport {\n  SavePartialAnswer as SavePartialAnswerData,\n  SavePartialAnswerVariables,\n} from \"../../lib/graphql/mutations/SavePartialAnswer/__generated__/SavePartialAnswer\";\nimport { Timer } from \"./Components\";\nimport { PSQI_FORM_KEY, YAML_BROWN_FORM_KEY } from \"../../lib/utils/constants\";\nimport {\n  yaleBrownCustomization,\n  yaleBrownSkipQuestions,\n} from \"./Customization\";\nimport { PRIMARY_COLOR } from \"../..\";\nimport { psqiValidation } from \"./Customization/psqi\";\n\nconst useStyles = makeStyles((theme: Theme) =>\n  createStyles({\n    formContainer: {\n      height: \"100%\",\n      width: \"100%\",\n      backgroundColor: \"#e8f1fd\",\n    },\n    form: {\n      width: 768,\n      maxWidth: \"90vw\",\n      margin: \"auto\",\n      paddingTop: 10,\n    },\n    titleCard: {\n      borderRadius: 8,\n      paddingBottom: 5,\n    },\n    titleCardColor: {\n      height: 10,\n      borderTopLeftRadius: 8,\n      borderTopRightRadius: 8,\n      backgroundColor: PRIMARY_COLOR,\n    },\n    titleCardContent: {\n      paddingTop: 5,\n      marginLeft: 5,\n      marginRight: 5,\n    },\n    titleCardMainText: {\n      fontSize: \"2rem\",\n      fontWeight: 400,\n      marginTop: 10,\n      marginBottom: 10,\n    },\n    questionCard: {\n      marginTop: 10,\n      borderRadius: 8,\n      marginBottom: 10,\n      paddingLeft: 5,\n      paddingRight: 5,\n    },\n    questionText: {\n      fontSize: \"1rem\",\n      fontWeight: 400,\n      marginBottom: 16,\n      marginTop: 10,\n      lineHeight: \"1.4rem\",\n    },\n    questionOptionText: {\n      fontSize: \"0.9rem\",\n      userSelect: \"none\",\n      WebkitUserSelect: \"none\",\n      WebkitTouchCallout: \"none\",\n      KhtmlUserSelect: \"none\",\n      MozUserSelect: \"none\",\n      msUserSelect: \"none\",\n    },\n    button: {\n      backgroundColor: \"#fff\",\n      color: PRIMARY_COLOR,\n      \"&:hover\": {\n        backgroundColor: \"#fff\",\n      },\n    },\n    buttonWithRightMargin: {\n      marginRight: 10,\n    },\n    finishedText: {\n      fontSize: \"0.875rem\",\n      marginTop: 26,\n      marginBottom: 26,\n    },\n    homeLink: {\n      fontSize: \"0.875rem\",\n    },\n    exitButton: {\n      position: \"absolute\",\n      right: 20,\n      bottom: 20,\n      backgroundColor: \"#fff\",\n      \"&:hover\": {\n        backgroundColor: \"#fff\",\n      },\n    },\n    timerContaner: {\n      position: \"absolute\",\n      left: 20,\n      bottom: 20,\n    },\n    footer: {\n      display: \"flex\",\n      justifyContent: \"space-between\",\n      alignItems: \"center\",\n    },\n    progressWrapper: {\n      display: \"flex\",\n      alignItems: \"center\",\n      userSelect: \"none\",\n      WebkitUserSelect: \"none\",\n      WebkitTouchCallout: \"none\",\n      KhtmlUserSelect: \"none\",\n      MozUserSelect: \"none\",\n      msUserSelect: \"none\",\n    },\n    progressWrapperForSmallScreen: {\n      marginTop: 20,\n    },\n    questionParent: {\n      lineHeight: \"1.4rem\",\n      color: \"#757575\",\n    },\n    answerInput: {\n      marginRight: 10,\n      marginLeft: 10,\n    },\n  })\n);\n\nexport const Form = () => {\n  const isSmallScreen = useMediaQuery(\"(max-width:780px)\");\n  const classes = useStyles();\n  const query = new URLSearchParams(useLocation().search);\n  const id = query.get(\"id\");\n  const { loading, data } = useQuery<\n    QuestionnaireContentData,\n    QuestionnaireContentVariables\n  >(QUESTIONNAIRE_CONTENT, {\n    variables: {\n      id: id || \"\",\n    },\n    onCompleted: (data: QuestionnaireContentData) => {\n      const { partialAnswer } = data;\n      setChoiceDisabled(\n        data.questionnaire.questions.map((question) => {\n          return question.choices.map((choice) => false);\n        })\n      );\n\n      if (partialAnswer?.answers?.length) {\n        if (\n          partialAnswer.answers.length === data.questionnaire.questions.length\n        ) {\n          setIsAllowedToSubmit(true);\n        }\n        const newAnswers = {} as { [index: number]: number };\n        let unfinishedQuestionIndex: number | undefined = undefined;\n        partialAnswer.answers.forEach((answer, index) => {\n          if (answer !== -1) newAnswers[index] = answer;\n          else if (unfinishedQuestionIndex === undefined)\n            unfinishedQuestionIndex = index;\n        });\n        setAnswers(newAnswers);\n        if (unfinishedQuestionIndex === undefined)\n          setCurrentQuestionIndex(\n            Math.min(\n              partialAnswer.answers.length,\n              data.questionnaire.questions.length - 1\n            )\n          );\n        else setCurrentQuestionIndex(unfinishedQuestionIndex);\n      }\n    },\n    fetchPolicy: \"no-cache\",\n  });\n\n  const [saveUserAnswer] = useMutation<\n    SaveUserAnswerData,\n    SaveUserAnswerVariables\n  >(SAVE_USER_ANSWER, {\n    onCompleted: (data) => {\n      if (data.saveUserAnswer.didRequest) {\n        setIsDone(true);\n      }\n    },\n  });\n\n  const [savePartialAnswer] = useMutation<\n    SavePartialAnswerData,\n    SavePartialAnswerVariables\n  >(SAVE_PARTIAL_ANSWER);\n\n  const saveUserAnswerRef = useRef(saveUserAnswer);\n  const savePartialAnswerRef = useRef(savePartialAnswer);\n  const timeoutRef = useRef<NodeJS.Timeout | null>(null);\n  const autoSaveTimeoutRef = useRef<NodeJS.Timeout | null>(null);\n  const [currentQuestionIndex, setCurrentQuestionIndex] = useState<number>(0);\n  const [choiceDisabled, setChoiceDisabled] = useState<null | boolean[][]>();\n  const [answers, setAnswers] = useState<{ [index: number]: number }>({});\n  const [isDone, setIsDone] = useState(false);\n  const [isAllowedToSubmit, setIsAllowedToSubmit] = useState(false);\n  const [isNextButtonDisabled, setIsNextButtonDisabled] = useState(false);\n  const [confirmed, setConfirmed] = useState(false);\n  const history = useHistory();\n  const selectChoiceLockRef = useRef(false);\n  const [isErrorShown, setIsErrorShown] = useState(false);\n  const [errorMessage, setErrorMessage] = useState(\"\");\n  const showError = () => {\n    setIsErrorShown(true);\n  };\n\n  const getAnswerArray = useCallback((): number[] => {\n    const questionnaire = data?.questionnaire;\n    if (!questionnaire) {\n      return [];\n    }\n    const answerArray = [];\n    for (let i = 0; i < questionnaire.questions.length; i++) {\n      if (answers[i] !== undefined) answerArray.push(answers[i]);\n      else answerArray.push(-1);\n    }\n    return answerArray;\n  }, [answers, data?.questionnaire]);\n  const savePartialAnswerToBackend = useCallback(() => {\n    const answerArray = getAnswerArray();\n    if (id && answerArray.length !== 0)\n      return savePartialAnswerRef.current({\n        variables: {\n          input: { questionnaireId: id, answers: answerArray },\n        },\n      });\n    return Promise.resolve();\n  }, [getAnswerArray, id]);\n  useEffect(() => {\n    autoSaveTimeoutRef.current = setInterval(() => {\n      savePartialAnswerToBackend();\n    }, 10000);\n    return () => {\n      if (autoSaveTimeoutRef.current) {\n        clearInterval(autoSaveTimeoutRef.current);\n        autoSaveTimeoutRef.current = null;\n      }\n    };\n  }, [savePartialAnswerToBackend]);\n\n  if (loading) {\n    return <LoadingIndicator />;\n  }\n  if (!data) {\n    return <div>Error</div>;\n  }\n\n  const { questionnaire } = data;\n\n  const closeConfirmDialog = () => {\n    setConfirmed(true);\n  };\n\n  const validation = async (all = false) => {\n    if (questionnaire.key === PSQI_FORM_KEY) {\n      if (all === true) {\n        for (let i = 0; i < questionnaire.questions.length; i++) {\n          if (!psqiValidation(i, answers[i], setErrorMessage, showError)) {\n            return false;\n          }\n        }\n        return true;\n      }\n      return psqiValidation(\n        currentQuestionIndex,\n        answers[currentQuestionIndex],\n        setErrorMessage,\n        showError\n      );\n    }\n    return true;\n  };\n  const onNextButtonClick = async () => {\n    const validationResult = await validation();\n    if (validationResult === false) {\n      return;\n    }\n    setCurrentQuestionIndex(currentQuestionIndex + 1);\n    if (timeoutRef.current) {\n      clearTimeout(timeoutRef.current);\n    }\n  };\n\n  const onSubmit = async () => {\n    const validationResult = await validation(true);\n    if (validationResult === false) {\n      return;\n    }\n    if (autoSaveTimeoutRef.current) {\n      clearTimeout(autoSaveTimeoutRef.current);\n      autoSaveTimeoutRef.current = null;\n    }\n    if (id) {\n      const answerArray = getAnswerArray();\n      saveUserAnswerRef.current({\n        variables: {\n          input: { questionnaireId: id, answers: answerArray },\n        },\n      });\n    }\n  };\n\n  const onBackButtonClick = async () => {\n    // const validationResult = await validation();\n    // if (validationResult === false) {\n    //   return;\n    // }\n    setCurrentQuestionIndex(currentQuestionIndex - 1);\n    if (timeoutRef.current) {\n      clearTimeout(timeoutRef.current);\n    }\n  };\n\n  const goToHome = () => {\n    history.push(\"/user/home\");\n  };\n\n  const handleExitButtonClick = async () => {\n    if (autoSaveTimeoutRef.current) {\n      clearTimeout(autoSaveTimeoutRef.current);\n      autoSaveTimeoutRef.current = null;\n    }\n    await savePartialAnswerToBackend();\n    goToHome();\n  };\n\n  const goToHomeLinkOnClick = (e: SyntheticEvent) => {\n    e.preventDefault();\n    goToHome();\n  };\n  const onAnswerInputChange = (e: React.ChangeEvent<HTMLInputElement>) => {\n    const newAnswers = { ...answers };\n    console.log(e.target.value);\n    if (\n      e.target.value !== undefined &&\n      e.target.value !== null &&\n      e.target.value !== \"\"\n    )\n      newAnswers[currentQuestionIndex] = Number(e.target.value);\n    else delete newAnswers[currentQuestionIndex];\n    setAnswers(newAnswers);\n  };\n  const radioButtonOnClick = (\n    e: React.MouseEvent<HTMLLabelElement>,\n    index: number,\n    questionIndex: number\n  ) => {\n    if (\n      selectChoiceLockRef.current ||\n      (choiceDisabled && choiceDisabled[currentQuestionIndex][index])\n    ) {\n      return;\n    }\n    const newAnswers = { ...answers };\n    newAnswers[currentQuestionIndex] = index;\n    if (questionnaire.key === YAML_BROWN_FORM_KEY) {\n      yaleBrownCustomization(\n        setAnswers,\n        setChoiceDisabled,\n        choiceDisabled,\n        newAnswers,\n        currentQuestionIndex\n      );\n    } else {\n      setAnswers(newAnswers);\n    }\n    if (currentQuestionIndex !== questionnaire.questions.length - 1) {\n      setIsNextButtonDisabled(true);\n      selectChoiceLockRef.current = true;\n      const timeout = setTimeout(() => {\n        if (questionnaire.key === YAML_BROWN_FORM_KEY) {\n          yaleBrownSkipQuestions(\n            currentQuestionIndex,\n            setCurrentQuestionIndex,\n            index,\n            setIsAllowedToSubmit\n          );\n        } else {\n          setCurrentQuestionIndex(currentQuestionIndex + 1);\n          if (timeoutRef.current) {\n            clearTimeout(timeoutRef.current);\n          }\n        }\n        setIsNextButtonDisabled(false);\n        selectChoiceLockRef.current = false;\n      }, 190);\n      timeoutRef.current = timeout;\n    } else {\n      setIsAllowedToSubmit(true);\n    }\n  };\n\n  const currentQuestion = questionnaire.questions[currentQuestionIndex];\n  return (\n    <div className={classes.formContainer}>\n      <div className={classes.form}>\n        <Card className={classes.titleCard} variant=\"outlined\">\n          <div className={classes.titleCardColor} />\n          <CardContent className={classes.titleCardContent}>\n            <div className={classes.titleCardMainText}>\n              {questionnaire.name}\n            </div>\n            {isDone && (\n              <>\n                <div className={classes.finishedText}>\n                  您已完成此量表的填写。\n                </div>\n                <Link\n                  onClick={goToHomeLinkOnClick}\n                  className={classes.homeLink}\n                  href=\"/\"\n                >\n                  回到主页\n                </Link>\n              </>\n            )}\n          </CardContent>\n        </Card>\n        {!isDone && (\n          <>\n            <Card className={classes.questionCard} variant=\"outlined\">\n              <CardContent>\n                {currentQuestion.parent ? (\n                  <div className={classes.questionParent}>\n                    {currentQuestion.parent}\n                  </div>\n                ) : null}\n                <div className={classes.questionText}>\n                  {currentQuestion.choices.length === 0 &&\n                  currentQuestion.content &&\n                  currentQuestion.content.includes(\"{input}\") ? (\n                    <>\n                      {currentQuestion.content.split(\"{input}\")[0]}\n                      <TextField\n                        type=\"number\"\n                        className={classes.answerInput}\n                        value={\n                          answers[currentQuestionIndex] !== null &&\n                          answers[currentQuestionIndex] !== undefined\n                            ? answers[currentQuestionIndex]\n                            : \"\"\n                        }\n                        onChange={onAnswerInputChange}\n                      />\n                      {currentQuestion.content.split(\"{input}\")[1]}\n                    </>\n                  ) : (\n                    currentQuestion.content\n                  )}\n                </div>\n                <FormControl component=\"fieldset\">\n                  {currentQuestion.choices.map((choice, index) => (\n                    <FormControlLabel\n                      value={choice}\n                      control={<Radio color=\"primary\" />}\n                      key={`choice-${index}`}\n                      label={\n                        <span className={classes.questionOptionText}>\n                          {choice}\n                        </span>\n                      }\n                      disabled={\n                        choiceDisabled &&\n                        choiceDisabled[currentQuestionIndex][index]\n                          ? true\n                          : undefined\n                      }\n                      checked={answers[currentQuestionIndex] === index}\n                      onClick={(e: React.MouseEvent<HTMLLabelElement>) =>\n                        radioButtonOnClick(e, index, currentQuestionIndex)\n                      }\n                    />\n                  ))}\n                </FormControl>\n              </CardContent>\n            </Card>\n\n            <div className={isSmallScreen ? \"\" : classes.footer}>\n              <div>\n                <Button\n                  className={\n                    classes.buttonWithRightMargin + \" \" + classes.button\n                  }\n                  variant=\"contained\"\n                  onClick={onBackButtonClick}\n                  disabled={currentQuestionIndex !== 0 ? false : true}\n                >\n                  上一题\n                </Button>\n                <Button\n                  className={\n                    classes.buttonWithRightMargin + \" \" + classes.button\n                  }\n                  variant=\"contained\"\n                  onClick={onNextButtonClick}\n                  disabled={\n                    (currentQuestionIndex ===\n                      questionnaire.questions.length - 1 ||\n                      answers[currentQuestionIndex] === undefined ||\n                      isNextButtonDisabled) &&\n                    !(\n                      answers[currentQuestionIndex] !== undefined &&\n                      answers[currentQuestionIndex + 1] !== undefined\n                    )\n                      ? true\n                      : false\n                  }\n                >\n                  下一题\n                </Button>\n                <Button\n                  variant=\"contained\"\n                  color=\"primary\"\n                  onClick={onSubmit}\n                  disabled={!isAllowedToSubmit}\n                >\n                  提交\n                </Button>\n              </div>\n              <div\n                className={\n                  classes.progressWrapper +\n                  \" \" +\n                  (isSmallScreen ? classes.progressWrapperForSmallScreen : \"\")\n                }\n              >\n                <ProgressBar\n                  totalNumber={questionnaire.questions.length}\n                  currentIndex={currentQuestionIndex}\n                />\n                {`第 ${currentQuestionIndex + 1} 题（共\n                 ${questionnaire.questions.length} 题）`}\n              </div>\n            </div>\n            <div className={classes.timerContaner}>\n              <Timer />\n            </div>\n            <Fab\n              className={classes.exitButton}\n              onClick={handleExitButtonClick}\n              variant=\"extended\"\n            >\n              <DirectionsRunIcon color=\"primary\" />\n              暂存并退出\n            </Fab>\n          </>\n        )}\n      </div>\n      <Dialog\n        open={!confirmed && !!questionnaire.instruction}\n        onClose={closeConfirmDialog}\n      >\n        <DialogTitle>指导语</DialogTitle>\n        <DialogContent>\n          <DialogContentText>{questionnaire.instruction}</DialogContentText>\n        </DialogContent>\n        <DialogActions>\n          <Button onClick={closeConfirmDialog} color=\"primary\" autoFocus>\n            继续\n          </Button>\n        </DialogActions>\n      </Dialog>\n      <ErrorIndicator\n        showError={isErrorShown}\n        setShowError={setIsErrorShown}\n        errorMessage={errorMessage}\n      />\n    </div>\n  );\n};\n","export const yaleBrownCustomization = (\n  setAnswers: (\n    value: React.SetStateAction<{\n      [index: number]: number;\n    }>\n  ) => void,\n  setChoiceDisabled: (\n    value: React.SetStateAction<boolean[][] | null | undefined>\n  ) => void,\n  choiceDisabled: boolean[][] | null | undefined,\n  newAnswers: {\n    [x: number]: number;\n  },\n  currentQuestionIndex: number\n) => {\n  if (currentQuestionIndex === 0) {\n    const autoChooseChoices = [1, 2, 3, 4];\n    if (newAnswers[currentQuestionIndex] === 0) {\n      for (const autoChooseChoiceIndex of autoChooseChoices) {\n        newAnswers[autoChooseChoiceIndex] = 0;\n      }\n      setAnswers(newAnswers);\n      if (choiceDisabled) {\n        const newChoiceDisabled = choiceDisabled.map((choices) => [...choices]);\n        for (const autoChooseChoiceIndex of autoChooseChoices) {\n          for (\n            let i = 0;\n            i < newChoiceDisabled[autoChooseChoiceIndex].length;\n            i++\n          ) {\n            if (i !== 0) {\n              newChoiceDisabled[autoChooseChoiceIndex][i] = true;\n            }\n          }\n        }\n        setChoiceDisabled(newChoiceDisabled);\n      }\n    } else {\n      setAnswers(newAnswers);\n      if (choiceDisabled) {\n        const newChoiceDisabled = choiceDisabled.map((choices) => [...choices]);\n        for (const autoChooseChoiceIndex of autoChooseChoices) {\n          for (\n            let i = 0;\n            i < newChoiceDisabled[autoChooseChoiceIndex].length;\n            i++\n          ) {\n            if (i !== 0) {\n              newChoiceDisabled[autoChooseChoiceIndex][i] = false;\n            }\n          }\n        }\n        setChoiceDisabled(newChoiceDisabled);\n      }\n    }\n  } else if (currentQuestionIndex === 5) {\n    const autoChooseChoices = [6, 7, 8, 9];\n    if (newAnswers[currentQuestionIndex] === 0) {\n      for (const autoChooseChoiceIndex of autoChooseChoices) {\n        newAnswers[autoChooseChoiceIndex] = 0;\n      }\n      setAnswers(newAnswers);\n      if (choiceDisabled) {\n        const newChoiceDisabled = choiceDisabled.map((choices) => [...choices]);\n        for (const autoChooseChoiceIndex of autoChooseChoices) {\n          for (\n            let i = 0;\n            i < newChoiceDisabled[autoChooseChoiceIndex].length;\n            i++\n          ) {\n            if (i !== 0) {\n              newChoiceDisabled[autoChooseChoiceIndex][i] = true;\n            }\n          }\n        }\n        setChoiceDisabled(newChoiceDisabled);\n      }\n    } else {\n      setAnswers(newAnswers);\n      if (choiceDisabled) {\n        const newChoiceDisabled = choiceDisabled.map((choices) => [...choices]);\n        for (const autoChooseChoiceIndex of autoChooseChoices) {\n          for (\n            let i = 0;\n            i < newChoiceDisabled[autoChooseChoiceIndex].length;\n            i++\n          ) {\n            if (i !== 0) {\n              newChoiceDisabled[autoChooseChoiceIndex][i] = false;\n            }\n          }\n        }\n        setChoiceDisabled(newChoiceDisabled);\n      }\n    }\n  } else {\n    setAnswers(newAnswers);\n  }\n};\n\nexport const yaleBrownSkipQuestions = (\n  currentQuestionnIndex: number,\n  setCurrentQuestionIndex: (value: React.SetStateAction<number>) => void,\n  choice: number,\n  setIsAllowedToSubmit: (value: React.SetStateAction<boolean>) => void\n) => {\n  if (currentQuestionnIndex === 0 && choice === 0) {\n    setCurrentQuestionIndex(5);\n  } else if (currentQuestionnIndex === 5 && choice === 0) {\n    setCurrentQuestionIndex(9);\n    setIsAllowedToSubmit(true);\n  } else {\n    setCurrentQuestionIndex(currentQuestionnIndex + 1);\n  }\n};\n","import { useMutation } from \"@apollo/client\";\nimport {\n  Button,\n  Card,\n  CardContent,\n  createStyles,\n  FormControl,\n  InputLabel,\n  makeStyles,\n  MenuItem,\n  Select,\n  TextField,\n  Theme,\n  Toolbar,\n} from \"@material-ui/core\";\nimport React, { useState } from \"react\";\nimport { Link, Redirect } from \"react-router-dom\";\nimport { ErrorIndicator } from \"../../lib/components\";\nimport { CREATE_ACCOUNT } from \"../../lib/graphql/mutations\";\nimport {\n  CreateAccount as CreateAccountData,\n  CreateAccountVariables,\n} from \"../../lib/graphql/mutations/CreateAccount/__generated__/CreateAccount\";\nimport { Viewer } from \"../../lib/type\";\n\nconst useStyles = makeStyles((theme: Theme) =>\n  createStyles({\n    createAccountCard: {\n      borderRadius: 8,\n      width: 800,\n      margin: \"30px auto 0\",\n    },\n    createAccountText: {\n      fontSize: \"1.5rem\",\n      textAlign: \"left\",\n      marginBottom: 10,\n      marginTop: 15,\n      paddingLeft: 40,\n    },\n    promptText: {\n      marginBottom: 24,\n      marginLeft: 40,\n      fontSize: \"1rem\",\n    },\n    inputContainer: {\n      margin: \"0 40px\",\n    },\n    input: {\n      width: \"30%\",\n      paddingRight: 10,\n      marginBottom: 10,\n    },\n    buttonContainer: {\n      marginTop: 30,\n      marginLeft: 40,\n      marginRight: 40,\n      marginBottom: 30,\n      display: \"flex\",\n      justifyContent: \"space-between\",\n    },\n    formClassifyText: {\n      color: \"#5f6368\",\n      fontSize: \"0.8em\",\n      marginBottom: 5,\n      marginTop: 10,\n    },\n  })\n);\n\ninterface Props {\n  isAuthorized: boolean;\n  setViewer: (viewer: Viewer) => void;\n}\n\ninterface UserInfo {\n  name: string;\n  userName: string;\n  gender: string;\n  password: string;\n  education: string;\n  marriageStatus: string;\n  jobStatus: string;\n  age: string;\n}\n\nconst initialUserInfo = {\n  name: \"\",\n  userName: \"\",\n  gender: \"\",\n  password: \"\",\n  education: \"\",\n  marriageStatus: \"\",\n  jobStatus: \"\",\n  age: \"\",\n};\n\nexport const CreateAccount = ({ isAuthorized, setViewer }: Props) => {\n  const classes = useStyles();\n  const [userInfo, setUserInfo] = useState<UserInfo>(initialUserInfo);\n  const [reenteredPassword, setReenteredPassword] = useState<string>(\"\");\n  const [createAccount] = useMutation<\n    CreateAccountData,\n    CreateAccountVariables\n  >(CREATE_ACCOUNT, {\n    onCompleted: (data) => {\n      if (data && data.createAccount && data.createAccount.token) {\n        setViewer(data.createAccount);\n      }\n    },\n    onError: (error) => {\n      if (\n        error.message.includes(\"One user with this userName already exists.\")\n      ) {\n        setErrorMessage(\"此门诊号已被注册！\");\n        setShowError(true);\n        setErrorField(\"userNameDuplicate\");\n      }\n    },\n  });\n  const [errorMessage, setErrorMessage] = useState<string>(\"\");\n  const [showError, setShowError] = useState(false);\n  const [errorField, setErrorField] = useState<string>();\n  const createAccountButtonOnClick = () => {\n    if (!userInfo.userName) {\n      setErrorMessage(\"请输入您的门诊号！\");\n      setShowError(true);\n      setErrorField(\"userName\");\n      return;\n    }\n    if (!userInfo.password) {\n      setErrorMessage(\"请输入您的密码！\");\n      setShowError(true);\n      setErrorField(\"password\");\n      return;\n    }\n    if (!reenteredPassword) {\n      setErrorMessage(\"请确认您输入的密码！\");\n      setShowError(true);\n      setErrorField(\"reenteredPassword\");\n      return;\n    }\n    if (userInfo.password !== reenteredPassword) {\n      setErrorMessage(\"两次输入的密码不一致！\");\n      setShowError(true);\n      setErrorField(\"reenteredPasswordNotSame\");\n      return;\n    }\n    if (!userInfo.name) {\n      setErrorMessage(\"请输入您的姓名！\");\n      setShowError(true);\n      setErrorField(\"name\");\n      return;\n    }\n    createAccount({\n      variables: {\n        input: {\n          ...userInfo,\n          age: userInfo.age === \"\" ? undefined : Number(userInfo.age),\n        },\n      },\n    });\n  };\n  const onUserNameChange = (e: React.ChangeEvent<HTMLInputElement>) => {\n    setUserInfo({ ...userInfo, userName: e.target.value });\n    if (\n      errorField === \"userName\" ||\n      (errorField === \"userNameDuplicate\" && e.target.value)\n    ) {\n      setErrorField(undefined);\n    }\n  };\n  const onPasswordChange = (e: React.ChangeEvent<HTMLInputElement>) => {\n    setUserInfo({ ...userInfo, password: e.target.value });\n    if (errorField === \"password\" && e.target.value) {\n      setErrorField(undefined);\n    }\n  };\n  const onReenteredPasswordChange = (\n    e: React.ChangeEvent<HTMLInputElement>\n  ) => {\n    setReenteredPassword(e.target.value);\n    if (errorField === \"reenteredPassword\" && e.target.value) {\n      setErrorField(undefined);\n    } else if (\n      errorField === \"reenteredPasswordNotSame\" &&\n      e.target.value === userInfo.password\n    ) {\n      setErrorField(undefined);\n    }\n  };\n  const onNameChange = (e: React.ChangeEvent<HTMLInputElement>) => {\n    setUserInfo({ ...userInfo, name: e.target.value });\n    if (errorField === \"name\" && e.target.value) {\n      setErrorField(undefined);\n    }\n  };\n  const onGenderChange = (\n    e: React.ChangeEvent<{\n      name?: string | undefined;\n      value: unknown;\n    }>\n  ) => {\n    setUserInfo({ ...userInfo, gender: e.target.value as string });\n  };\n  const onAgeChange = (e: React.ChangeEvent<HTMLInputElement>) => {\n    setUserInfo({ ...userInfo, age: e.target.value });\n  };\n  const onEducationChange = (\n    e: React.ChangeEvent<{\n      name?: string | undefined;\n      value: unknown;\n    }>\n  ) => {\n    setUserInfo({ ...userInfo, education: e.target.value as string });\n  };\n  const onJobChange = (e: React.ChangeEvent<HTMLInputElement>) => {\n    setUserInfo({ ...userInfo, jobStatus: e.target.value });\n  };\n  const onMarraigeChange = (\n    e: React.ChangeEvent<{\n      name?: string | undefined;\n      value: unknown;\n    }>\n  ) => {\n    setUserInfo({ ...userInfo, marriageStatus: e.target.value as string });\n  };\n  if (isAuthorized) {\n    return <Redirect to=\"/\" />;\n  }\n  return (\n    <>\n      <Toolbar />\n      <Card className={classes.createAccountCard} variant=\"outlined\">\n        <CardContent>\n          <div className={classes.createAccountText}>注册</div>\n          <div className={classes.promptText}>请输入您的个人信息</div>\n          <form>\n            <div className={classes.inputContainer}>\n              <div className={classes.formClassifyText}>登录信息</div>\n              <div>\n                <TextField\n                  required\n                  className={classes.input}\n                  color=\"primary\"\n                  label=\"门诊号\"\n                  size=\"small\"\n                  value={userInfo.userName}\n                  onChange={onUserNameChange}\n                  helperText={\n                    errorField === \"userName\"\n                      ? \"请输入您的门诊号！\"\n                      : errorField === \"userNameDuplicate\"\n                      ? \"此门诊号已被注册！\"\n                      : undefined\n                  }\n                  error={\n                    errorField === \"userName\" ||\n                    errorField === \"userNameDuplicate\"\n                      ? true\n                      : undefined\n                  }\n                />\n              </div>\n              <div>\n                <TextField\n                  required\n                  className={classes.input}\n                  color=\"primary\"\n                  type=\"password\"\n                  label=\"密码\"\n                  size=\"small\"\n                  value={userInfo.password}\n                  onChange={onPasswordChange}\n                  helperText={\n                    errorField === \"password\" ? \"请输入您的密码！\" : undefined\n                  }\n                  error={errorField === \"password\" ? true : undefined}\n                />\n                <TextField\n                  required\n                  type=\"password\"\n                  className={classes.input}\n                  color=\"primary\"\n                  label=\"确认密码\"\n                  size=\"small\"\n                  value={reenteredPassword}\n                  onChange={onReenteredPasswordChange}\n                  helperText={\n                    errorField === \"reenteredPassword\"\n                      ? \"请确认您的密码！\"\n                      : errorField === \"reenteredPasswordNotSame\"\n                      ? \"两次输入的密码不一致！\"\n                      : undefined\n                  }\n                  error={\n                    errorField === \"reenteredPassword\" ||\n                    errorField === \"reenteredPasswordNotSame\"\n                      ? true\n                      : undefined\n                  }\n                />\n              </div>\n              <div className={classes.formClassifyText}>个人信息</div>\n              <TextField\n                required\n                className={classes.input}\n                color=\"primary\"\n                label=\"姓名\"\n                size=\"small\"\n                value={userInfo.name}\n                onChange={onNameChange}\n                helperText={\n                  errorField === \"name\" ? \"请输入您的姓名!\" : undefined\n                }\n                error={errorField === \"name\" ? true : undefined}\n              />\n              <FormControl className={classes.input} size=\"small\">\n                <InputLabel>性别</InputLabel>\n                <Select\n                  color=\"primary\"\n                  label=\"性别\"\n                  value={userInfo.gender}\n                  onChange={onGenderChange}\n                >\n                  <MenuItem value=\"男\">男</MenuItem>\n                  <MenuItem value=\"女\">女</MenuItem>\n                </Select>\n              </FormControl>\n              <TextField\n                className={classes.input}\n                color=\"primary\"\n                label=\"年龄\"\n                size=\"small\"\n                value={userInfo.age}\n                onChange={onAgeChange}\n              />\n              <FormControl className={classes.input} size=\"small\">\n                <InputLabel>教育</InputLabel>\n                <Select\n                  color=\"primary\"\n                  value={userInfo.education}\n                  onChange={onEducationChange}\n                >\n                  <MenuItem value=\"高中以下\">高中以下</MenuItem>\n                  <MenuItem value=\"大中专科\">大中专科</MenuItem>\n                  <MenuItem value=\"本科\">本科</MenuItem>\n                  <MenuItem value=\"硕士\">硕士</MenuItem>\n                  <MenuItem value=\"博士\">博士</MenuItem>\n                </Select>\n              </FormControl>\n              <TextField\n                className={classes.input}\n                color=\"primary\"\n                label=\"职业\"\n                size=\"small\"\n                value={userInfo.jobStatus}\n                onChange={onJobChange}\n              />\n              <FormControl className={classes.input} size=\"small\">\n                <InputLabel>婚姻</InputLabel>\n                <Select\n                  color=\"primary\"\n                  value={userInfo.marriageStatus}\n                  onChange={onMarraigeChange}\n                >\n                  <MenuItem value=\"已婚\">已婚</MenuItem>\n                  <MenuItem value=\"未婚\">未婚</MenuItem>\n                </Select>\n              </FormControl>\n            </div>\n\n            <div className={classes.buttonContainer}>\n              <Link to=\"/login\">\n                <Button>我已有账号</Button>\n              </Link>\n              <Button\n                variant=\"contained\"\n                color=\"primary\"\n                onClick={createAccountButtonOnClick}\n              >\n                注册\n              </Button>\n            </div>\n          </form>\n        </CardContent>\n      </Card>\n      <ErrorIndicator\n        showError={showError}\n        setShowError={setShowError}\n        errorMessage={errorMessage}\n      />\n    </>\n  );\n};\n","import { useQuery } from \"@apollo/client\";\nimport {\n  Button,\n  Checkbox,\n  createStyles,\n  makeStyles,\n  Paper,\n  Table,\n  TableBody,\n  TableCell,\n  TableContainer,\n  TableHead,\n  TableRow,\n  Theme,\n} from \"@material-ui/core\";\nimport { CheckCircleOutline } from \"@material-ui/icons\";\nimport React, { useState } from \"react\";\nimport { LoadingIndicator } from \"../../lib/components\";\nimport { QUESTIONNAIRE_LIST } from \"../../lib/graphql/queries\";\nimport {\n  QuestionnaireList as QuestionnaireListData,\n  QuestionnaireListVariables,\n} from \"../../lib/graphql/queries/QuestionnaireList/__generated__/QuestionnaireList\";\nimport { ReportPdf } from \"../../lib/components\";\nimport { withReportPdfData } from \"./components\";\n\nconst PdfViewer = withReportPdfData(ReportPdf);\nconst useStyles = makeStyles((theme: Theme) =>\n  createStyles({\n    content: {\n      padding: \"5px 10px\",\n    },\n    questionnaireTable: {\n      marginTop: 20,\n      marginBottom: 20,\n    },\n    doneIcon: {\n      color: \"#4caf50\",\n    },\n  })\n);\n\nexport const Report = () => {\n  const classes = useStyles();\n  const { loading, data } = useQuery<\n    QuestionnaireListData,\n    QuestionnaireListVariables\n  >(QUESTIONNAIRE_LIST, {\n    variables: { isReport: true },\n    fetchPolicy: \"no-cache\",\n    onCompleted: (data) => {\n      const questionnaireList = data.questionnaireList;\n      let count = 0;\n      for (const questionnaire of questionnaireList) {\n        if (questionnaire.done) {\n          count += 1;\n        }\n      }\n      setNumberOfFinishedQuestionnaires(count);\n      const newselectedUserAnswers = new Set<string>();\n      for (const questionnaire of questionnaireList) {\n        if (questionnaire.done && questionnaire.userAnswerId)\n          newselectedUserAnswers.add(questionnaire.userAnswerId);\n      }\n      setSelectedUserAnswers(newselectedUserAnswers);\n    },\n  });\n  const [selectedUserAnswers, setSelectedUserAnswers] = useState<Set<string>>(\n    new Set<string>()\n  );\n  const [\n    numberOfFinishedQuestionnaires,\n    setNumberOfFinishedQuestionnaires,\n  ] = useState<number | null>(null);\n  const [isReportVisible, setIsReportVisible] = useState(false);\n\n  if (isReportVisible) {\n    return (\n      <PdfViewer\n        userAnswerIds={Array.from(selectedUserAnswers)}\n        closeReport={() => setIsReportVisible(false)}\n      />\n    );\n  }\n  if (loading || !data || numberOfFinishedQuestionnaires === null) {\n    return <LoadingIndicator />;\n  }\n  const questionnaireList = data.questionnaireList;\n\n  const selectQuestionnaire = (\n    event: React.ChangeEvent<HTMLInputElement>,\n    userAnswerId: string\n  ) => {\n    const checked = event.target.checked;\n    const newselectedUserAnswers = new Set(selectedUserAnswers);\n    if (checked) {\n      newselectedUserAnswers.add(userAnswerId);\n    } else {\n      newselectedUserAnswers.delete(userAnswerId);\n    }\n    setSelectedUserAnswers(newselectedUserAnswers);\n  };\n  const selectAllQuestionnaires = (\n    event: React.ChangeEvent<HTMLInputElement>\n  ) => {\n    const checked = event.target.checked;\n    const newselectedUserAnswers = new Set<string>();\n    if (checked) {\n      for (const questionnaire of questionnaireList) {\n        if (questionnaire.done && questionnaire.userAnswerId)\n          newselectedUserAnswers.add(questionnaire.userAnswerId);\n      }\n    }\n    setSelectedUserAnswers(newselectedUserAnswers);\n  };\n  const generateReport = () => {\n    setIsReportVisible(true);\n  };\n  return (\n    <div className={classes.content}>\n      <TableContainer component={Paper} className={classes.questionnaireTable}>\n        <Table size=\"small\" aira-label=\"选择已完成的量表，生成报告\">\n          <TableHead>\n            <TableRow>\n              <TableCell padding=\"checkbox\">\n                <Checkbox\n                  checked={\n                    selectedUserAnswers.size ===\n                      numberOfFinishedQuestionnaires &&\n                    selectedUserAnswers.size !== 0\n                  }\n                  disabled={numberOfFinishedQuestionnaires === 0}\n                  onChange={selectAllQuestionnaires}\n                />\n              </TableCell>\n              <TableCell>量表</TableCell>\n              <TableCell>完成状态</TableCell>\n              <TableCell>完成日期</TableCell>\n            </TableRow>\n          </TableHead>\n          <TableBody>\n            {questionnaireList.map((questionnaire, index) => (\n              <TableRow key={`questionnaire-${index}`}>\n                <TableCell padding=\"checkbox\">\n                  <Checkbox\n                    disabled={!questionnaire.done}\n                    checked={\n                      !!questionnaire.userAnswerId &&\n                      selectedUserAnswers.has(questionnaire.userAnswerId)\n                    }\n                    onChange={(e) =>\n                      questionnaire.userAnswerId &&\n                      selectQuestionnaire(e, questionnaire.userAnswerId)\n                    }\n                  />\n                </TableCell>\n                <TableCell>{questionnaire.name}</TableCell>\n                <TableCell>\n                  {questionnaire.done ? (\n                    <CheckCircleOutline\n                      className={classes.doneIcon}\n                      fontSize=\"small\"\n                    />\n                  ) : null}\n                </TableCell>\n                <TableCell>\n                  {questionnaire.displayedFillInDate || null}\n                </TableCell>\n              </TableRow>\n            ))}\n          </TableBody>\n        </Table>\n      </TableContainer>\n      <Button\n        variant=\"contained\"\n        color=\"primary\"\n        disabled={selectedUserAnswers.size === 0}\n        onClick={generateReport}\n      >\n        生成报告\n      </Button>\n    </div>\n  );\n};\n","import { gql } from \"@apollo/client\";\n\nexport const QUERY_USER = gql`\n  query QueryUser(\n    $userName: String\n    $name: String\n    $gender: String\n    $ageRange: AgeRange\n    $minSignUpDate: SignUpDate\n    $maxSignUpDate: SignUpDate\n    $limit: Int!\n    $currentPageIndex: Int!\n    $filter: UsersFilter\n    $onlyMyPatient: Boolean\n    $additionalFields: [String!]\n  ) {\n    queryUser(\n      userName: $userName\n      name: $name\n      gender: $gender\n      ageRange: $ageRange\n      minSignUpDate: $minSignUpDate\n      maxSignUpDate: $maxSignUpDate\n      limit: $limit\n      currentPageIndex: $currentPageIndex\n      filter: $filter\n      onlyMyPatient: $onlyMyPatient\n      additionalFields: $additionalFields\n    ) {\n      total\n      users {\n        id\n        name\n        userName\n        gender\n        education\n        jobStatus\n        age\n        marriageStatus\n        signUpDate\n        doctorName\n        doctorUserName\n        doctorId\n        finishedForms {\n          name\n          id\n          displayedFillInDate\n          userAnswerId\n          result\n          doctorUserName\n          doctorName\n          doctorId\n          key\n        }\n        diagnosis\n      }\n    }\n  }\n`;\n","import {\n  Dialog,\n  DialogTitle,\n  DialogContent,\n  FormControlLabel,\n  Checkbox,\n} from \"@material-ui/core\";\nimport React from \"react\";\n\ninterface Props {\n  isDialogOpen: boolean;\n  handleDialogClose: () => void;\n  additionalFields: string[];\n  setAdditionalFields: (additionalFields: string[]) => void;\n}\n\nexport const ADDITIONAL_FIELD_KEYS = [\n  \"depressed\",\n  \"anxious\",\n  \"biphasic\",\n  \"schizophrenia\",\n] as const;\nexport const ADDITIONAL_FIELD_MODAL_DISPLAY_NAMES = [\n  \"抑郁障碍\",\n  \"焦虑障碍\",\n  \"双相障碍\",\n  \"精神分裂症\",\n] as const;\n\nexport const removeElementFromArray = <T,>(array: T[], element: T) => {\n  const newArray: T[] = [];\n  for (let currentElement of array) {\n    if (currentElement !== element) {\n      newArray.push(currentElement);\n    }\n  }\n  return newArray;\n};\n\nexport const AdditionalFieldsModal = ({\n  isDialogOpen,\n  handleDialogClose,\n  additionalFields,\n  setAdditionalFields,\n}: Props) => {\n  const selectAdditionalField = (\n    fieldKey: typeof ADDITIONAL_FIELD_KEYS[number],\n    isSelected: boolean\n  ) => {\n    if (!isSelected) {\n      setAdditionalFields(removeElementFromArray(additionalFields, fieldKey));\n    } else if (!additionalFields.includes(fieldKey)) {\n      setAdditionalFields([...additionalFields, fieldKey]);\n    }\n  };\n  return (\n    <Dialog\n      open={isDialogOpen}\n      onClose={handleDialogClose}\n      aria-labelledby=\"form-dialog-title\"\n    >\n      <DialogTitle id=\"form-dialog-title\">高级筛选</DialogTitle>\n      <DialogContent>\n        {ADDITIONAL_FIELD_MODAL_DISPLAY_NAMES.map((displayName, index) => {\n          return (\n            <div key={displayName}>\n              <FormControlLabel\n                control={\n                  <Checkbox\n                    checked={additionalFields.includes(\n                      ADDITIONAL_FIELD_KEYS[index]\n                    )}\n                    onChange={(event) => {\n                      selectAdditionalField(\n                        ADDITIONAL_FIELD_KEYS[index],\n                        event.target.checked\n                      );\n                    }}\n                  />\n                }\n                label={displayName}\n              />\n            </div>\n          );\n        })}\n      </DialogContent>\n    </Dialog>\n  );\n};\n","import DateFnsUtils from \"@date-io/date-fns\";\nimport {\n  Button,\n  Checkbox,\n  Chip,\n  createStyles,\n  FormControl,\n  FormControlLabel,\n  InputLabel,\n  makeStyles,\n  MenuItem,\n  Select,\n  TextField,\n  Theme,\n} from \"@material-ui/core\";\nimport { DatePicker, MuiPickersUtilsProvider } from \"@material-ui/pickers\";\nimport React, { forwardRef, useImperativeHandle, useState } from \"react\";\nimport \"moment/locale/zh-cn\";\nimport ArrowForwardIcon from \"@material-ui/icons/ArrowForward\";\nimport SearchIcon from \"@material-ui/icons/Search\";\nimport SettingsBackupRestoreIcon from \"@material-ui/icons/SettingsBackupRestore\";\nimport cnLocale from \"date-fns/locale/zh-CN\";\nimport { ErrorIndicator } from \"../../../../lib/components\";\nimport { QueryUserVariables } from \"../../../../lib/graphql/queries/QueryUser/__generated__/QueryUser\";\nimport { UsersFilter } from \"../../../../lib/graphql/globalTypes\";\nimport { INITAL_ONLY_MY_PATIENT } from \"../..\";\nimport TuneIcon from \"@material-ui/icons/Tune\";\nimport {\n  AdditionalFieldsModal,\n  ADDITIONAL_FIELD_KEYS,\n  ADDITIONAL_FIELD_MODAL_DISPLAY_NAMES,\n  removeElementFromArray,\n} from \"../AdditionalFieldsModal\";\nimport InfoIcon from \"@material-ui/icons/Info\";\nimport { PRIMARY_COLOR } from \"../../../..\";\n\nconst AGE_RANGE_ERROR_MESSAGE_TEXT = \"最小年龄应小于最大年龄！\";\nconst AGE_NEGATIVE_ERROR_MESSAGE = \"年龄不能为负数！\";\n\nconst useStyles = makeStyles((theme: Theme) =>\n  createStyles({\n    promptText: {\n      color: \"#5f6368\",\n      fontSize: \"0.8em\",\n      paddingBottom: 5,\n      paddingTop: 5,\n    },\n    input: {\n      width: \"30%\",\n      paddingRight: 10,\n      paddingBottom: 5,\n    },\n    rangeWrapper: {\n      display: \"inline-block\",\n    },\n    ageRangeInput: {\n      width: \"40%\",\n    },\n    dateRangeWrapper: {\n      width: \"60%\",\n    },\n    ageRangeWrapper: {\n      width: \"30%\",\n      paddingRight: 10,\n    },\n    dateRangeInput: {\n      width: \"50%\",\n      paddingRight: 10,\n    },\n    ageInputIconWrapper: {\n      width: \"20%\",\n      display: \"inline-flex\",\n      justifyContent: \"center\",\n      paddingTop: 20,\n    },\n    buttonWrapper: {\n      paddingTop: 10,\n    },\n    extraFieldsWrapper: {\n      paddingTop: 10,\n    },\n    searchButton: {\n      marginRight: 10,\n    },\n    whiteButton: {\n      backgroundColor: \"#fff\",\n      color: PRIMARY_COLOR,\n      \"&:hover\": {\n        backgroundColor: \"#fff\",\n      },\n    },\n    rangeFormWrapper: {\n      width: \"100%\",\n      alignItems: \"flex-start\",\n      display: \"flex\",\n    },\n    ageInputIcon: {\n      width: 16,\n      height: 16,\n      color: \"rgba(0, 0, 0, 0.54)\",\n    },\n    chip: {\n      marginRight: 5,\n    },\n    additionalFieldButton: {\n      marginRight: 5,\n    },\n  })\n);\n\nconst datePickerProps = {\n  format: \"yyyy/MM/dd\",\n  okLabel: \"确定\",\n  cancelLabel: \"取消\",\n  invalidLabel: \"输入的日期有误！\",\n  maxDateMessage: \"输入的日期太大！\",\n  minDateMessage: \"输入的日期太小！\",\n  invalidDateMessage: \"输入的日期有误！\",\n  size: \"small\" as const,\n};\n\ninterface Props {\n  searchPatients: (searchParams: QueryUserVariables) => void;\n  limit: number;\n  currentPageIndex: number;\n  setCurrentPageIndex: (currentPageIndex: number) => void;\n  filter: UsersFilter;\n}\n\nexport interface SearchPatientFormHandle {\n  search: () => void;\n}\n\nexport const SearchPatientForm = forwardRef<SearchPatientFormHandle, Props>(\n  (\n    { searchPatients, limit, currentPageIndex, setCurrentPageIndex, filter },\n    ref\n  ) => {\n    const classes = useStyles();\n    const [userName, setUserName] = useState(\"\");\n    const onUserNameChange = (e: React.ChangeEvent<HTMLInputElement>) => {\n      setUserName(e.target.value);\n    };\n\n    const [name, setName] = useState(\"\");\n    const onNameChange = (e: React.ChangeEvent<HTMLInputElement>) => {\n      setName(e.target.value);\n    };\n\n    const [gender, setGender] = useState<\"男\" | \"女\" | \"全部\" | \"\">(\"\");\n    const onGenderChange = (\n      e: React.ChangeEvent<{\n        name?: string | undefined;\n        value: unknown;\n      }>\n    ) => {\n      setGender(e.target.value as typeof gender);\n    };\n\n    const [ageRange, setAgeRange] = useState({\n      min: \"\",\n      max: \"\",\n    });\n    const onMinAgeChange = (e: React.ChangeEvent<HTMLInputElement>) => {\n      const newMinAge = Number(e.target.value);\n      if (errorField === \"ageRange\") {\n        if (newMinAge <= Number(ageRange.max) || newMinAge === 0) {\n          setErrorField(null);\n        }\n      }\n      if (errorField === \"minAge\") {\n        if (newMinAge >= 0) {\n          setErrorField(null);\n        }\n      }\n      setAgeRange({ ...ageRange, min: e.target.value });\n    };\n    const onMaxAgeChange = (e: React.ChangeEvent<HTMLInputElement>) => {\n      const newMaxAge = Number(e.target.value);\n      if (errorField === \"ageRange\") {\n        if (newMaxAge >= Number(ageRange.min) || newMaxAge === 0) {\n          setErrorField(null);\n        }\n      }\n      if (errorField === \"maxAge\") {\n        if (newMaxAge >= 0) {\n          setErrorField(null);\n        }\n      }\n      setAgeRange({ ...ageRange, max: e.target.value });\n    };\n\n    const [dateRange, setDateRange] = useState<{\n      min: Date | null;\n      max: Date | null;\n    }>({\n      min: null,\n      max: null,\n    });\n    const onMinDateChange = (date: Date | null, _value?: string | null) => {\n      if (errorField === \"dateRange\") {\n        if (date === null || (dateRange.max && +date <= +dateRange.max)) {\n          setErrorField(null);\n        }\n      }\n      setDateRange({\n        ...dateRange,\n        min: date,\n      });\n    };\n    const onMaxDateChange = (date: Date | null, _value?: string | null) => {\n      if (errorField === \"dateRange\") {\n        if (date === null || (dateRange.min && +date >= +dateRange.min)) {\n          setErrorField(null);\n        }\n      }\n      setDateRange({\n        ...dateRange,\n        max: date,\n      });\n    };\n\n    const [onlyMyPatient, setOnlyMyPatient] = useState(false);\n    const handleOnlyMyPatientCheckboxChange = (\n      event: React.ChangeEvent<HTMLInputElement>\n    ) => {\n      setOnlyMyPatient(event.target.checked);\n    };\n\n    const [showError, setShowError] = useState(false);\n    const [errorMessage, setErrorMessage] = useState(\"\");\n    const [errorField, setErrorField] = useState<null | string>(null);\n    const [\n      isAdditionalFieldsModalOpen,\n      setIsAdditionalFieldsModalOpen,\n    ] = useState(false);\n    const [additionalFields, setAdditionalFields] = useState<string[]>([]);\n\n    const handleAdditionalFieldsModalClose = () => {\n      setIsAdditionalFieldsModalOpen(false);\n    };\n\n    const handleAdditionalFieldsModalOpen = () => {\n      setIsAdditionalFieldsModalOpen(true);\n    };\n\n    const handleSearchButtonClick = () => {\n      if (ageRange.min && Number(ageRange.min) < 0) {\n        setErrorMessage(AGE_NEGATIVE_ERROR_MESSAGE);\n        setShowError(true);\n        setErrorField(\"minAge\");\n        return;\n      }\n      if (ageRange.max && Number(ageRange.max) < 0) {\n        setErrorMessage(AGE_NEGATIVE_ERROR_MESSAGE);\n        setShowError(true);\n        setErrorField(\"maxAge\");\n        return;\n      }\n      if (\n        ageRange.min &&\n        ageRange.max &&\n        Number(ageRange.min) > Number(ageRange.max)\n      ) {\n        setErrorMessage(AGE_RANGE_ERROR_MESSAGE_TEXT);\n        setShowError(true);\n        setErrorField(\"ageRange\");\n        return;\n      }\n\n      if (dateRange.min && dateRange.max && dateRange.min > dateRange.max) {\n        setErrorMessage(\"起始日期应在截止日期之前！\");\n        setShowError(true);\n        setErrorField(\"dateRange\");\n        return;\n      }\n\n      setCurrentPageIndex(0);\n      searchPatients({\n        userName,\n        name,\n        gender,\n        ageRange: {\n          min: ageRange.min ? Number(ageRange.min) : null,\n          max: ageRange.max ? Number(ageRange.max) : null,\n        },\n        minSignUpDate: dateRange.min\n          ? {\n              year: dateRange.min.getFullYear(),\n              month: dateRange.min.getMonth(),\n              day: dateRange.min.getDate(),\n            }\n          : null,\n        maxSignUpDate: dateRange.max\n          ? {\n              year: dateRange.max.getFullYear(),\n              month: dateRange.max.getMonth(),\n              day: dateRange.max.getDate(),\n            }\n          : null,\n        limit,\n        currentPageIndex: 0,\n        onlyMyPatient,\n        filter,\n        additionalFields,\n      });\n    };\n\n    useImperativeHandle(ref, () => ({\n      search: () => {\n        handleSearchButtonClick();\n      },\n    }));\n    const handleResetButtonClick = () => {\n      setUserName(\"\");\n      setName(\"\");\n      setGender(\"\");\n      setAgeRange({\n        min: \"\",\n        max: \"\",\n      });\n      setDateRange({\n        min: null,\n        max: null,\n      });\n      setErrorField(null);\n      setCurrentPageIndex(0);\n      setOnlyMyPatient(INITAL_ONLY_MY_PATIENT);\n      searchPatients({\n        limit,\n        currentPageIndex: 0,\n        filter,\n        onlyMyPatient: INITAL_ONLY_MY_PATIENT,\n      });\n      setAdditionalFields([]);\n    };\n    return (\n      <form noValidate autoComplete=\"off\">\n        <div className={classes.promptText}>个人信息</div>\n        <div>\n          <TextField\n            label=\"门诊号\"\n            size=\"small\"\n            className={classes.input}\n            value={userName}\n            onChange={onUserNameChange}\n          />\n          <TextField\n            label=\"姓名\"\n            size=\"small\"\n            className={classes.input}\n            value={name}\n            onChange={onNameChange}\n          />\n          <FormControl className={classes.input} size=\"small\">\n            <InputLabel>性别</InputLabel>\n            <Select\n              color=\"primary\"\n              label=\"性别\"\n              value={gender}\n              onChange={onGenderChange}\n            >\n              <MenuItem value=\"男\">男</MenuItem>\n              <MenuItem value=\"女\">女</MenuItem>\n              <MenuItem value=\"全部\">全部</MenuItem>\n            </Select>\n          </FormControl>\n          <div className={classes.rangeFormWrapper}>\n            <div\n              className={classes.ageRangeWrapper + \" \" + classes.rangeWrapper}\n            >\n              <div className={classes.promptText}>年龄</div>\n              <div>\n                <TextField\n                  label=\"最小年龄\"\n                  size=\"small\"\n                  type=\"number\"\n                  className={classes.ageRangeInput}\n                  value={ageRange.min}\n                  onChange={onMinAgeChange}\n                  error={\n                    errorField === \"ageRange\" || errorField === \"minAge\"\n                      ? true\n                      : undefined\n                  }\n                />\n                <span className={classes.ageInputIconWrapper}>\n                  <ArrowForwardIcon className={classes.ageInputIcon} />\n                </span>\n                <TextField\n                  label=\"最大年龄\"\n                  size=\"small\"\n                  type=\"number\"\n                  className={classes.ageRangeInput}\n                  value={ageRange.max}\n                  onChange={onMaxAgeChange}\n                  error={\n                    errorField === \"ageRange\" || errorField === \"maxAge\"\n                      ? true\n                      : undefined\n                  }\n                />\n              </div>\n            </div>\n            <div\n              className={classes.dateRangeWrapper + \" \" + classes.rangeWrapper}\n            >\n              <div className={classes.promptText}>注册时间</div>\n              <MuiPickersUtilsProvider utils={DateFnsUtils} locale={cnLocale}>\n                <DatePicker\n                  value={dateRange.min}\n                  onChange={onMinDateChange}\n                  label={\"起始日期\"}\n                  className={classes.dateRangeInput}\n                  {...datePickerProps}\n                  error={errorField === \"dateRange\" ? true : undefined}\n                />\n                <DatePicker\n                  value={dateRange.max}\n                  onChange={onMaxDateChange}\n                  label={\"截止日期\"}\n                  className={classes.dateRangeInput}\n                  {...datePickerProps}\n                  error={errorField === \"dateRange\" ? true : undefined}\n                />\n              </MuiPickersUtilsProvider>\n            </div>\n          </div>\n        </div>\n        <div className={classes.extraFieldsWrapper}>\n          <FormControlLabel\n            control={\n              <Checkbox\n                checked={onlyMyPatient}\n                onChange={handleOnlyMyPatientCheckboxChange}\n              />\n            }\n            label=\"只选择我的病人\"\n          />\n          <Button\n            startIcon={<TuneIcon />}\n            onClick={handleAdditionalFieldsModalOpen}\n            color=\"primary\"\n            className={classes.additionalFieldButton}\n          >\n            高级筛选\n          </Button>\n          {ADDITIONAL_FIELD_KEYS.map((fieldKey, index) => {\n            if (additionalFields.includes(fieldKey)) {\n              const onChipDelete = () => {\n                setAdditionalFields(\n                  removeElementFromArray(additionalFields, fieldKey)\n                );\n              };\n              return (\n                <Chip\n                  variant=\"outlined\"\n                  size=\"small\"\n                  onDelete={onChipDelete}\n                  icon={<InfoIcon />}\n                  color=\"primary\"\n                  label={ADDITIONAL_FIELD_MODAL_DISPLAY_NAMES[index]}\n                  key={fieldKey}\n                  className={\n                    index !== additionalFields.length - 1 ? classes.chip : \"\"\n                  }\n                />\n              );\n            }\n            return null;\n          })}\n        </div>\n        <div className={classes.buttonWrapper}>\n          <Button\n            variant=\"contained\"\n            color=\"primary\"\n            startIcon={<SearchIcon />}\n            className={classes.searchButton}\n            onClick={handleSearchButtonClick}\n          >\n            搜索\n          </Button>\n          <Button\n            variant=\"contained\"\n            startIcon={<SettingsBackupRestoreIcon />}\n            className={classes.whiteButton}\n            onClick={handleResetButtonClick}\n          >\n            重置\n          </Button>\n        </div>\n        <ErrorIndicator\n          showError={showError}\n          setShowError={setShowError}\n          errorMessage={errorMessage}\n        />\n        <AdditionalFieldsModal\n          isDialogOpen={isAdditionalFieldsModalOpen}\n          handleDialogClose={handleAdditionalFieldsModalClose}\n          additionalFields={additionalFields}\n          setAdditionalFields={setAdditionalFields}\n        />\n      </form>\n    );\n  }\n);\n","import { createStyles, Divider, makeStyles, Theme } from \"@material-ui/core\";\nimport React from \"react\";\n\nconst useStyles = makeStyles((theme: Theme) =>\n  createStyles({\n    root: {\n      height: 48,\n      display: \"flex\",\n      alignItems: \"center\",\n      paddingLeft: 10,\n      fontWeight: 500,\n      fontSize: \"1.125rem\",\n    },\n  })\n);\n\ninterface Props {\n  text: string;\n}\n\nexport const Header = ({ text }: Props) => {\n  const classes = useStyles();\n  return (\n    <>\n      <div className={classes.root}>{text}</div>\n      <Divider />\n    </>\n  );\n};\n","import {\n  Button,\n  Dialog,\n  DialogActions,\n  DialogContent,\n  DialogTitle,\n  Table,\n  TableBody,\n  TableCell,\n  TableContainer,\n  TableHead,\n  TableRow,\n} from \"@material-ui/core\";\nimport React, { useMemo, useState } from \"react\";\nimport EqualizerIcon from \"@material-ui/icons/Equalizer\";\nimport { QueryUser_queryUser_users_finishedForms as FinishedForms } from \"../../../../lib/graphql/queries/QueryUser/__generated__/QueryUser\";\nimport { FormResult } from \"../../..\";\nimport { LineChartPopOver } from \"../../../../lib/components\";\n\ninterface Props {\n  finishedForms: FinishedForms[] | null;\n}\n\nexport const LineChartsButton = ({ finishedForms }: Props) => {\n  const isButtonDisabled =\n    finishedForms === null || finishedForms.length === 0 ? true : false;\n  const listData: {\n    uniqueFormList: FinishedForms[];\n    resultList: FormResult[][];\n  } = useMemo(() => {\n    if (!finishedForms)\n      return { uniqueFormList: [], resultList: [] as FormResult[][] };\n    const formList: FinishedForms[] = [];\n    const resultList: FormResult[][] = [];\n    const formSet: Set<string> = new Set();\n    finishedForms.forEach((questionnaire) => {\n      if (!formSet.has(questionnaire.id)) {\n        formSet.add(questionnaire.id);\n        formList.push(questionnaire);\n        if (questionnaire.result && questionnaire.displayedFillInDate) {\n          resultList.push([\n            {\n              result: questionnaire.result,\n              fillInDate: questionnaire.displayedFillInDate,\n            },\n          ]);\n        } else {\n          resultList.push([] as FormResult[]);\n        }\n      } else if (questionnaire.result && questionnaire.displayedFillInDate) {\n        let index = 0;\n        while (index <= formList.length) {\n          if (formList[index].id === questionnaire.id) {\n            resultList[index].push({\n              result: questionnaire.result,\n              fillInDate: questionnaire.displayedFillInDate,\n            });\n            break;\n          }\n          index += 1;\n        }\n      }\n    });\n    const newResultList = resultList.map((result) => [...result].reverse());\n    return { uniqueFormList: formList, resultList: newResultList };\n  }, [finishedForms]);\n  const { uniqueFormList, resultList } = listData;\n  const [isOpen, setIsOpen] = useState(false);\n  const closeModal = () => {\n    setIsOpen(false);\n  };\n  const openModal = () => {\n    setIsOpen(true);\n  };\n  return (\n    <>\n      <Button\n        startIcon={<EqualizerIcon />}\n        color=\"primary\"\n        disabled={isButtonDisabled}\n        onClick={openModal}\n        size=\"small\"\n      >\n        趋势\n      </Button>\n      <Dialog open={isOpen} onClose={closeModal}>\n        <DialogTitle>查看趋势</DialogTitle>\n        <DialogContent>\n          <TableContainer>\n            <Table size=\"small\">\n              <TableHead>\n                <TableRow>\n                  <TableCell>量表</TableCell>\n                  <TableCell></TableCell>\n                </TableRow>\n              </TableHead>\n              <TableBody>\n                {uniqueFormList.map((form, index) => (\n                  <TableRow key={`questionnaire-${index}`}>\n                    <TableCell>{form.name}</TableCell>\n                    <TableCell>\n                      <LineChartPopOver\n                        formResultList={resultList[index]}\n                        formName={form.name}\n                        formKey={form.key}\n                      />\n                    </TableCell>\n                  </TableRow>\n                ))}\n              </TableBody>\n            </Table>\n          </TableContainer>\n          <DialogActions>\n            <Button onClick={closeModal} color=\"primary\">\n              关闭\n            </Button>\n          </DialogActions>\n        </DialogContent>\n      </Dialog>\n    </>\n  );\n};\n","import { useMutation } from \"@apollo/client\";\nimport {\n  Dialog,\n  DialogTitle,\n  DialogContent,\n  FormControl,\n  InputLabel,\n  MenuItem,\n  Select,\n  DialogContentText,\n  createStyles,\n  makeStyles,\n  Theme,\n  Button,\n  DialogActions,\n} from \"@material-ui/core\";\nimport React, { useEffect, useState } from \"react\";\nimport {\n  ADDITIONAL_FIELD_KEYS,\n  ADDITIONAL_FIELD_MODAL_DISPLAY_NAMES,\n} from \"..\";\nimport { ADD_DIAGNOSIS } from \"../../../../lib/graphql/mutations\";\nimport {\n  AddDiagnosis,\n  AddDiagnosisVariables,\n} from \"../../../../lib/graphql/mutations/AddDiagnosis/__generated__/AddDiagnosis\";\n\ninterface Props {\n  isDialogOpen: boolean;\n  handleDialogClose: () => void;\n  patientName: string;\n  patientId: string;\n  refetch: () => void;\n}\n\nconst useStyles = makeStyles((theme: Theme) =>\n  createStyles({\n    diagnosisText: {\n      minWidth: 250,\n    },\n  })\n);\n\nexport const AddDiagnosisModal = ({\n  isDialogOpen,\n  handleDialogClose,\n  patientName,\n  patientId,\n  refetch,\n}: Props) => {\n  const [addDiagnosis] = useMutation<AddDiagnosis, AddDiagnosisVariables>(\n    ADD_DIAGNOSIS\n  );\n  useEffect(() => {\n    setDiagnosis(\"\");\n  }, [patientName]);\n  const classes = useStyles();\n  const [diagnosis, setDiagnosis] = useState(\"\");\n  const handleDiagnosisSelectChange = (\n    e: React.ChangeEvent<{\n      name?: string | undefined;\n      value: unknown;\n    }>\n  ) => {\n    setDiagnosis(e.target.value as string);\n  };\n  const handleComfirm = async () => {\n    if (diagnosis !== \"\") {\n      await addDiagnosis({\n        variables: {\n          input: {\n            patientId,\n            diagnosis:\n              ADDITIONAL_FIELD_KEYS[\n                ADDITIONAL_FIELD_MODAL_DISPLAY_NAMES.indexOf(\n                  diagnosis as typeof ADDITIONAL_FIELD_MODAL_DISPLAY_NAMES[number]\n                )\n              ],\n          },\n        },\n      });\n    } else {\n      await addDiagnosis({\n        variables: {\n          input: {\n            patientId,\n            diagnosis,\n          },\n        },\n      });\n    }\n    handleDialogClose();\n    refetch();\n  };\n  return (\n    <Dialog open={isDialogOpen} onClose={handleDialogClose}>\n      <DialogTitle>诊断</DialogTitle>\n      <DialogContent>\n        <DialogContentText className={classes.diagnosisText}>\n          给{patientName}添加诊断\n        </DialogContentText>\n        <FormControl fullWidth>\n          <InputLabel shrink>诊断</InputLabel>\n          <Select value={diagnosis} onChange={handleDiagnosisSelectChange}>\n            {ADDITIONAL_FIELD_MODAL_DISPLAY_NAMES.map((option) => (\n              <MenuItem value={option} key={option}>\n                {option}\n              </MenuItem>\n            ))}\n          </Select>\n        </FormControl>\n      </DialogContent>\n      <DialogActions>\n        <Button onClick={handleDialogClose}>取消</Button>\n        <Button onClick={handleComfirm} color=\"primary\">\n          确认\n        </Button>\n      </DialogActions>\n    </Dialog>\n  );\n};\n","import {\n  Button,\n  createStyles,\n  IconButton,\n  makeStyles,\n  Paper,\n  Table,\n  TableBody,\n  TableCell,\n  TableContainer,\n  TableHead,\n  TablePagination,\n  TableRow,\n  TableSortLabel,\n  Theme,\n} from \"@material-ui/core\";\nimport React, { ChangeEvent, useEffect, useState, MouseEvent } from \"react\";\nimport { ErrorIndicator, LoadingIndicator } from \"../../../../lib/components\";\nimport {\n  QueryUser,\n  QueryUser_queryUser_users_finishedForms as QuestionnaireData,\n} from \"../../../../lib/graphql/queries/QueryUser/__generated__/QueryUser\";\nimport NoteIcon from \"@material-ui/icons/Note\";\n// import { HelpPopover } from \"../HelpPopover\";\nimport {\n  ADDITIONAL_FIELD_KEYS,\n  ADDITIONAL_FIELD_MODAL_DISPLAY_NAMES,\n  ChooseFormModal,\n} from \"..\";\nimport { UsersFilter } from \"../../../../lib/graphql/globalTypes\";\nimport { LineChartsButton } from \"../LineChartsButton\";\nimport EditIcon from \"@material-ui/icons/Edit\";\nimport { AddDiagnosisModal } from \"../AddDiagnosisModal\";\nimport { PRIMARY_COLOR } from \"../../../..\";\n\nconst useStyles = makeStyles((theme: Theme) =>\n  createStyles({\n    root: {\n      marginTop: 20,\n      width: \"calc(100% - 20px)\",\n      minWidth: 1085,\n      fontSize: \"0.9rem\",\n    },\n    loadingIndicatorWrapper: {\n      width: \"100%\",\n      height: 200,\n    },\n    reportButton: {\n      backgroundColor: \"#fff\",\n      color: PRIMARY_COLOR,\n      \"&:hover\": {\n        backgroundColor: \"#fff\",\n      },\n    },\n    lineChartsButtonContainer: {\n      marginRight: 5,\n    },\n    tableCell: {\n      overflow: \"hidden\",\n      textOverflow: \"ellipsis\",\n      whiteSpace: \"nowrap\",\n    },\n    iconMargin: {\n      marginRight: 5,\n    },\n  })\n);\nconst tableColumnTexts = [\n  \"门诊号\",\n  \"姓名\",\n  \"性别\",\n  \"年龄\",\n  \"教育\",\n  \"职业\",\n  \"婚姻\",\n  \"注册时间\",\n  \"医生\",\n  \"诊断\",\n];\nconst tableColumns = [\n  \"userName\",\n  \"name\",\n  \"gender\",\n  \"age\",\n  \"education\",\n  \"jobStatus\",\n  \"marriageStatus\",\n  \"signUpDate\",\n  \"doctorName\",\n  \"diagnosis\",\n] as const;\n\nconst tableMinWidth = [70, 80, 60, 60, 90, 70, 60, 150, 80, 140] as const;\nconst tableMaxWidth = [140, 80, 60, 60, 90, 70, 60, 150, 80, 140] as const;\n\ninterface Props {\n  loading: boolean;\n  patientList?: QueryUser;\n  selectedUserAnswerIds: string[] | null;\n  setSelectedUserId: (userId: string | null) => void;\n  setSelectedUserAnswerIds: (selectedFormIds: string[] | null) => void;\n  setIsReportShown: (isReportShown: boolean) => void;\n  limit: number;\n  currentPageIndex: number;\n  handleLimitChange: (limit: number) => void;\n  handleCurrentPageIndexChange: (currentPageIndex: number) => void;\n  filter: UsersFilter;\n  setFilter: (filter: UsersFilter) => void;\n  handleSortChange: () => void;\n  refetch: () => void;\n}\nexport const PatientTable = (props: Props) => {\n  const classes = useStyles();\n  const {\n    loading,\n    patientList,\n    selectedUserAnswerIds,\n    setSelectedUserId,\n    setSelectedUserAnswerIds,\n    setIsReportShown,\n    limit,\n    currentPageIndex,\n    handleLimitChange,\n    handleCurrentPageIndexChange,\n    filter,\n    handleSortChange,\n    refetch,\n  } = props;\n  const [showError, setShowError] = useState(false);\n  const [isChooseFormModalShown, setIsChooseFormModalShown] = useState(false);\n  const [finishedFormList, setFinishedFormList] = useState<\n    QuestionnaireData[] | null\n  >(null);\n\n  const handleReportButtonClick = (\n    finishedForms: QuestionnaireData[],\n    userId: string\n  ) => {\n    setSelectedUserId(userId);\n    setFinishedFormList(finishedForms);\n    const selectedUserAnswerIds = finishedForms\n      .map((finishedForm) => finishedForm.userAnswerId)\n      .filter((finishedForm): finishedForm is string => finishedForm !== null);\n    setSelectedUserAnswerIds(selectedUserAnswerIds);\n    setIsChooseFormModalShown(true);\n  };\n  const closeModal = () => {\n    setIsChooseFormModalShown(false);\n  };\n  const onOkButtonClick = () => {\n    setIsReportShown(true);\n  };\n  const [isAddDiagnosisModalShown, setIsAddDiagnosisModalShown] = useState(\n    false\n  );\n  const [addDiagnosisPatientId, setAddDiagnosisPatientId] = useState<\n    string | null\n  >(null);\n  const handleAddDiagnosisModalClose = () => {\n    setIsAddDiagnosisModalShown(false);\n  };\n  const openAddDiagnosisModal = () => {\n    setIsAddDiagnosisModalShown(true);\n  };\n  const [addDiagnosisPatientName, setAddDiagnosisPatientName] = useState<\n    string | null\n  >(null);\n  const handleEditDiagnosisButtonClick = (\n    patientName: string,\n    patientId: string\n  ) => {\n    setAddDiagnosisPatientName(patientName);\n    setAddDiagnosisPatientId(patientId);\n    openAddDiagnosisModal();\n  };\n  useEffect(() => {\n    if (\n      loading === false &&\n      patientList !== undefined &&\n      patientList.queryUser.users.length === 0\n    ) {\n      setShowError(true);\n    }\n  }, [loading, patientList]);\n  if (loading) {\n    return (\n      <div className={classes.loadingIndicatorWrapper}>\n        <LoadingIndicator />\n      </div>\n    );\n  }\n  if (patientList === undefined) {\n    return null;\n  }\n  if (patientList.queryUser.users.length === 0) {\n    return (\n      <ErrorIndicator\n        showError={showError}\n        setShowError={setShowError}\n        errorMessage=\"未找到符合条件的病人！\"\n      />\n    );\n  }\n\n  const handleRowsPerPageChange = (\n    event: ChangeEvent<HTMLTextAreaElement | HTMLInputElement>\n  ) => {\n    handleLimitChange(Number(event.target.value));\n  };\n\n  const handlePageChange = (\n    _event: MouseEvent<HTMLButtonElement> | null,\n    page: number\n  ) => {\n    handleCurrentPageIndexChange(page);\n  };\n\n  const labelDisplayedRows = ({\n    from,\n    to,\n    count,\n  }: {\n    from: number;\n    to: number;\n    count: number;\n  }): string => {\n    return `共计${count}条数据，当前为第${Math.ceil(from / limit)}页`;\n  };\n  return (\n    <>\n      <TableContainer component={Paper} className={classes.root}>\n        <TablePagination\n          rowsPerPage={limit}\n          rowsPerPageOptions={[5, 10, 25]}\n          page={currentPageIndex}\n          count={patientList.queryUser.total}\n          onChangePage={handlePageChange}\n          component=\"div\"\n          onChangeRowsPerPage={handleRowsPerPageChange}\n          labelDisplayedRows={labelDisplayedRows}\n        />\n        <Table size=\"small\" aria-label=\"病人列表\">\n          <TableHead>\n            <TableRow>\n              {tableColumnTexts.map((text, index) => (\n                <TableCell\n                  key={text}\n                  style={{\n                    minWidth: tableMinWidth[index],\n                    maxWidth: tableMaxWidth[index],\n                    padding: 5,\n                    paddingLeft: index === 0 ? 10 : undefined,\n                  }}\n                  className={classes.tableCell}\n                >\n                  {tableColumns[index] === \"signUpDate\" ? (\n                    <TableSortLabel\n                      active={tableColumns[index] === \"signUpDate\"}\n                      direction={\n                        filter === UsersFilter.DATE_LATEST ? \"desc\" : \"asc\"\n                      }\n                      onClick={handleSortChange}\n                    >\n                      {text}\n                    </TableSortLabel>\n                  ) : (\n                    text\n                  )}\n                </TableCell>\n              ))}\n              <TableCell\n                style={{\n                  padding: 5,\n                }}\n              />\n            </TableRow>\n          </TableHead>\n          <TableBody>\n            {patientList.queryUser.users.map((patientInformation) => {\n              const isReportButtonDisabled =\n                !patientInformation.finishedForms ||\n                patientInformation.finishedForms.length === 0;\n\n              return (\n                <TableRow key={patientInformation.userName}>\n                  {tableColumns.map((column, index) => {\n                    const content =\n                      index === tableColumns.length - 1\n                        ? ADDITIONAL_FIELD_MODAL_DISPLAY_NAMES[\n                            ADDITIONAL_FIELD_KEYS.indexOf(\n                              patientInformation[\n                                column\n                              ] as typeof ADDITIONAL_FIELD_KEYS[number]\n                            )\n                          ]\n                        : patientInformation[column];\n                    return (\n                      <TableCell\n                        key={column}\n                        style={{\n                          minWidth: tableMinWidth[index],\n                          maxWidth: tableMaxWidth[index],\n                          padding: 5,\n                          paddingLeft: index === 0 ? 10 : undefined,\n                        }}\n                        className={classes.tableCell}\n                        title={content || undefined}\n                      >\n                        {index === tableColumns.length - 1 ? (\n                          <>\n                            <IconButton\n                              aria-label=\"delete\"\n                              className={classes.iconMargin}\n                              size=\"small\"\n                              color=\"primary\"\n                              onClick={() =>\n                                patientInformation.name &&\n                                handleEditDiagnosisButtonClick(\n                                  patientInformation.name,\n                                  patientInformation.id\n                                )\n                              }\n                            >\n                              <EditIcon fontSize=\"inherit\" />\n                            </IconButton>\n                            {content}\n                          </>\n                        ) : (\n                          content\n                        )}\n                      </TableCell>\n                    );\n                  })}\n                  <TableCell style={{ minWidth: 180, padding: 0 }}>\n                    <div style={{ display: \"flex\" }}>\n                      <span className={classes.lineChartsButtonContainer}>\n                        <LineChartsButton\n                          finishedForms={patientInformation.finishedForms}\n                        />\n                      </span>\n                      <Button\n                        size=\"small\"\n                        // className={classes.reportButton}\n                        color=\"primary\"\n                        startIcon={<NoteIcon />}\n                        disabled={isReportButtonDisabled}\n                        onClick={() =>\n                          patientInformation.finishedForms &&\n                          handleReportButtonClick(\n                            patientInformation.finishedForms,\n                            patientInformation.id\n                          )\n                        }\n                      >\n                        报告\n                      </Button>\n                      {/* {isReportButtonDisabled && patientInformation.name && (\n                        <HelpPopover name={patientInformation.name} />\n                      )} */}\n                    </div>\n                  </TableCell>\n                </TableRow>\n              );\n            })}\n          </TableBody>\n        </Table>\n      </TableContainer>\n      {finishedFormList && selectedUserAnswerIds && (\n        <ChooseFormModal\n          isOpen={isChooseFormModalShown}\n          closeModal={closeModal}\n          finishedFormList={finishedFormList}\n          selectedUserAnswerIds={selectedUserAnswerIds}\n          setSelectedUserAnswerIds={setSelectedUserAnswerIds}\n          onOkButtonClick={onOkButtonClick}\n        />\n      )}\n      {addDiagnosisPatientName && addDiagnosisPatientId && (\n        <AddDiagnosisModal\n          isDialogOpen={isAddDiagnosisModalShown}\n          handleDialogClose={handleAddDiagnosisModalClose}\n          patientName={addDiagnosisPatientName}\n          patientId={addDiagnosisPatientId}\n          refetch={refetch}\n        />\n      )}\n    </>\n  );\n};\n","import {\n  Button,\n  Checkbox,\n  createStyles,\n  Dialog,\n  DialogActions,\n  DialogContent,\n  DialogTitle,\n  makeStyles,\n  Table,\n  TableBody,\n  TableCell,\n  TableContainer,\n  TableHead,\n  TableRow,\n  Theme,\n} from \"@material-ui/core\";\nimport React from \"react\";\nimport { QueryUser_queryUser_users_finishedForms as QuestionnaireData } from \"../../../../lib/graphql/queries/QueryUser/__generated__/QueryUser\";\n\ninterface Props {\n  isOpen: boolean;\n  closeModal: () => void;\n  finishedFormList: QuestionnaireData[];\n  selectedUserAnswerIds: string[];\n  setSelectedUserAnswerIds: (selectedUserAnswerIds: string[]) => void;\n  onOkButtonClick: () => void;\n}\nconst useStyles = makeStyles((theme: Theme) =>\n  createStyles({\n    formName: {\n      maxWidth: 300,\n      textOverflow: \"ellipsis\",\n      overflow: \"hidden\",\n      whiteSpace: \"nowrap\",\n    },\n  })\n);\n\nexport const ChooseFormModal = ({\n  isOpen,\n  closeModal,\n  finishedFormList,\n  selectedUserAnswerIds,\n  setSelectedUserAnswerIds,\n  onOkButtonClick,\n}: Props) => {\n  const classes = useStyles();\n  const handleSelectAllCheckBoxClick = () => {\n    if (selectedUserAnswerIds.length < finishedFormList.length) {\n      setSelectedUserAnswerIds(\n        finishedFormList\n          .map((form) => form.userAnswerId)\n          .filter(\n            (userAnswerId): userAnswerId is string => userAnswerId !== null\n          )\n      );\n    } else {\n      setSelectedUserAnswerIds([]);\n    }\n  };\n  const handleSelectCheckBoxClick = (formId: string) => {\n    if (selectedUserAnswerIds.indexOf(formId) !== -1) {\n      setSelectedUserAnswerIds(\n        selectedUserAnswerIds.filter(\n          (currentUserAnswerId) => currentUserAnswerId !== formId\n        )\n      );\n    } else {\n      setSelectedUserAnswerIds([...selectedUserAnswerIds, formId]);\n    }\n  };\n  const handleOkButtonClick = () => {\n    onOkButtonClick();\n    closeModal();\n  };\n  return (\n    <Dialog\n      open={isOpen}\n      onClose={closeModal}\n      aria-labelledby=\"alert-dialog-title\"\n      aria-describedby=\"alert-dialog-description\"\n      maxWidth=\"md\"\n    >\n      <DialogTitle id=\"alert-dialog-title\">请选择要生成报告的量表</DialogTitle>\n      <DialogContent>\n        <TableContainer>\n          <Table size=\"small\" aira-label=\"选择量表，生成报告\">\n            <TableHead>\n              <TableRow>\n                <TableCell padding=\"checkbox\">\n                  <Checkbox\n                    checked={\n                      selectedUserAnswerIds.length ===\n                        finishedFormList.length &&\n                      selectedUserAnswerIds.length !== 0\n                    }\n                    onChange={handleSelectAllCheckBoxClick}\n                  />\n                </TableCell>\n                <TableCell>全部已完成量表</TableCell>\n                <TableCell>完成时间</TableCell>\n                <TableCell>医生</TableCell>\n              </TableRow>\n            </TableHead>\n            <TableBody>\n              {finishedFormList.map((form, index) => (\n                <TableRow key={`questionnaire-${index}`}>\n                  <TableCell padding=\"checkbox\">\n                    <Checkbox\n                      checked={\n                        !!form.userAnswerId &&\n                        selectedUserAnswerIds.indexOf(form.userAnswerId) !== -1\n                      }\n                      onChange={() =>\n                        form.userAnswerId &&\n                        handleSelectCheckBoxClick(form.userAnswerId)\n                      }\n                    />\n                  </TableCell>\n                  <TableCell className={classes.formName}>\n                    {form.name}\n                  </TableCell>\n                  <TableCell>{form.displayedFillInDate || null}</TableCell>\n                  <TableCell>{form.doctorName || null}</TableCell>\n                </TableRow>\n              ))}\n            </TableBody>\n          </Table>\n        </TableContainer>\n      </DialogContent>\n      <DialogActions>\n        <Button onClick={closeModal}>取消</Button>\n        <Button\n          onClick={handleOkButtonClick}\n          color=\"primary\"\n          autoFocus\n          disabled={selectedUserAnswerIds.length === 0}\n        >\n          确定\n        </Button>\n      </DialogActions>\n    </Dialog>\n  );\n};\n","import {\n  createStyles,\n  IconButton,\n  makeStyles,\n  Popover,\n  Theme,\n} from \"@material-ui/core\";\nimport React from \"react\";\nimport HelpOutlineIcon from \"@material-ui/icons/HelpOutline\";\n\nconst useStyles = makeStyles((theme: Theme) =>\n  createStyles({\n    popover: {\n      pointerEvents: \"none\",\n    },\n    paper: {\n      padding: theme.spacing(1),\n    },\n    icon: {\n      width: 22,\n      height: 22,\n    },\n  })\n);\n\ninterface Props {\n  name: string;\n}\nexport const HelpPopover = ({ name }: Props) => {\n  const classes = useStyles();\n  const [anchorEl, setAnchorEl] = React.useState<HTMLElement | null>(null);\n  const open = Boolean(anchorEl);\n  const handlePopoverOpen = (\n    event: React.MouseEvent<HTMLElement, MouseEvent>\n  ) => {\n    setAnchorEl(event.currentTarget);\n  };\n\n  const handlePopoverClose = () => {\n    setAnchorEl(null);\n  };\n  return (\n    <>\n      <IconButton\n        color=\"primary\"\n        size=\"small\"\n        onMouseEnter={handlePopoverOpen}\n        onMouseLeave={handlePopoverClose}\n      >\n        <HelpOutlineIcon className={classes.icon} />\n      </IconButton>\n      <Popover\n        id=\"mouse-over-popover\"\n        className={classes.popover}\n        classes={{\n          paper: classes.paper,\n        }}\n        open={open}\n        anchorEl={anchorEl}\n        anchorOrigin={{\n          vertical: \"top\",\n          horizontal: \"left\",\n        }}\n        transformOrigin={{\n          vertical: \"bottom\",\n          horizontal: \"left\",\n        }}\n        onClose={handlePopoverClose}\n        disableRestoreFocus\n      >\n        {name}未填写任何量表！\n      </Popover>\n    </>\n  );\n};\n","import { useLazyQuery } from \"@apollo/client\";\nimport { createStyles, makeStyles, Theme } from \"@material-ui/core\";\nimport React, { ElementRef, useEffect, useRef, useState } from \"react\";\nimport { ReportPdf } from \"../../lib/components\";\nimport { UsersFilter } from \"../../lib/graphql/globalTypes\";\nimport { QUERY_USER } from \"../../lib/graphql/queries/QueryUser\";\nimport {\n  QueryUser,\n  QueryUserVariables,\n} from \"../../lib/graphql/queries/QueryUser/__generated__/QueryUser\";\nimport {\n  Header,\n  PatientTable,\n  SearchPatientForm,\n  withReportPdfDataForAdmin,\n} from \"./components\";\n\nconst useStyles = makeStyles((theme: Theme) =>\n  createStyles({\n    content: {\n      padding: \"5px 10px\",\n    },\n  })\n);\nconst PdfViewer = withReportPdfDataForAdmin(ReportPdf);\n\nexport const INITIAL_LIMIT = 10;\nexport const INITIAL_CURRENT_PAGE_INDEX = 0;\nexport const INITAL_ONLY_MY_PATIENT = false;\n\nexport const PatientInformation = () => {\n  const [getQueryResult, { loading, data: userListData }] = useLazyQuery<\n    QueryUser,\n    QueryUserVariables\n  >(QUERY_USER, { fetchPolicy: \"no-cache\" });\n  const searchFormRef = useRef<ElementRef<typeof SearchPatientForm>>(null);\n  const [limit, setLimit] = useState(INITIAL_LIMIT);\n  const [currentPageIndex, setCurrentPageIndex] = useState(\n    INITIAL_CURRENT_PAGE_INDEX\n  );\n  const [filter, setFilter] = useState<UsersFilter>(UsersFilter.DATE_LATEST);\n  const classes = useStyles();\n  const [selectedUserAnswerIds, setSelectedUserAnswerIds] = useState<\n    string[] | null\n  >(null);\n  const [selectedUserId, setSelectedUserId] = useState<string | null>(null);\n  const [isReportShown, setIsReportShown] = useState(false);\n  const closeReport = () => {\n    setIsReportShown(false);\n  };\n  const searchPatients = (params: QueryUserVariables) => {\n    getQueryResult({ variables: params });\n    setSearchParams(params);\n  };\n  const getQueryResultRef = useRef(getQueryResult);\n  const [searchParams, setSearchParams] = useState<QueryUserVariables>({\n    limit: INITIAL_LIMIT,\n    currentPageIndex: INITIAL_CURRENT_PAGE_INDEX,\n  });\n  const handleLimitChange = (limit: number): void => {\n    setLimit(limit);\n    setCurrentPageIndex(0);\n    getQueryResult({\n      variables: { ...searchParams, limit, currentPageIndex: 0, filter },\n    });\n  };\n  const handleCurrentPageIndexChange = (currentPageIndex: number): void => {\n    setCurrentPageIndex(currentPageIndex);\n    getQueryResult({\n      variables: { ...searchParams, limit, currentPageIndex, filter },\n    });\n  };\n  const refetch = () => {\n    getQueryResult({\n      variables: { ...searchParams, limit, currentPageIndex, filter },\n    });\n  };\n  const handleSortChange = () => {\n    const newFilter =\n      filter === UsersFilter.DATE_LATEST\n        ? UsersFilter.DATE_OLDEST\n        : UsersFilter.DATE_LATEST;\n    setFilter(newFilter);\n    setCurrentPageIndex(0);\n    getQueryResult({\n      variables: {\n        ...searchParams,\n        limit,\n        currentPageIndex: 0,\n        filter: newFilter,\n      },\n    });\n  };\n  useEffect(() => {\n    getQueryResultRef.current({\n      variables: {\n        limit: INITIAL_LIMIT,\n        currentPageIndex: INITIAL_CURRENT_PAGE_INDEX,\n        filter: UsersFilter.DATE_LATEST,\n        onlyMyPatient: INITAL_ONLY_MY_PATIENT,\n      },\n    });\n  }, []);\n  if (isReportShown && selectedUserId && selectedUserAnswerIds) {\n    return (\n      <PdfViewer\n        userId={selectedUserId}\n        userAnswerIds={selectedUserAnswerIds}\n        closeReport={closeReport}\n      />\n    );\n  }\n  return (\n    <div>\n      <Header text={\"搜索病人信息\"} />\n      <div className={classes.content}>\n        <SearchPatientForm\n          searchPatients={searchPatients}\n          limit={limit}\n          currentPageIndex={currentPageIndex}\n          ref={searchFormRef}\n          setCurrentPageIndex={setCurrentPageIndex}\n          filter={filter}\n        />\n        <PatientTable\n          loading={loading}\n          patientList={userListData}\n          selectedUserAnswerIds={selectedUserAnswerIds}\n          setSelectedUserId={setSelectedUserId}\n          setSelectedUserAnswerIds={setSelectedUserAnswerIds}\n          setIsReportShown={setIsReportShown}\n          limit={limit}\n          currentPageIndex={currentPageIndex}\n          handleLimitChange={handleLimitChange}\n          handleCurrentPageIndexChange={handleCurrentPageIndexChange}\n          filter={filter}\n          setFilter={setFilter}\n          handleSortChange={handleSortChange}\n          refetch={refetch}\n        />\n      </div>\n    </div>\n  );\n};\n","import { useQuery } from \"@apollo/client\";\nimport React, { ComponentType, PropsWithChildren } from \"react\";\nimport { LoadingIndicator } from \"../../../../lib/components\";\nimport { REPORT_FOR_ADMIN } from \"../../../../lib/graphql/queries\";\nimport {\n  ReportForAdmin as ReportData,\n  ReportForAdminVariables,\n} from \"../../../../lib/graphql/queries/ReportForAdmin/__generated__/ReportForAdmin\";\n\nexport const withReportPdfDataForAdmin = (\n  WrappedComponent: ComponentType<\n    PropsWithChildren<{ pdfData: string; closeReport: () => void }>\n  >\n) => {\n  return ({\n    children,\n    userAnswerIds,\n    closeReport,\n    userId,\n  }: PropsWithChildren<{\n    userAnswerIds: string[];\n    closeReport: () => void;\n    userId: string;\n  }>) => {\n    // Get PDF data.\n    const { data, loading } = useQuery<ReportData, ReportForAdminVariables>(\n      REPORT_FOR_ADMIN,\n      {\n        variables: {\n          userAnswerIds,\n          userId,\n        },\n        fetchPolicy: \"no-cache\",\n      }\n    );\n\n    if (loading || !data) {\n      return <LoadingIndicator />;\n    }\n\n    if (data.reportForAdmin && data.reportForAdmin.pdf) {\n      return (\n        <WrappedComponent\n          pdfData={data.reportForAdmin.pdf}\n          closeReport={closeReport}\n        >\n          {children}\n        </WrappedComponent>\n      );\n    }\n\n    return null;\n  };\n};\n","import {\n  makeStyles,\n  Theme,\n  createStyles,\n  Button,\n  Dialog,\n  DialogActions,\n  DialogContent,\n  DialogContentText,\n  DialogTitle,\n} from \"@material-ui/core\";\nimport React, { useState } from \"react\";\nimport ExitToAppIcon from \"@material-ui/icons/ExitToApp\";\nimport { Doctor } from \"../../../../lib/type\";\n\nconst useStyles = makeStyles((theme: Theme) =>\n  createStyles({\n    root: {\n      overflow: \"hidden\",\n    },\n    actionContainer: {\n      float: \"right\",\n      paddingRight: 10,\n      paddingTop: 10,\n      fontSize: \"0.875rem\",\n      display: \"flex\",\n      alignItems: \"center\",\n    },\n    welcomeMessage: {\n      paddingRight: 10,\n      paddingBottom: 1,\n    },\n  })\n);\n\ninterface Props {\n  handleDoctorLogOut: () => void;\n  doctor: Doctor;\n}\n\nexport const Header = ({ handleDoctorLogOut, doctor }: Props) => {\n  const classes = useStyles();\n  const [isDialogOpen, setIsDialogOpen] = useState(false);\n  const handleCloseDialog = () => {\n    setIsDialogOpen(false);\n  };\n  const openDialog = () => {\n    setIsDialogOpen(true);\n  };\n  const logOutDoctor = () => {\n    setIsDialogOpen(false);\n    handleDoctorLogOut();\n  };\n  return (\n    <div className={classes.root}>\n      <span className={classes.actionContainer}>\n        <span className={classes.welcomeMessage}>{doctor.name}医生已登入</span>\n        <Button\n          color=\"secondary\"\n          startIcon={<ExitToAppIcon />}\n          onClick={openDialog}\n        >\n          退出\n        </Button>\n      </span>\n      <Dialog\n        open={isDialogOpen}\n        onClose={handleCloseDialog}\n        aria-labelledby=\"alert-dialog-title\"\n        aria-describedby=\"alert-dialog-description\"\n      >\n        <DialogTitle id=\"alert-dialog-title\">{\"确认退出？\"}</DialogTitle>\n        <DialogContent>\n          <DialogContentText id=\"alert-dialog-description\">\n            退出后需要输入医生的账号和密码才能重新登入\n          </DialogContentText>\n        </DialogContent>\n        <DialogActions>\n          <Button onClick={handleCloseDialog}>取消</Button>\n          <Button onClick={logOutDoctor} color=\"secondary\">\n            退出\n          </Button>\n        </DialogActions>\n      </Dialog>\n    </div>\n  );\n};\n","import {\n  Button,\n  createStyles,\n  Dialog,\n  DialogActions,\n  DialogContent,\n  DialogContentText,\n  DialogTitle,\n  Grid,\n  makeStyles,\n  TextField,\n  Theme,\n} from \"@material-ui/core\";\nimport React, {\n  forwardRef,\n  useEffect,\n  useImperativeHandle,\n  useState,\n} from \"react\";\nimport VpnKeyIcon from \"@material-ui/icons/VpnKey\";\n\ninterface Props {\n  isDialogOpen: boolean;\n  setIsDialogOpen: (isDialogOpen: boolean) => void;\n  doctorName: string;\n  handleDoctorLogIn: (password: string) => void;\n  hideErrorIndicator: () => void;\n}\n\nconst useStyles = makeStyles((theme: Theme) =>\n  createStyles({\n    passwordInput: {\n      minWidth: 300,\n    },\n  })\n);\n\nexport interface DoctorLogInDialogHandle {\n  showError: () => void;\n  hideError: () => void;\n}\n\nexport const DoctorLogInDialog = forwardRef<DoctorLogInDialogHandle, Props>(\n  (props: Props, ref) => {\n    const handleKeyPress = (event: KeyboardEvent) => {\n      if (event.key === \"Enter\") {\n        handleClickLogIn();\n      }\n    };\n    useEffect(() => {\n      window.addEventListener(\"keydown\", handleKeyPress);\n\n      return () => {\n        window.removeEventListener(\"keydown\", handleKeyPress);\n      };\n    });\n    const classes = useStyles();\n    const {\n      isDialogOpen,\n      setIsDialogOpen,\n      doctorName,\n      handleDoctorLogIn,\n      hideErrorIndicator,\n    } = props;\n    const [password, setPassword] = useState(\"\");\n    const [isErrorShown, setIsErrorShown] = useState(false);\n\n    useImperativeHandle(ref, () => ({\n      showError: () => {\n        setIsErrorShown(true);\n      },\n      hideError: () => {\n        setIsErrorShown(false);\n      },\n    }));\n    const handlePasswordChange = (e: React.ChangeEvent<HTMLInputElement>) => {\n      hideErrorIndicator();\n      setPassword(e.target.value);\n    };\n    const handleClickLogIn = () => {\n      handleDoctorLogIn(password);\n    };\n    const handleClickCancel = () => {\n      setIsDialogOpen(false);\n    };\n    return (\n      <Dialog open={isDialogOpen} onClose={handleClickCancel}>\n        <DialogTitle>请确认您的密码</DialogTitle>\n        <DialogContent>\n          <DialogContentText>当前登入的医生为{doctorName}</DialogContentText>\n          <Grid container spacing={2} alignItems=\"center\">\n            <Grid item>\n              <VpnKeyIcon />\n            </Grid>\n            <Grid item>\n              <TextField\n                autoFocus\n                className={classes.passwordInput}\n                label=\"密码\"\n                type=\"password\"\n                value={password}\n                onChange={handlePasswordChange}\n                helperText={\n                  isErrorShown && !password ? \"请输入您的密码\" : undefined\n                }\n                error={isErrorShown && !password ? true : undefined}\n              />\n            </Grid>\n          </Grid>\n        </DialogContent>\n        <DialogActions>\n          <Button onClick={handleClickCancel} color=\"primary\">\n            取消\n          </Button>\n          <Button onClick={handleClickLogIn} color=\"primary\">\n            确认\n          </Button>\n        </DialogActions>\n      </Dialog>\n    );\n  }\n);\n","import { Button, createStyles, makeStyles, Theme } from \"@material-ui/core\";\nimport React, { ElementRef, useRef, useState } from \"react\";\nimport { DoctorLogInDialog } from \"./components\";\nimport logo from \"../AppHeader/assets/logo.png\";\nimport PlayArrowRoundedIcon from \"@material-ui/icons/PlayArrowRounded\";\nimport { FetchResult } from \"@apollo/client\";\n// import { DOCTOR_LOG_OUT } from \"../../lib/graphql/mutations\";\nimport { Doctor } from \"../../lib/type\";\n// import { DoctorLogOut } from \"../../lib/graphql/mutations/DoctorLogOut/__generated__/doctorLogOut\";\nimport { useHistory } from \"react-router-dom\";\nimport { ErrorIndicator } from \"../../lib/components\";\nimport {\n  DoctorLogIn,\n  DoctorLogInVariables,\n} from \"../../lib/graphql/mutations/DoctorLogIn/__generated__/DoctorLogIn\";\n\nconst useStyles = makeStyles((theme: Theme) =>\n  createStyles({\n    root: {\n      height: \"100%\",\n      width: \"100%\",\n      background: \"#e3f2fd\",\n    },\n    logoContainer: {\n      display: \"flex\",\n      minHeight: 92,\n      maxHeight: 290,\n      height: \"calc(100% - 560px)\",\n      justifyContent: \"center\",\n    },\n    logo: {\n      maxHeight: 92,\n      height: \"100%\",\n      marginTop: \"auto\",\n    },\n    actionContainer: {\n      maxHeight: 160,\n      padding: 20,\n      display: \"flex\",\n      alignItems: \"center\",\n      flexDirection: \"column\",\n      fontSize: \"1.5rem\",\n    },\n    enterSystemButtonContainer: {\n      marginTop: 18,\n    },\n    extendedIcon: {\n      position: \"absolute\",\n      right: 20,\n      bottom: 20,\n      backgroundColor: \"#fff\",\n    },\n    seuText: {\n      margin: \"10px 0 15px\",\n    },\n    header: {\n      height: 52,\n    },\n  })\n);\n\ninterface Props {\n  doctor: Doctor;\n  setDoctor: (doctor: Doctor) => void;\n  logIn: (variables?: {\n    variables: DoctorLogInVariables;\n  }) => Promise<FetchResult<DoctorLogIn>>;\n}\n\nexport const Welcome = ({ setDoctor, doctor, logIn }: Props) => {\n  const history = useHistory();\n  const classes = useStyles();\n  const doctorLogInDialogRef = useRef<ElementRef<typeof DoctorLogInDialog>>(\n    null\n  );\n  // const [logOut] = useMutation<DoctorLogOut>(DOCTOR_LOG_OUT, {\n  //   onCompleted: (data) => {\n  //     if (data && data.doctorLogOut) {\n  //       setDoctor(data.doctorLogOut);\n  //       sessionStorage.removeItem(\"token\");\n  //       console.log(\"log out successfully\");\n  //     }\n  //   },\n  //   onError: (error) => {\n  //     console.log(error);\n  //     console.log(\"log out failed\");\n  //   },\n  // });\n  const [isDialogOpen, setIsDialogOpen] = useState(false);\n  // const openDoctorLoginDialog = () => {\n  //   doctorLogInDialogRef.current?.hideError();\n  //   setIsDialogOpen(true);\n  // };\n  // const handleDoctorLogOut = () => {\n  //   logOut();\n  // };\n  const [isLogInErrorShown, setIsLogInErrorShown] = useState(false);\n  const handleDoctorLogIn = async (password: string) => {\n    if (doctor.userName) {\n      if (!password) {\n        doctorLogInDialogRef.current?.showError();\n        return;\n      }\n      try {\n        const logInResult = await logIn({\n          variables: {\n            input: {\n              userName: doctor.userName,\n              password,\n            },\n          },\n        });\n        if (logInResult.data && logInResult.data.doctorLogIn.userName) {\n          console.log(\"Second login succeeds.\");\n          history.push(\"/doctor\");\n        }\n      } catch {\n        setIsLogInErrorShown(true);\n      }\n    }\n  };\n  const hideErrorIndicator = () => {\n    setIsLogInErrorShown(false);\n  };\n  const goToPromptPage = () => {\n    history.push(\"/user/prompt\");\n  };\n  return (\n    <div className={classes.root}>\n      <div className={classes.header} />\n      {/* <Header handleDoctorLogOut={handleDoctorLogOut} doctor={doctor} /> */}\n      <div className={classes.logoContainer}>\n        <img src={logo} alt=\"中大医院\" className={classes.logo} />\n      </div>\n      <div className={classes.actionContainer}>\n        <div className={classes.seuText}>东南大学附属中大医院</div>\n        <div>心理健康评估系统</div>\n        <div className={classes.enterSystemButtonContainer}>\n          <Button\n            startIcon={<PlayArrowRoundedIcon />}\n            color=\"primary\"\n            variant=\"contained\"\n            onClick={goToPromptPage}\n          >\n            进入系统\n          </Button>\n        </div>\n      </div>\n      {/* <Fab\n        variant=\"extended\"\n        className={classes.extendedIcon}\n        onClick={openDoctorLoginDialog}\n      >\n        <SupervisorAccountIcon />\n        医生端\n      </Fab> */}\n      {doctor.name && (\n        <DoctorLogInDialog\n          isDialogOpen={isDialogOpen}\n          setIsDialogOpen={setIsDialogOpen}\n          doctorName={doctor.name}\n          handleDoctorLogIn={handleDoctorLogIn}\n          hideErrorIndicator={hideErrorIndicator}\n          ref={doctorLogInDialogRef}\n        />\n      )}\n      <ErrorIndicator\n        showError={isLogInErrorShown}\n        setShowError={setIsLogInErrorShown}\n        errorMessage={\"密码不正确！\"}\n      />\n    </div>\n  );\n};\n","import { makeStyles, Theme, createStyles, Button } from \"@material-ui/core\";\nimport React from \"react\";\nimport NavigateNextIcon from \"@material-ui/icons/NavigateNext\";\nimport { ReturnToHomeHeader } from \"../../lib/components\";\nimport { Link } from \"react-router-dom\";\n\nconst useStyles = makeStyles((theme: Theme) =>\n  createStyles({\n    root: {\n      background: \"#e3f2fd\",\n      height: \"100%\",\n      width: \"100%\",\n    },\n    titleWrapper: {\n      height: \"100%\",\n    },\n    title: {\n      fontSize: \"1.5rem\",\n      textAlign: \"center\",\n    },\n    promptTextContainer: {\n      display: \"flex\",\n      justifyContent: \"center\",\n      paddingTop: 50,\n      background: \"#e3f2fd\",\n    },\n    promptText: {\n      width: \"50%\",\n      minWidth: \"min(85%, 400px)\",\n      lineHeight: \"1.5rem\",\n    },\n    buttonContainer: {\n      display: \"flex\",\n      justifyContent: \"center\",\n      paddingTop: 50,\n      background: \"#e3f2fd\",\n      paddingBottom: 20,\n    },\n    titleContainer: {\n      minHeight: 75,\n      maxHeight: 290,\n      height: \"calc(100% - 610px)\",\n      display: \"flex\",\n      flexDirection: \"column\",\n      justifyContent: \"flex-end\",\n      background: \"#e3f2fd\",\n    },\n  })\n);\nexport const PromptMessage = () => {\n  const classes = useStyles();\n  return (\n    <div className={classes.root}>\n      <ReturnToHomeHeader />\n      <div className={classes.titleContainer}>\n        <div className={classes.title}>指导语</div>\n      </div>\n      <div className={classes.promptTextContainer}>\n        <div className={classes.promptText}>\n          在接下来大约20分钟的时间里您将进行一系列的量表评估，目的是对您的心理状况及个性特征进行评估，下面的问题并不存在所谓正确或者错误的答案，您只需要按照自己真实的状况完成就可以了。也许您会觉得自己并不完全如题目所描述的那样，这时候您可以根据选项选择最接近您的状况。请记住，这里并没有正确或错误，您只要如实回答问题就可以了。\n        </div>\n      </div>\n      <div className={classes.buttonContainer}>\n        <Link to=\"/user/login\">\n          <Button\n            variant=\"contained\"\n            color=\"primary\"\n            endIcon={<NavigateNextIcon />}\n          >\n            下一步\n          </Button>\n        </Link>\n      </div>\n    </div>\n  );\n};\n","import { gql } from \"@apollo/client\";\n\nexport const PATIENT_LOG_IN = gql`\n  mutation PatientLogIn($input: UserLoginInput) {\n    patientLogIn(input: $input) {\n      name\n      userName\n      education\n      jobStatus\n      gender\n      marriageStatus\n      age\n      didRequest\n    }\n  }\n`;\n","import {\n  makeStyles,\n  Theme,\n  createStyles,\n  Button,\n  TextField,\n  FormControl,\n  InputLabel,\n  MenuItem,\n  Select,\n  Snackbar,\n  Grid,\n} from \"@material-ui/core\";\nimport React, { useEffect, useRef, useState } from \"react\";\nimport NavigateNextIcon from \"@material-ui/icons/NavigateNext\";\nimport { LoadingIndicator, ReturnToHomeHeader } from \"../../lib/components\";\nimport AccountCircle from \"@material-ui/icons/AccountCircle\";\nimport InputAdornment from \"@material-ui/core/InputAdornment\";\nimport AssignmentIndIcon from \"@material-ui/icons/AssignmentInd\";\nimport { useLazyQuery, useMutation } from \"@apollo/client\";\nimport { QUERY_USER } from \"../../lib/graphql/queries/QueryUser\";\nimport {\n  QueryUser,\n  QueryUserVariables,\n} from \"../../lib/graphql/queries/QueryUser/__generated__/QueryUser\";\nimport Alert from \"@material-ui/lab/Alert\";\nimport WcIcon from \"@material-ui/icons/Wc\";\nimport AccessibilityIcon from \"@material-ui/icons/Accessibility\";\nimport ChildCareIcon from \"@material-ui/icons/ChildCare\";\nimport SchoolIcon from \"@material-ui/icons/School\";\nimport WorkIcon from \"@material-ui/icons/Work\";\nimport {\n  PatientLogIn,\n  PatientLogInVariables,\n} from \"../../lib/graphql/mutations/PatientLogIn/__generated__/PatientLogIn\";\nimport { Patient } from \"../../lib/type\";\nimport { PATIENT_LOG_IN } from \"../../lib/graphql/mutations/PatientLogIn\";\nimport { useHistory, useLocation } from \"react-router-dom\";\n\nconst useStyles = makeStyles((theme: Theme) =>\n  createStyles({\n    root: {\n      background: \"#e3f2fd\",\n      height: \"100%\",\n      width: \"100%\",\n    },\n    titleWrapper: {\n      height: \"100%\",\n    },\n    title: {\n      fontSize: \"1.5rem\",\n      textAlign: \"center\",\n    },\n    buttonContainer: {\n      display: \"flex\",\n      justifyContent: \"center\",\n      paddingTop: 50,\n      background: \"#e3f2fd\",\n      paddingBottom: 20,\n    },\n    titleContainer: {\n      minHeight: 75,\n      maxHeight: 290,\n      height: \"calc(100% - 630px)\",\n      display: \"flex\",\n      flexDirection: \"column\",\n      justifyContent: \"flex-end\",\n      background: \"#e3f2fd\",\n    },\n    inputContainer: {\n      display: \"flex\",\n      justifyContent: \"center\",\n      paddingTop: 50,\n    },\n    personalInformationContainer: {\n      display: \"flex\",\n      flexDirection: \"column\",\n      alignItems: \"center\",\n      paddingTop: 20,\n      background: \"#e3f2fd\",\n    },\n    input: {\n      width: 250,\n      paddingTop: 5,\n      paddingBottom: 5,\n    },\n    actionsWrapper: {\n      display: \"flex\",\n      justifyContent: \"center\",\n      background: \"#e3f2fd\",\n    },\n    actionsContainer: {\n      display: \"flex\",\n      justifyContent: \"space-between\",\n      paddingTop: 50,\n      background: \"#e3f2fd\",\n      paddingBottom: 20,\n      width: 300,\n    },\n  })\n);\n\ninterface Props {\n  setPatient: (patient: Patient) => void;\n  patient: Patient;\n}\n\nfunction useQueryParams() {\n  return new URLSearchParams(useLocation().search);\n}\n\nexport const PatientLogin = ({ setPatient, patient }: Props) => {\n  const queryParams = useQueryParams();\n  const initRef = useRef(() => {\n    const userName = queryParams.get(\"userName\");\n    if (userName) {\n      setUserName(userName);\n      handleNextButtonClick(userName);\n    }\n  });\n  useEffect(() => {\n    initRef.current();\n  }, []);\n  const handleKeyPress = (event: KeyboardEvent) => {\n    if (event.key === \"Enter\") {\n      if (isBasicInformationShown) {\n        handleLogInButtonClick();\n      } else {\n        handleNextButtonClick(undefined);\n      }\n    }\n  };\n  useEffect(() => {\n    window.addEventListener(\"keydown\", handleKeyPress);\n\n    return () => {\n      window.removeEventListener(\"keydown\", handleKeyPress);\n    };\n  });\n\n  const [patientLogIn] = useMutation<PatientLogIn, PatientLogInVariables>(\n    PATIENT_LOG_IN,\n    {\n      onCompleted: (data) => {\n        if (data && data.patientLogIn) {\n          setPatient(data.patientLogIn);\n        }\n      },\n    }\n  );\n  const classes = useStyles();\n  const [isUserNameValidated, setIsUserNameValidated] = useState(false);\n  const [isNameValidated, setIsNameValidated] = useState(false);\n  const [getQueryResult, { loading, data: userListData }] = useLazyQuery<\n    QueryUser,\n    QueryUserVariables\n  >(QUERY_USER, {\n    fetchPolicy: \"no-cache\",\n    onCompleted: (data) => {\n      if (data.queryUser.total > 0) {\n        const userInfo = data.queryUser.users[0];\n        userInfo.name && setName(userInfo.name);\n        userInfo.gender && setGender(userInfo.gender);\n        userInfo.age && setAge(userInfo.age);\n        userInfo.education && setEducation(userInfo.education);\n        userInfo.jobStatus && setJobStatus(userInfo.jobStatus);\n        userInfo.marriageStatus && setMarriageStatus(userInfo.marriageStatus);\n        setShowLoadSuccess(true);\n      } else {\n        setName(\"\");\n        setGender(\"\");\n        setAge(\"\");\n        setEducation(\"\");\n        setJobStatus(\"\");\n        setMarriageStatus(\"\");\n      }\n    },\n  });\n  const [isBasicInformationShown, setIsBasicInformationShown] = useState(false);\n  const [userName, setUserName] = useState(\"\");\n  const [name, setName] = useState(\"\");\n  const [gender, setGender] = useState(\"\");\n  const [age, setAge] = useState(\"\");\n  const [education, setEducation] = useState(\"\");\n  const [jobStatus, setJobStatus] = useState(\"\");\n  const [marriageStatus, setMarriageStatus] = useState(\"\");\n  const onNameChange = (e: React.ChangeEvent<HTMLInputElement>) => {\n    setName(e.target.value);\n  };\n  const onGenderChange = (\n    e: React.ChangeEvent<{\n      name?: string | undefined;\n      value: unknown;\n    }>\n  ) => {\n    setGender(e.target.value as string);\n  };\n  const onAgeChange = (e: React.ChangeEvent<HTMLInputElement>) => {\n    setAge(e.target.value);\n  };\n  const [showLoadSuccess, setShowLoadSuccess] = useState(false);\n  const handleCloseLoadSuccess = () => {\n    setShowLoadSuccess(false);\n  };\n  const handleUserNameChange = (e: React.ChangeEvent<HTMLInputElement>) => {\n    setUserName(e.target.value);\n  };\n  const [showNameErrorMessage, setShowNameErrorMessage] = useState(false);\n  const handleCloseNameErrorMessage = () => {\n    setShowNameErrorMessage(false);\n  };\n  const onEducationChange = (\n    e: React.ChangeEvent<{\n      name?: string | undefined;\n      value: unknown;\n    }>\n  ) => {\n    setEducation(e.target.value as string);\n  };\n  const onMarriageStatusChange = (\n    e: React.ChangeEvent<{\n      name?: string | undefined;\n      value: unknown;\n    }>\n  ) => {\n    setMarriageStatus(e.target.value as string);\n  };\n  const onJobChange = (e: React.ChangeEvent<HTMLInputElement>) => {\n    setJobStatus(e.target.value);\n  };\n  const handleNextButtonClick = async (\n    userNameFromQueryParams: string | undefined\n  ) => {\n    if (!isBasicInformationShown) {\n      if (userName || userNameFromQueryParams) {\n        await getQueryResult({\n          variables: {\n            userName: userNameFromQueryParams\n              ? userNameFromQueryParams\n              : userName,\n            limit: 1,\n            currentPageIndex: 0,\n          },\n        });\n        setIsBasicInformationShown(true);\n      } else {\n        // Show the userName cannot be empty error.\n        setIsUserNameValidated(true);\n      }\n    }\n  };\n  const handleCancel = () => {\n    setIsBasicInformationShown(false);\n  };\n  const history = useHistory();\n  const handleLogInButtonClick = async () => {\n    if (name) {\n      await patientLogIn({\n        variables: {\n          input: {\n            userName,\n            education,\n            name,\n            age: age !== \"\" ? Number(age) : undefined,\n            gender,\n            jobStatus,\n            marriageStatus,\n          },\n        },\n      });\n      history.push(\"/user/home\");\n    } else {\n      setIsNameValidated(true);\n      setShowNameErrorMessage(true);\n    }\n  };\n  return (\n    <div className={classes.root}>\n      <ReturnToHomeHeader />\n      {isBasicInformationShown ? (\n        loading ? (\n          <LoadingIndicator />\n        ) : (\n          <>\n            {userListData && userListData.queryUser.total > 0 ? (\n              <div className={classes.titleContainer}>\n                <div className={classes.title}>请核实您的个人信息</div>\n              </div>\n            ) : (\n              <div className={classes.titleContainer}>\n                <div className={classes.title}>请输入您的个人信息</div>\n              </div>\n            )}\n            <div className={classes.personalInformationContainer}>\n              <div>\n                <Grid container spacing={1} alignItems=\"flex-end\">\n                  <Grid item>\n                    <AccountCircle />\n                  </Grid>\n                  <Grid item>\n                    <TextField\n                      label=\"姓名\"\n                      className={classes.input}\n                      required\n                      value={name}\n                      onChange={onNameChange}\n                      error={isNameValidated && !name ? true : false}\n                    />\n                  </Grid>\n                </Grid>\n              </div>\n              <div>\n                <Grid container spacing={1} alignItems=\"flex-end\">\n                  <Grid item>\n                    <WcIcon />\n                  </Grid>\n                  <Grid item>\n                    <FormControl size=\"small\" className={classes.input}>\n                      <InputLabel>性别</InputLabel>\n                      <Select\n                        color=\"primary\"\n                        label=\"性别\"\n                        onChange={onGenderChange}\n                        value={gender}\n                      >\n                        <MenuItem value=\"男\">男</MenuItem>\n                        <MenuItem value=\"女\">女</MenuItem>\n                      </Select>\n                    </FormControl>\n                  </Grid>\n                </Grid>\n              </div>\n              <div>\n                <Grid container spacing={1} alignItems=\"flex-end\">\n                  <Grid item>\n                    <AccessibilityIcon />\n                  </Grid>\n                  <Grid item>\n                    <TextField\n                      className={classes.input}\n                      color=\"primary\"\n                      label=\"年龄\"\n                      size=\"small\"\n                      type=\"number\"\n                      value={age}\n                      onChange={onAgeChange}\n                    />\n                  </Grid>\n                </Grid>\n              </div>\n              <div>\n                <Grid container spacing={1} alignItems=\"flex-end\">\n                  <Grid item>\n                    <ChildCareIcon />\n                  </Grid>\n                  <Grid item>\n                    <FormControl size=\"small\" className={classes.input}>\n                      <InputLabel>婚姻</InputLabel>\n                      <Select\n                        color=\"primary\"\n                        value={marriageStatus}\n                        onChange={onMarriageStatusChange}\n                      >\n                        <MenuItem value=\"已婚\">已婚</MenuItem>\n                        <MenuItem value=\"未婚\">未婚</MenuItem>\n                      </Select>\n                    </FormControl>\n                  </Grid>\n                </Grid>\n              </div>\n              <div>\n                <Grid container spacing={1} alignItems=\"flex-end\">\n                  <Grid item>\n                    <SchoolIcon />\n                  </Grid>\n                  <Grid item>\n                    <FormControl size=\"small\" className={classes.input}>\n                      <InputLabel>教育</InputLabel>\n                      <Select\n                        color=\"primary\"\n                        value={education}\n                        onChange={onEducationChange}\n                      >\n                        <MenuItem value=\"高中以下\">高中以下</MenuItem>\n                        <MenuItem value=\"大中专科\">大中专科</MenuItem>\n                        <MenuItem value=\"本科\">本科</MenuItem>\n                        <MenuItem value=\"硕士\">硕士</MenuItem>\n                        <MenuItem value=\"博士\">博士</MenuItem>\n                      </Select>\n                    </FormControl>\n                  </Grid>\n                </Grid>\n              </div>\n              <div>\n                <Grid container spacing={1} alignItems=\"flex-end\">\n                  <Grid item>\n                    <WorkIcon />\n                  </Grid>\n                  <Grid item>\n                    <TextField\n                      color=\"primary\"\n                      label=\"职业\"\n                      size=\"small\"\n                      className={classes.input}\n                      value={jobStatus}\n                      onChange={onJobChange}\n                    />\n                  </Grid>\n                </Grid>\n              </div>\n            </div>\n          </>\n        )\n      ) : (\n        <>\n          <div className={classes.titleContainer}>\n            <div className={classes.title}>请输入您的门诊号</div>\n          </div>\n          <div className={classes.inputContainer}>\n            <TextField\n              label=\"门诊号\"\n              InputProps={{\n                startAdornment: (\n                  <InputAdornment position=\"start\">\n                    <AssignmentIndIcon />\n                  </InputAdornment>\n                ),\n              }}\n              value={userName}\n              onChange={handleUserNameChange}\n              autoFocus\n              error={isUserNameValidated && !userName ? true : undefined}\n              helperText={\n                isUserNameValidated && !userName\n                  ? \"请输入您的门诊号\"\n                  : undefined\n              }\n            />\n          </div>\n        </>\n      )}\n      {isBasicInformationShown ? (\n        loading ? null : (\n          <div className={classes.actionsWrapper}>\n            <div className={classes.actionsContainer}>\n              <Button onClick={handleCancel}>取消</Button>\n              <Button\n                variant=\"contained\"\n                color=\"primary\"\n                onClick={handleLogInButtonClick}\n              >\n                确定\n              </Button>\n            </div>\n          </div>\n        )\n      ) : (\n        <div className={classes.buttonContainer}>\n          <Button\n            variant=\"contained\"\n            color=\"primary\"\n            endIcon={<NavigateNextIcon />}\n            onClick={() => handleNextButtonClick(undefined)}\n          >\n            下一步\n          </Button>\n        </div>\n      )}\n      <Snackbar\n        open={showLoadSuccess}\n        autoHideDuration={6000}\n        onClose={handleCloseLoadSuccess}\n        anchorOrigin={{ vertical: \"bottom\", horizontal: \"left\" }}\n      >\n        <Alert\n          onClose={handleCloseLoadSuccess}\n          severity=\"success\"\n          variant=\"filled\"\n        >\n          成功载入您的个人信息\n        </Alert>\n      </Snackbar>\n      <Snackbar\n        open={showNameErrorMessage}\n        autoHideDuration={6000}\n        onClose={handleCloseNameErrorMessage}\n        anchorOrigin={{ vertical: \"bottom\", horizontal: \"left\" }}\n      >\n        <Alert\n          onClose={handleCloseNameErrorMessage}\n          severity=\"error\"\n          variant=\"filled\"\n        >\n          姓名为必填项！\n        </Alert>\n      </Snackbar>\n    </div>\n  );\n};\n","import { gql } from \"@apollo/client\";\n\nexport const CHECK_IF_DOCTOR_USER_NAME_UNIQUE = gql`\n  query CheckIfDoctorNameUnique($userName: String!) {\n    checkIfDoctorUserNameUnique(userName: $userName) {\n      result\n    }\n  }\n`;\n","import { Snackbar } from \"@material-ui/core\";\nimport React from \"react\";\nimport MuiAlert from \"@material-ui/lab/Alert\";\n\ninterface Props {\n  showSuccess: boolean;\n  setShowSuccess: (showError: boolean) => void;\n  successMessage: string;\n}\n\nexport const SuccessIndicator = (props: Props) => {\n  const { showSuccess, setShowSuccess, successMessage } = props;\n  return (\n    <Snackbar\n      open={showSuccess}\n      onClose={() => setShowSuccess(false)}\n      anchorOrigin={{ vertical: \"bottom\", horizontal: \"left\" }}\n    >\n      <MuiAlert\n        elevation={6}\n        variant=\"filled\"\n        severity=\"success\"\n        onClose={() => setShowSuccess(false)}\n      >\n        {successMessage}\n      </MuiAlert>\n    </Snackbar>\n  );\n};\n","import {\n  FetchResult,\n  MutationFunctionOptions,\n  QueryLazyOptions,\n} from \"@apollo/client\";\nimport {\n  Dialog,\n  DialogTitle,\n  DialogContent,\n  DialogContentText,\n  TextField,\n  DialogActions,\n  Button,\n  createStyles,\n  makeStyles,\n  Theme,\n  debounce,\n} from \"@material-ui/core\";\nimport React, { useCallback, useEffect, useState } from \"react\";\nimport { ErrorIndicator } from \"../../../../lib/components\";\nimport { SuccessIndicator } from \"../../../../lib/components/SuccessIndicator\";\nimport {\n  AddDoctor,\n  AddDoctorVariables,\n} from \"../../../../lib/graphql/mutations/AddDoctor/__generated__/AddDoctor\";\nimport {\n  CheckIfDoctorNameUnique,\n  CheckIfDoctorNameUniqueVariables,\n} from \"../../../../lib/graphql/queries/CheckIfDoctorNameUnique/__generated__/CheckIfDoctorNameUnique\";\n\ninterface Props {\n  isOpen: boolean;\n  closeDialog: () => void;\n  checkDoctorUserName: (\n    options: QueryLazyOptions<CheckIfDoctorNameUniqueVariables>\n  ) => void;\n  checkResult: CheckIfDoctorNameUnique | undefined;\n  addDoctor: (\n    options?: MutationFunctionOptions<AddDoctor, AddDoctorVariables>\n  ) => Promise<FetchResult<AddDoctor>>;\n  refetchListData: () => void;\n}\n\nconst useStyles = makeStyles((theme: Theme) =>\n  createStyles({\n    input: {\n      display: \"block\",\n      margin: 5,\n      paddingRight: 5,\n    },\n    inputContainer: {\n      display: \"flex\",\n      justifyContent: \"center\",\n    },\n  })\n);\n\nexport const AddDoctorDialog = (props: Props) => {\n  const classes = useStyles();\n  const {\n    isOpen,\n    closeDialog,\n    checkDoctorUserName,\n    checkResult,\n    addDoctor,\n    refetchListData,\n  } = props;\n  const [userNameInput, setUserNameInput] = useState(\"\");\n  const [nameInput, setNameInput] = useState(\"\");\n  const [passwordInput, setPasswordInput] = useState(\"\");\n  const [secondPasswordInput, setSecondPasswordInput] = useState(\"\");\n  const [userNameDuplicate, setUserNameDubplicate] = useState(false);\n  const [isErrorShown, setIsErrorShown] = useState(false);\n  const [errorMessage, setErrorMessage] = useState(\"\");\n  const [isSuccessShown, setIsSuccessShown] = useState(false);\n  // eslint-disable-next-line react-hooks/exhaustive-deps\n  const debouncedCheckDoctorUserName = useCallback(\n    debounce(checkDoctorUserName, 300),\n    [checkDoctorUserName]\n  );\n  useEffect(() => {\n    setUserNameInput(\"\");\n    setNameInput(\"\");\n    setPasswordInput(\"\");\n    setSecondPasswordInput(\"\");\n    setUserNameDubplicate(false);\n    setIsSuccessShown(false);\n  }, [isOpen]);\n  useEffect(() => {\n    checkResult &&\n      setUserNameDubplicate(!checkResult.checkIfDoctorUserNameUnique.result);\n  }, [checkResult]);\n  const handleUserNameChange = (e: React.ChangeEvent<HTMLInputElement>) => {\n    setUserNameInput(e.target.value);\n    setUserNameDubplicate(false);\n    debouncedCheckDoctorUserName({\n      variables: {\n        userName: e.target.value,\n      },\n    });\n  };\n  const handleNameChange = (e: React.ChangeEvent<HTMLInputElement>) => {\n    setNameInput(e.target.value);\n  };\n  const handlePasswordChange = (e: React.ChangeEvent<HTMLInputElement>) => {\n    setPasswordInput(e.target.value);\n  };\n\n  const handleSecondPasswordInput = (\n    e: React.ChangeEvent<HTMLInputElement>\n  ) => {\n    setSecondPasswordInput(e.target.value);\n  };\n\n  const handleAddButtonClick = async () => {\n    if (passwordInput !== secondPasswordInput) {\n      setErrorMessage(\"两次输入的密码不相同！\");\n      setIsErrorShown(true);\n      return;\n    }\n    const result = await addDoctor({\n      variables: {\n        input: {\n          userName: userNameInput,\n          name: nameInput,\n          password: passwordInput,\n        },\n      },\n    });\n    if (result.data?.addDoctor.result) {\n      closeDialog();\n      refetchListData();\n      setIsSuccessShown(true);\n    }\n  };\n  return (\n    <>\n      <Dialog\n        open={isOpen}\n        onClose={closeDialog}\n        aria-labelledby=\"form-dialog-title\"\n      >\n        <DialogTitle id=\"form-dialog-title\">添加医生</DialogTitle>\n        <DialogContent>\n          <DialogContentText>\n            请输入医生的用户名、姓名和密码。\n          </DialogContentText>\n          <TextField\n            autoFocus\n            label=\"用户名\"\n            className={classes.input}\n            fullWidth\n            required\n            value={userNameInput}\n            onChange={handleUserNameChange}\n            error={userNameDuplicate || undefined}\n            helperText={userNameDuplicate ? \"此用户名已经被注册！\" : undefined}\n          />\n          <TextField\n            label=\"姓名\"\n            className={classes.input}\n            fullWidth\n            required\n            value={nameInput}\n            onChange={handleNameChange}\n          />\n          <TextField\n            label=\"密码\"\n            className={classes.input}\n            fullWidth\n            required\n            type=\"password\"\n            value={passwordInput}\n            onChange={handlePasswordChange}\n          />\n          <TextField\n            label=\"确认密码\"\n            className={classes.input}\n            fullWidth\n            required\n            type=\"password\"\n            value={secondPasswordInput}\n            onChange={handleSecondPasswordInput}\n          />\n        </DialogContent>\n        <DialogActions>\n          <Button onClick={closeDialog}>取消</Button>\n          <Button\n            onClick={handleAddButtonClick}\n            color=\"primary\"\n            disabled={\n              userNameDuplicate ||\n              !nameInput ||\n              !userNameInput ||\n              !passwordInput ||\n              !secondPasswordInput\n                ? true\n                : undefined\n            }\n          >\n            添加\n          </Button>\n        </DialogActions>\n        <ErrorIndicator\n          showError={isErrorShown}\n          setShowError={setIsErrorShown}\n          errorMessage={errorMessage}\n        />\n      </Dialog>\n      <SuccessIndicator\n        showSuccess={isSuccessShown}\n        setShowSuccess={setIsSuccessShown}\n        successMessage=\"成功创建账号\"\n      />\n    </>\n  );\n};\n","import { useLazyQuery, useMutation, useQuery } from \"@apollo/client\";\nimport {\n  Avatar,\n  Button,\n  createStyles,\n  Divider,\n  List,\n  ListItem,\n  ListItemAvatar,\n  ListItemText,\n  makeStyles,\n  Paper,\n  Theme,\n} from \"@material-ui/core\";\nimport { Pagination } from \"@material-ui/lab\";\nimport React, { useState } from \"react\";\nimport { LoadingIndicator } from \"../../lib/components\";\nimport { ADD_DOCTOR } from \"../../lib/graphql/mutations/AddDoctor\";\nimport {\n  AddDoctor,\n  AddDoctorVariables,\n} from \"../../lib/graphql/mutations/AddDoctor/__generated__/AddDoctor\";\nimport { DOCTOR_LIST } from \"../../lib/graphql/queries\";\nimport { CHECK_IF_DOCTOR_USER_NAME_UNIQUE } from \"../../lib/graphql/queries/CheckIfDoctorNameUnique\";\nimport {\n  CheckIfDoctorNameUnique,\n  CheckIfDoctorNameUniqueVariables,\n} from \"../../lib/graphql/queries/CheckIfDoctorNameUnique/__generated__/CheckIfDoctorNameUnique\";\nimport {\n  DoctorList,\n  DoctorListVariables,\n} from \"../../lib/graphql/queries/DoctorList/__generated__/DoctorList\";\nimport { Header } from \"../PatientInformation/components\";\nimport { AddDoctorDialog } from \"./components\";\nimport PersonIcon from \"@material-ui/icons/Person\";\nimport { blue } from \"@material-ui/core/colors\";\n\nconst DEFAULT_LIMIT = 5;\n\nconst useStyles = makeStyles((theme: Theme) =>\n  createStyles({\n    list: {\n      margin: \"20px 10px\",\n    },\n    actionContainer: {\n      margin: 10,\n      display: \"flex\",\n      justifyContent: \"space-between\",\n      alignItems: \"center\",\n    },\n    paginationContainer: {\n      display: \"flex\",\n      alignItems: \"center\",\n    },\n    totalNumberText: {\n      marginRight: 5,\n    },\n    avatar: {\n      backgroundColor: blue[100],\n      color: blue[600],\n    },\n  })\n);\nexport const CreateDoctor = () => {\n  const classes = useStyles();\n  const { loading, data, refetch } = useQuery<DoctorList, DoctorListVariables>(\n    DOCTOR_LIST,\n    {\n      variables: {\n        limit: DEFAULT_LIMIT,\n        currentPageIndex: 0,\n      },\n      fetchPolicy: \"network-only\",\n    }\n  );\n  const [checkDoctorName, { data: checkNameData }] = useLazyQuery<\n    CheckIfDoctorNameUnique,\n    CheckIfDoctorNameUniqueVariables\n  >(CHECK_IF_DOCTOR_USER_NAME_UNIQUE, {\n    fetchPolicy: \"no-cache\",\n  });\n  const [addDoctor] = useMutation<AddDoctor, AddDoctorVariables>(ADD_DOCTOR);\n  const [currentPageIndex, setCurrentPageIndex] = useState(0);\n  const [isAddDoctorDialogOpen, setIsAddDoctorDialogOpen] = useState(false);\n  const closeDialog = () => {\n    setIsAddDoctorDialogOpen(false);\n  };\n  const openDialog = () => {\n    setIsAddDoctorDialogOpen(true);\n  };\n  const handlePaginationChange = (\n    _event: React.ChangeEvent<unknown>,\n    pageIndex: number\n  ) => {\n    setCurrentPageIndex(pageIndex - 1);\n    refetch({ limit: DEFAULT_LIMIT, currentPageIndex: pageIndex - 1 });\n  };\n  const refetchListData = () => {\n    refetch({ limit: DEFAULT_LIMIT, currentPageIndex });\n  };\n  if (loading || !data) {\n    return <LoadingIndicator />;\n  }\n  return (\n    <>\n      <Header text={\"医生账号信息\"} />\n      <div className={classes.actionContainer}>\n        <Button variant=\"contained\" color=\"primary\" onClick={openDialog}>\n          添加医生\n        </Button>\n        <div className={classes.paginationContainer}>\n          <span className={classes.totalNumberText}>\n            共计{data.doctorList.total}个账号\n          </span>\n          <Pagination\n            count={Math.ceil(data.doctorList.total / DEFAULT_LIMIT)}\n            variant=\"outlined\"\n            color=\"primary\"\n            page={currentPageIndex + 1}\n            onChange={handlePaginationChange}\n          />\n        </div>\n      </div>\n      <List component={Paper} className={classes.list}>\n        {data.doctorList.admins.map((admin, index) => (\n          <React.Fragment key={admin.userName}>\n            <ListItem alignItems=\"flex-start\" key={admin.userName}>\n              <ListItemAvatar>\n                <Avatar className={classes.avatar}>\n                  <PersonIcon />\n                </Avatar>\n              </ListItemAvatar>\n              <ListItemText\n                primary={`账号名：${admin.userName}`}\n                secondary={`姓名：${admin.name}`}\n              />\n            </ListItem>\n            {index !== data.doctorList.admins.length - 1 && <Divider />}\n          </React.Fragment>\n        ))}\n      </List>\n      <AddDoctorDialog\n        isOpen={isAddDoctorDialogOpen}\n        closeDialog={closeDialog}\n        checkDoctorUserName={checkDoctorName}\n        checkResult={checkNameData}\n        addDoctor={addDoctor}\n        refetchListData={refetchListData}\n      />\n    </>\n  );\n};\n","import \"@fontsource/noto-sans-sc/400.css\";\nimport {\n  ApolloClient,\n  ApolloProvider,\n  InMemoryCache,\n  useMutation,\n} from \"@apollo/client\";\nimport React, { useEffect, useRef, useState } from \"react\";\nimport ReactDOM from \"react-dom\";\nimport \"./index.css\";\nimport { DOCTOR_LOG_IN } from \"./lib/graphql/mutations\";\nimport { Doctor, Patient, Viewer } from \"./lib/type\";\nimport reportWebVitals from \"./reportWebVitals\";\nimport {\n  BrowserRouter as Router,\n  Redirect,\n  Route,\n  Switch,\n} from \"react-router-dom\";\nimport {\n  AppHeader,\n  Sider,\n  Home,\n  Login,\n  Form,\n  Report,\n  PatientInformation,\n  Welcome,\n  PromptMessage,\n  PatientLogin,\n  CreateDoctor,\n} from \"./sections\";\nimport {\n  createMuiTheme,\n  createStyles,\n  makeStyles,\n  Theme,\n  ThemeProvider,\n  Toolbar,\n} from \"@material-ui/core\";\nimport { PrivateRoute } from \"./lib/components/PrivateRoute\";\nimport { LoadingIndicator } from \"./lib/components\";\nimport { zhCN } from \"@material-ui/core/locale\";\nimport {\n  DoctorLogIn,\n  DoctorLogInVariables,\n} from \"./lib/graphql/mutations/DoctorLogIn/__generated__/DoctorLogIn\";\nimport {\n  PatientLogIn,\n  PatientLogInVariables,\n} from \"./lib/graphql/mutations/PatientLogIn/__generated__/PatientLogIn\";\nimport { PATIENT_LOG_IN } from \"./lib/graphql/mutations/PatientLogIn\";\nimport \"fontsource-roboto\";\n\nconst client = new ApolloClient({\n  uri: \"/api\",\n  cache: new InMemoryCache(),\n  headers: { \"X-CSRF_TOKEN\": sessionStorage.getItem(\"token\") || \"\" },\n});\n\nconst initialViewer: Viewer = {\n  userName: null,\n  token: null,\n  didRequest: false,\n  catelogy: null,\n};\n\nconst initialDoctor: Doctor = {\n  name: null,\n  userName: null,\n  didRequest: false,\n};\n\nconst useStyles = makeStyles((theme: Theme) =>\n  createStyles({\n    root: {\n      display: \"flex\",\n      height: \"100%\",\n    },\n    contentContainer: {\n      flexGrow: 1,\n      height: \"100%\",\n    },\n  })\n);\n\nexport const PRIMARY_COLOR = \"#1a73e8\";\nconst App = () => {\n  const classes = useStyles();\n\n  // const [viewer, setViewer] = useState<Viewer>(initialViewer);\n  const [doctor, setDoctor] = useState<Doctor>(initialDoctor);\n  const [patient, setPatient] = useState<Patient>(initialViewer);\n  // const [logIn] = useMutation<LogInData, LogInVariables>(LOG_IN, {\n  //   onCompleted: (data) => {\n  //     if (data && data.logIn) {\n  //       setViewer(data.logIn);\n  //       if (data.logIn.token) {\n  //         sessionStorage.setItem(\"token\", data.logIn.token);\n  //       } else {\n  //         sessionStorage.removeItem(\"token\");\n  //       }\n  //     }\n  //   },\n  // });\n\n  // const logInRef = useRef(logIn);\n  const [doctorLogIn, { loading: doctorLogInLoading }] = useMutation<\n    DoctorLogIn,\n    DoctorLogInVariables\n  >(DOCTOR_LOG_IN, {\n    onCompleted: (data) => {\n      if (data && data.doctorLogIn) {\n        const { name, userName, didRequest } = data.doctorLogIn;\n        setDoctor({\n          name,\n          userName,\n          didRequest,\n        });\n      }\n    },\n  });\n  const doctorLogInRef = useRef(doctorLogIn);\n\n  const [patientLogIn, { loading: patientLogInLoading }] = useMutation<\n    PatientLogIn,\n    PatientLogInVariables\n  >(PATIENT_LOG_IN, {\n    onCompleted: (data) => {\n      if (data && data.patientLogIn) {\n        setPatient(data.patientLogIn);\n      }\n    },\n  });\n\n  const patientLogInRef = useRef(patientLogIn);\n  useEffect(() => {\n    doctorLogInRef.current();\n    // logInRef.current();\n    patientLogInRef.current();\n  }, []);\n  if (\n    doctorLogInLoading ||\n    !doctor.didRequest ||\n    patientLogInLoading ||\n    !patient.didRequest\n  ) {\n    return <LoadingIndicator />;\n  }\n  const isAuthorized = !!doctor.userName;\n  return (\n    <Router>\n      {/** App Header */}\n      <Switch>\n        <Route exact path=\"/\" />\n        <Route exact path=\"/user/prompt\" />\n        <Route exact path=\"/user/login\" />\n        <Route path=\"/user/home\" />\n        <Route path=\"/doctor\">\n          <AppHeader viewer={doctor} setViewer={setDoctor} type=\"doctor\" />\n          <Switch>\n            <Route exact path=\"/\" />\n          </Switch>\n        </Route>\n      </Switch>\n\n      <Switch>\n        <Route exact path=\"/login\">\n          <Login\n            isAuthorized={isAuthorized}\n            setViewer={setDoctor}\n            setDoctor={setDoctor}\n            doctor={doctor}\n          />\n        </Route>\n        <Route\n          exact\n          path=\"/doctor\"\n          render={({ location }) => (\n            <Redirect to={{ pathname: \"/login\", state: { from: location } }} />\n          )}\n        />\n\n        <PrivateRoute isAuthorized={isAuthorized} path=\"/user\" exact>\n          <Welcome\n            setDoctor={setDoctor}\n            doctor={doctor}\n            logIn={doctorLogInRef.current}\n          />\n        </PrivateRoute>\n        <PrivateRoute isAuthorized={isAuthorized} path=\"/user/prompt\" exact>\n          <PromptMessage />\n        </PrivateRoute>\n        <PrivateRoute isAuthorized={isAuthorized} path=\"/user/login\" exact>\n          <PatientLogin setPatient={setPatient} patient={patient} />\n        </PrivateRoute>\n        {doctor.userName && (\n          <PrivateRoute\n            isAuthorized={isAuthorized}\n            path={`/doctor/${doctor.userName}`}\n          >\n            <div className={classes.root}>\n              <Sider viewer={doctor} type=\"doctor\" />\n              <div className={classes.contentContainer}>\n                <Toolbar />\n                <Switch>\n                  <Route\n                    exact\n                    path={`/doctor/${doctor.userName}`}\n                    component={PatientInformation}\n                  />\n                  <Route\n                    exact\n                    path={`/doctor/${doctor.userName}/manage`}\n                    component={CreateDoctor}\n                  />\n                </Switch>\n              </div>\n            </div>\n          </PrivateRoute>\n        )}\n        {patient.userName && (\n          <PrivateRoute isAuthorized={isAuthorized} path=\"/user\">\n            <AppHeader viewer={patient} setViewer={setPatient} type=\"user\" />\n            <Switch>\n              <PrivateRoute isAuthorized={isAuthorized} path=\"/user/form\" exact>\n                <Form />\n              </PrivateRoute>\n\n              <PrivateRoute isAuthorized={isAuthorized} path=\"/user\">\n                <div className={classes.root}>\n                  <Sider viewer={patient} type=\"user\" />\n                  <div className={classes.contentContainer}>\n                    <Toolbar />\n                    <Switch>\n                      <Route exact path=\"/user/home\">\n                        <Home patient={patient} />\n                      </Route>\n                      <Route exact path=\"/user/report\" component={Report} />\n                    </Switch>\n                  </div>\n                </div>\n              </PrivateRoute>\n            </Switch>\n          </PrivateRoute>\n        )}\n        <PrivateRoute isAuthorized={isAuthorized} path=\"/user\">\n          <></>\n        </PrivateRoute>\n        <PrivateRoute isAuthorized={isAuthorized} path=\"/doctor\">\n          <></>\n        </PrivateRoute>\n        <Route exact path=\"/\">\n          <Redirect to=\"/user\" />\n        </Route>\n      </Switch>\n    </Router>\n  );\n};\n\nconst theme = createMuiTheme(\n  {\n    palette: {\n      primary: {\n        light: \"#6a9dff\",\n        main: PRIMARY_COLOR,\n        dark: \"#0045b5\",\n        contrastText: \"#fff\",\n      },\n    },\n  },\n  zhCN\n);\nReactDOM.render(\n  <ApolloProvider client={client}>\n    <ThemeProvider theme={theme}>\n      <App />\n    </ThemeProvider>\n  </ApolloProvider>,\n  document.getElementById(\"root\")\n);\n\n// If you want to start measuring performance in your app, pass a function\n// to log results (for example: reportWebVitals(console.log))\n// or send to an analytics endpoint. Learn more: https://bit.ly/CRA-vitals\nreportWebVitals();\n"],"sourceRoot":""}