(this.webpackJsonpclient=this.webpackJsonpclient||[]).push([[0],{296:function(e,t,n){},325:function(e,t){},326:function(e,t){},327:function(e,t){},328:function(e,t){},329:function(e,t){},361:function(e,t,n){"use strict";n.r(t),n.d(t,"PRIMARY_COLOR",(function(){return Yr}));var a=n(7),r=n(52),i=n(1),c=(n(288),n(10)),s=n(210),o=n(0),l=n.n(o),u=n(30),d=n.n(u),j=(n(296),n(18));function b(){var e=Object(j.a)(["\n  mutation LogIn($input: LogInInput) {\n    logIn(input: $input) {\n      ... on UserViewer {\n        token\n        name\n        userName\n        gender\n        education\n        jobStatus\n        age\n        marriageStatus\n        didRequest\n        catelogy\n      }\n      ... on AdminViewer {\n        name\n        userName\n        didRequest\n        token\n        catelogy\n      }\n    }\n  }\n"]);return b=function(){return e},e}Object(c.gql)(b());function O(){var e=Object(j.a)(["\n  mutation Logout {\n    logOut {\n      ... on UserViewer {\n        id\n        token\n        didRequest\n        catelogy\n      }\n      ... on AdminViewer {\n        id\n        token\n        didRequest\n        catelogy\n      }\n    }\n  }\n"]);return O=function(){return e},e}Object(c.gql)(O());function h(){var e=Object(j.a)(["\n  mutation CreateAccount($input: CreateAccountInput) {\n    createAccount(input: $input) {\n      token\n      name\n      userName\n      gender\n      education\n      jobStatus\n      marriageStatus\n      didRequest\n      age\n      catelogy\n    }\n  }\n"]);return h=function(){return e},e}Object(c.gql)(h());function f(){var e=Object(j.a)(["\n  mutation SaveUserAnswer($input: UserAnswerInput) {\n    saveUserAnswer(input: $input) {\n      didRequest\n    }\n  }\n"]);return f=function(){return e},e}var m=Object(c.gql)(f());function p(){var e=Object(j.a)(["\n  mutation SavePartialAnswer($input: UserAnswerInput) {\n    savePartialAnswer(input: $input) {\n      didRequest\n    }\n  }\n"]);return p=function(){return e},e}var g=Object(c.gql)(p());function x(){var e=Object(j.a)(["\n  mutation DoctorLogOut {\n    doctorLogOut {\n      didRequest\n    }\n  }\n"]);return x=function(){return e},e}var v=Object(c.gql)(x());function C(){var e=Object(j.a)(["\n  mutation DoctorLogIn($input: DoctorLoginInput) {\n    doctorLogIn(input: $input) {\n      name\n      userName\n      didRequest\n    }\n  }\n"]);return C=function(){return e},e}var y=Object(c.gql)(C());function w(){var e=Object(j.a)(["\n  mutation AddDiagnosis($input: AddDiagnosisInput) {\n    addDiagnosis(input: $input) {\n      result\n    }\n  }\n"]);return w=function(){return e},e}var N=Object(c.gql)(w());function S(){var e=Object(j.a)(["\n  mutation AddDoctor($input: AddDoctorInput) {\n    addDoctor(input: $input) {\n      result\n    }\n  }\n"]);return S=function(){return e},e}var I=Object(c.gql)(S());function k(){var e=Object(j.a)(["\n  mutation AddDoctorConfig($input: DoctorConfigInput) {\n    addDoctorConfig(input: $input) {\n      result\n    }\n  }\n"]);return k=function(){return e},e}var T=Object(c.gql)(k());function L(){var e=Object(j.a)(["\n  mutation SelectConfig($input: SelectConfigInput) {\n    selectConfig(input: $input) {\n      result\n    }\n  }\n"]);return L=function(){return e},e}var A=Object(c.gql)(L()),q=function(e){e&&e instanceof Function&&n.e(3).then(n.bind(null,460)).then((function(t){var n=t.getCLS,a=t.getFID,r=t.getFCP,i=t.getLCP,c=t.getTTFB;n(e),a(e),r(e),i(e),c(e)}))},R=n(36),D=n(43),z=n(15),F=n(398),P=n(451),E=n(407),W=n(408),M=n(452),B=n(403),U=n(265),$=function(e){var t=e.isAuthorized,n=e.children,a=Object(U.a)(e,["isAuthorized","children"]);return Object(i.jsx)(D.b,Object(z.a)(Object(z.a)({},a),{},{render:function(e){var a=e.location;return t?n:Object(i.jsx)(D.a,{to:{pathname:"/login",state:{from:a}}})}}))},H=n(401),J=Object(F.a)((function(e){return{root:{display:"flex",width:"100%",height:"100%",justifyContent:"center",alignItems:"center"}}})),Q=function(){var e=J();return Object(i.jsx)("div",{className:e.root,children:Object(i.jsx)(H.a,{})})},V=n(450),_=n(446),K=function(e){var t=e.showError,n=e.setShowError,a=e.errorMessage;return Object(i.jsx)(V.a,{open:t,onClose:function(){return n(!1)},children:Object(i.jsx)(_.a,{elevation:6,variant:"filled",severity:"error",onClose:function(){return n(!1)},children:a})})},G=n(107),Y=n(365),Z=n(402),X=n(141),ee=n(218),te=n.n(ee),ne=n(220),ae=n.n(ne),re=n(217),ie=n.n(re),ce=n(219),se=n.n(ce);G.c.GlobalWorkerOptions.workerSrc="/pdf.worker.js";var oe=Object(F.a)((function(e){return Object(P.a)({root:{display:"flex",justifyContent:"center",marginTop:10},paper:{marginBottom:10},pdfViewer:{},topbar:{height:48,display:"flex",justifyContent:"space-between"},returnButton:{marginLeft:5},downloadButton:{marginRight:5},printIcon:{},page:{padding:3}})})),le=function(e){var t=e.pdfData,n=e.closeReport,r=e.patientName,c=oe(),s=l.a.useState(window.innerWidth),u=Object(a.a)(s,2),d=u[0],j=u[1],b=function(){window.innerWidth!==d&&j(window.innerWidth)};l.a.useEffect((function(){return window.addEventListener("resize",b),function(){return window.removeEventListener("resize",b)}}));var O=Object(o.useState)(0),h=Object(a.a)(O,2),f=h[0],m=h[1];return Object(i.jsxs)(i.Fragment,{children:[Object(i.jsxs)("div",{children:[Object(i.jsxs)("div",{className:c.topbar,children:[Object(i.jsx)(Y.a,{onClick:n,className:c.returnButton,children:Object(i.jsx)(te.a,{})}),Object(i.jsxs)("div",{children:[Object(i.jsx)(Y.a,{className:c.printIcon,onClick:function(){ie()({printable:"".concat(t),type:"pdf",base64:!0})},children:Object(i.jsx)(se.a,{})}),Object(i.jsx)(Y.a,{className:c.downloadButton,onClick:function(){var e=function(e){for(var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"",n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:512,a=atob(e),r=[],i=0;i<a.length;i+=n){for(var c=a.slice(i,i+n),s=new Array(c.length),o=0;o<c.length;o++)s[o]=c.charCodeAt(o);var l=new Uint8Array(s);r.push(l)}var u=new Blob(r,{type:t});return u}(t,"application/pdf"),n=document.createElement("a"),a=window.URL.createObjectURL(e);n.href=a,n.download=r?"".concat(r,"-\u5fc3\u7406\u8bc4\u4f30\u62a5\u544a\u5355.pdf"):"\u5fc3\u7406\u8bc4\u4f30\u62a5\u544a\u5355.pdf",document.body.appendChild(n),n.click(),n.remove()},children:Object(i.jsx)(ae.a,{})})]})]}),Object(i.jsx)(Z.a,{})]}),Object(i.jsx)("div",{className:c.root,children:Object(i.jsx)(G.a,{file:"data:application/pdf;base64,".concat(t),loading:Object(i.jsx)("div",{}),className:c.pdfViewer,onLoadSuccess:function(e){var t=e.numPages;m(t)},children:Array.from(new Array(f),(function(e,t){return Object(i.jsx)(X.a,{elevation:3,className:c.paper,children:Object(i.jsx)(G.b,{pageNumber:t+1,loading:Object(i.jsx)(i.Fragment,{}),renderMode:"svg",width:document.getElementById("root")?.8*(document.getElementById("root").offsetWidth>750?document.getElementById("root").offsetWidth-240:document.getElementById("root").offsetWidth):1e3})},t)}))})})]})},ue=n(221),de=n.n(ue),je=Object(F.a)((function(e){return Object(P.a)({header:{overflow:"hidden"},actionContainer:{float:"right",paddingRight:10,paddingTop:10,fontSize:"0.875rem",display:"flex",alignItems:"center"}})})),be=function(){var e=je();return Object(i.jsx)("div",{className:e.header,children:Object(i.jsx)("span",{className:e.actionContainer,children:Object(i.jsx)(R.b,{to:"/",children:Object(i.jsx)(B.a,{color:"secondary",startIcon:Object(i.jsx)(de.a,{}),children:"\u8fd4\u56de\u4e3b\u9875"})})})})},Oe=n(160),he=n.n(Oe),fe=(n(332),Object(F.a)((function(e){return Object(P.a)({canvasContainer:{width:550,height:400}})}))),me=function(e){var t=e.labelList,n=e.dataList,a=e.multipleDataList,r=e.showLabel,c=fe(),s=Object(o.useRef)(null),l=Object(o.useRef)((function(){if(s.current){var e=s.current.getContext("2d");e&&new he.a(e,{type:"line",data:{labels:t,datasets:a||[{label:"\u5f97\u5206",data:n,borderColor:"#0d47a1",backgroundColor:"#bbdefb",fill:!1,lineTension:0}]},options:{tooltips:{mode:"index",intersect:!1},hover:{mode:"nearest",intersect:!0},maintainAspectRatio:!1,responsive:!0,scales:{yAxes:[{ticks:{beginAtZero:!0}}]},plugins:{datalabels:{anchor:"start",align:"top",formatter:Math.round,display:!!r}}}})}}));return Object(o.useEffect)((function(){l.current()}),[]),Object(i.jsx)("div",{className:c.canvasContainer,children:Object(i.jsx)("canvas",{id:"line-chart",ref:s})})},pe=n(404),ge=n(405),xe=n(406),ve=n(122),Ce=n.n(ve),ye="\u827e\u68ee\u514b\u4e2a\u6027\u6d4b\u8bd5\uff08EPQ\uff09",we="\u827e\u68ee\u514b\u4e2a\u6027\u6d4b\u8bd5\u513f\u7ae5\u7248\uff08EPQ\uff09",Ne="yale-brown",Se="psss",Ie="psqi",ke="phcss",Te="embu",Le=[ye,we],Ae=[Te],qe=function(e){var t=e.formResultList,n=e.formName,r=e.formKey,c=Object(o.useMemo)((function(){return t.map((function(e){return e.fillInDate}))}),[t]),s=Object(o.useMemo)((function(){return"90\u9879\u75c7\u72b6\u6e05\u5355\uff08SCL-90\uff09"===n?t.map((function(e){return Number(JSON.parse(e.result).total)})):t.map((function(e){return Number(e.result)}))}),[t,n]),l=Object(o.useMemo)((function(){if(n===ye||n===we)return[{label:"E\u91cf\u8868\u5f97\u5206",data:t.map((function(e){var t=JSON.parse(e.result);return Number(t.eTScore)})),borderColor:"#0d47a1",backgroundColor:"#0d47a1",lineTension:0,fill:!1},{label:"P\u91cf\u8868\u5f97\u5206",data:t.map((function(e){var t=JSON.parse(e.result);return Number(t.pTScore)})),borderColor:"#4caf50",backgroundColor:"#4caf50",fill:!1,lineTension:0},{label:"N\u91cf\u8868\u5f97\u5206",data:t.map((function(e){var t=JSON.parse(e.result);return Number(t.nTScore)})),borderColor:"#ffeb3b",backgroundColor:"#ffeb3b",fill:!1,lineTension:0},{label:"L\u91cf\u8868\u5f97\u5206",data:t.map((function(e){var t=JSON.parse(e.result);return Number(t.lTScore)})),borderColor:"#d32f2f",backgroundColor:"#d32f2f",fill:!1,lineTension:0}];if(r===Ne)return[{label:"\u5f3a\u8feb\u601d\u7ef4\u90e8\u5206\u5206\u6570",data:t.map((function(e){return JSON.parse(e.result).yaleBrownMind})),borderColor:"#0d47a1",backgroundColor:"#0d47a1",lineTension:0,fill:!1},{label:"\u5f3a\u8feb\u884c\u4e3a\u90e8\u5206\u5206\u6570",data:t.map((function(e){return JSON.parse(e.result).yaleBrownBehavior})),borderColor:"#4caf50",backgroundColor:"#4caf50",fill:!1,lineTension:0},{label:"\u4e24\u90e8\u5206\u603b\u5206",data:t.map((function(e){return JSON.parse(e.result).yaleBrownTotal})),borderColor:"#d32f2f",backgroundColor:"#d32f2f",fill:!1,lineTension:0}];if(r===Se)return[{label:"\u5fc3\u7406\uff08P\uff09\u56e0\u5b50\u5206\u6570",data:t.map((function(e){return JSON.parse(e.result).psssP})),borderColor:"#0d47a1",backgroundColor:"#0d47a1",lineTension:0,fill:!1},{label:"\u8eaf\u4f53\uff08S\uff09\u56e0\u5b50\u5206\u6570",data:t.map((function(e){return JSON.parse(e.result).psssS})),borderColor:"#4caf50",backgroundColor:"#4caf50",fill:!1,lineTension:0},{label:"\u603b\u5206",data:t.map((function(e){return JSON.parse(e.result).psssTotal})),borderColor:"#d32f2f",backgroundColor:"#d32f2f",fill:!1,lineTension:0}];if("mdq"===r)return[{label:"\u603b\u5206",data:t.map((function(e){return JSON.parse(e.result).mdqTotal})),borderColor:"#d32f2f",backgroundColor:"#d32f2f",fill:!1,lineTension:0}];if(r===Ie)return[{label:"\u603b\u5206",data:t.map((function(e){return JSON.parse(e.result).psqiTotal})),borderColor:"#d32f2f",backgroundColor:"#d32f2f",fill:!1,lineTension:0}];if(r===ke)return[{label:"\u603b\u5206",data:t.map((function(e){return JSON.parse(e.result).phcssTotal})),borderColor:"#d32f2f",backgroundColor:"#d32f2f",fill:!1,lineTension:0}];if(r===Te){for(var e=[],a=["\u7236\u4eb2 \u56e0\u5b50I","\u7236\u4eb2 \u56e0\u5b50II","\u7236\u4eb2 \u56e0\u5b50III","\u7236\u4eb2 \u56e0\u5b50IV","\u7236\u4eb2 \u56e0\u5b50V","\u7236\u4eb2 \u56e0\u5b50VI"],i=["#B71C1C","#880E4F","#4A148C","#757575","#FF8F00","#0D47A1"],c=t.map((function(e){var t=JSON.parse(e.result);return t.embuIsFatherAnswerCompleted?t.embuFatherComponents:[]})),s=function(t){e.push({label:a[t],data:c.map((function(e){return e[t]})),backgroundColor:i[t],borderColor:i[t],fill:!1,lineTension:0})},o=0;o<a.length;o++)s(o);for(var l=["\u6bcd\u4eb2 \u56e0\u5b50I","\u6bcd\u4eb2 \u56e0\u5b50II","\u6bcd\u4eb2 \u56e0\u5b50III","\u6bcd\u4eb2 \u56e0\u5b50IV","\u6bcd\u4eb2 \u56e0\u5b50V"],u=["#B3E5FC","#B2EBF2","#B2DFDB","#C8E6C9","#FFCC80"],d=t.map((function(e){var t=JSON.parse(e.result);return t.embuIsMotherAnswerCompleted?t.embuMotherComponents:[]})),j=function(t){e.push({label:l[t],data:d.map((function(e){return e[t]})),backgroundColor:u[t],borderColor:u[t],fill:!1,lineTension:0})},b=0;b<l.length;b++)j(b);return e}}),[r,n,t]),u=!0;(Le.includes(n)||Ae.includes(r))&&(u=!1);var d=Object(o.useState)(!1),j=Object(a.a)(d,2),b=j[0],O=j[1];return Object(i.jsxs)("div",{children:[Object(i.jsx)("div",{children:Object(i.jsx)(B.a,{startIcon:Object(i.jsx)(Ce.a,{}),size:"small",color:"primary",disabled:t.length<=1,onClick:function(){O(!0)},children:"\u8d8b\u52bf"})}),Object(i.jsxs)(pe.a,{onClose:function(){O(!1)},open:b,children:[Object(i.jsxs)(ge.a,{children:[n,"\u5206\u6570\u8d8b\u52bf"]}),Object(i.jsx)(xe.a,{children:Object(i.jsx)(me,{labelList:c,dataList:s,multipleDataList:l,showLabel:u})})]})]})},Re=n.p+"static/media/logo.bcf589ff.png",De=Object(F.a)((function(e){return Object(P.a)({logInCard:{borderRadius:8,width:"min(450px, 90%)",margin:"0 auto 0"},logInText:{fontSize:"1.5rem",textAlign:"center",marginBottom:20,marginTop:25},promptText:{marginBottom:24,fontSize:"1rem",textAlign:"center"},input:{width:"100%"},inputContainer:{margin:"0 40px"},userNameInput:{marginBottom:15},passwordInput:{marginBottom:30},buttonContainer:{display:"flex",justifyContent:"center"},logo:{height:92},logoContainer:{display:"flex",justifyContent:"center"},pageContainer:{backgroundColor:"#f5f5f5",width:"100%",height:"100%"},topPadding:{height:"min(100px, 30%)"}})})),ze={userName:"",password:""},Fe=function(e){var t=e.isAuthorized,n=(e.setViewer,e.setDoctor),r=e.doctor,s=De(),l=Object(c.useMutation)(y,{onCompleted:function(e){if(e&&e.doctorLogIn){var t=e.doctorLogIn,a=t.name,r=t.userName,i=t.didRequest;n({name:a,userName:r,didRequest:i}),T(!1)}},onError:function(e){w(!0)}}),u=Object(a.a)(l,1)[0],d=Object(o.useRef)(u),j=Object(o.useState)(ze),b=Object(a.a)(j,2),O=b[0],h=b[1],f=Object(o.useState)(!1),m=Object(a.a)(f,2),p=m[0],g=m[1],x=Object(o.useState)(!1),v=Object(a.a)(x,2),C=v[0],w=v[1],N=function(e){"Enter"===e.key&&A()};Object(o.useEffect)((function(){return window.addEventListener("keydown",N),function(){window.removeEventListener("keydown",N)}}));var S=Object(o.useState)(!0),I=Object(a.a)(S,2),k=I[0],T=I[1],L=Object(o.useRef)((function(){q.location.state&&"/doctor"===q.location.state.from.pathname?T(!0):T(!1)}));Object(o.useEffect)((function(){L.current()}),[]);var A=function(){g(!0),O.userName&&O.password&&d.current({variables:{input:{userName:O.userName,password:O.password}}})},q=Object(D.g)(),R=!(!q.location.state||!q.location.state.from.pathname.includes("doctor"));return t&&!k?R?r.userName?Object(i.jsx)(D.a,{to:"/doctor/".concat(r.userName)}):Object(i.jsx)(Q,{}):Object(i.jsx)(D.a,{to:"/user"}):(console.log("aa\n\n\n\n\n\nbbb"),Object(i.jsxs)("div",{className:s.pageContainer,children:[Object(i.jsx)("div",{className:s.topPadding}),Object(i.jsx)(E.a,{className:s.logInCard,children:Object(i.jsxs)(W.a,{children:[Object(i.jsx)("div",{className:s.logoContainer,children:Object(i.jsx)("img",{src:Re,className:s.logo,alt:"\u533b\u9662\u6807\u5fd7"})}),Object(i.jsx)("div",{className:s.logInText,children:R?"\u533b\u751f\u7aef":"\u7528\u6237\u7aef"}),Object(i.jsx)("div",{className:s.promptText,children:"\u8bf7\u8f93\u5165\u533b\u751f\u7684\u7528\u6237\u540d\u548c\u5bc6\u7801"}),Object(i.jsxs)("form",{children:[Object(i.jsxs)("div",{className:s.inputContainer,children:[Object(i.jsx)(M.a,{autoFocus:!0,className:s.input+" "+s.userNameInput,color:"primary",value:O.userName,label:"\u7528\u6237\u540d",onChange:function(e){h(Object(z.a)(Object(z.a)({},O),{},{userName:e.target.value}))},helperText:p&&!O.userName?"\u8bf7\u8f93\u5165\u60a8\u7684\u7528\u6237\u540d":void 0,error:!(!p||O.userName)||void 0,inputProps:{"aira-label":"\u7528\u6237\u540d"}}),Object(i.jsx)(M.a,{className:s.input+" "+s.passwordInput,color:"primary",value:O.password,label:"\u5bc6\u7801",helperText:p&&!O.password?"\u8bf7\u8f93\u5165\u60a8\u7684\u5bc6\u7801":void 0,error:!(!p||O.password)||void 0,onChange:function(e){h(Object(z.a)(Object(z.a)({},O),{},{password:e.target.value}))},type:"password",inputProps:{"aira-label":"\u5bc6\u7801"}})]}),Object(i.jsx)("div",{className:s.buttonContainer,children:Object(i.jsx)(B.a,{variant:"contained",color:"primary",onClick:A,children:"\u767b\u5f55"})})]})]})}),Object(i.jsx)(K,{showError:C,setShowError:w,errorMessage:"\u7528\u6237\u540d\u6216\u5bc6\u7801\u4e0d\u6b63\u786e\uff01"})]}))},Pe=n(23),Ee=n.n(Pe),We=n(40),Me=n(417),Be=n(414),Ue=n(418),$e=n(368),He=n(419),Je=n(420),Qe=n(421),Ve=n(422),_e=n(222),Ke=n.n(_e),Ge=n.p+"static/media/cardIcon.2b436e10.png";function Ye(){var e=Object(j.a)(["\n  query QuestionnaireList($isReport: Boolean!, $showAll: Boolean) {\n    questionnaireList(isReport: $isReport, showAll: $showAll) {\n      name\n      description\n      id\n      done\n      displayedFillInDate\n      userAnswerId\n      result\n      key\n    }\n  }\n"]);return Ye=function(){return e},e}var Ze=Object(c.gql)(Ye());function Xe(){var e=Object(j.a)(["\n  query QuestionnaireContent($id: String!) {\n    questionnaire(id: $id) {\n      instruction\n      name\n      questions {\n        choices\n        content\n        parent\n      }\n      key\n    }\n    partialAnswer(questionnaireId: $id) {\n      answers\n      date\n    }\n  }\n"]);return Xe=function(){return e},e}var et=Object(c.gql)(Xe());function tt(){var e=Object(j.a)(["\n  query Report($userAnswerIds: [String!]!, $pageSize: String) {\n    report(userAnswerIds: $userAnswerIds, pageSize: $pageSize) {\n      pdf\n    }\n  }\n"]);return tt=function(){return e},e}var nt=Object(c.gql)(tt());function at(){var e=Object(j.a)(["\n  query ReportForAdmin($userId: String, $userAnswerIds: [String!]!, $pageSize: String) {\n    reportForAdmin(userId: $userId, userAnswerIds: $userAnswerIds, pageSize: $pageSize) {\n      pdf\n    }\n  }\n"]);return at=function(){return e},e}var rt=Object(c.gql)(at());function it(){var e=Object(j.a)(["\n  query DoctorList($limit: Int!, $currentPageIndex: Int!) {\n    doctorList(limit: $limit, currentPageIndex: $currentPageIndex) {\n      total\n      admins {\n        name\n        userName\n      }\n    }\n  }\n"]);return it=function(){return e},e}var ct=Object(c.gql)(it());function st(){var e=Object(j.a)(["\n  query CheckIfDoctorConfigNameUnique($doctorConfigName: String!) {\n    checkIfDoctorConfigNameUnique(doctorConfigName: $doctorConfigName) {\n      result\n    }\n  }\n"]);return st=function(){return e},e}var ot=Object(c.gql)(st());function lt(){var e=Object(j.a)(["\n  query CheckIfDoctorNameUnique($userName: String!) {\n    checkIfDoctorUserNameUnique(userName: $userName) {\n      result\n    }\n  }\n"]);return lt=function(){return e},e}var ut=Object(c.gql)(lt());function dt(){var e=Object(j.a)(["\n  query UserAnsewr($questionnaireId: String!) {\n    userAnswer(questionnaireId: $questionnaireId) {\n      answers\n    }\n  }\n"]);return dt=function(){return e},e}Object(c.gql)(dt());function jt(){var e=Object(j.a)(["\n  query QueryUser(\n    $userName: String\n    $name: String\n    $gender: String\n    $ageRange: AgeRange\n    $minSignUpDate: SignUpDate\n    $maxSignUpDate: SignUpDate\n    $limit: Int!\n    $currentPageIndex: Int!\n    $filter: UsersFilter\n    $onlyMyPatient: Boolean\n    $additionalFields: [String!]\n  ) {\n    queryUser(\n      userName: $userName\n      name: $name\n      gender: $gender\n      ageRange: $ageRange\n      minSignUpDate: $minSignUpDate\n      maxSignUpDate: $maxSignUpDate\n      limit: $limit\n      currentPageIndex: $currentPageIndex\n      filter: $filter\n      onlyMyPatient: $onlyMyPatient\n      additionalFields: $additionalFields\n    ) {\n      total\n      users {\n        id\n        name\n        userName\n        gender\n        education\n        jobStatus\n        age\n        marriageStatus\n        signUpDate\n        doctorName\n        doctorUserName\n        doctorId\n        finishedForms {\n          name\n          id\n          displayedFillInDate\n          userAnswerId\n          result\n          doctorUserName\n          doctorName\n          doctorId\n          key\n        }\n        diagnosis\n      }\n    }\n  }\n"]);return jt=function(){return e},e}var bt=Object(c.gql)(jt());function Ot(){var e=Object(j.a)(["\n  query DoctorConfigList {\n    doctorConfigList {\n      configs {\n        selected\n        formIds\n        configName\n        id\n      }\n    }\n  }\n"]);return Ot=function(){return e},e}var ht=Object(c.gql)(Ot()),ft=n(415),mt=n(416),pt=function(e){var t=e.isOpen,n=e.handleClose,a=e.goToLogInPage,r=e.age,c=e.gender;return Object(i.jsxs)(pe.a,{open:t,onClose:n,children:[Object(i.jsx)(ge.a,{children:!r||r>=16&&!c?"\u8bf7\u60a8\u5b8c\u5584\u4fe1\u606f":r>=7&&r<16?"\u8bf7\u4f7f\u7528\u513f\u7ae5\u7248\u91cf\u8868":"\u5e74\u9f84\u4e0d\u7b26\u5408\u6761\u4ef6"}),Object(i.jsx)(xe.a,{children:Object(i.jsxs)(ft.a,{children:[(!r||!c)&&"\u8bf7\u60a8\u586b\u5199\u6027\u522b\u548c\u5e74\u9f84\u4fe1\u606f\u3002",void 0!==r&&null!==r&&r<16?"\u586b\u5199\u8be5\u91cf\u8868\u6700\u5c0f\u5e74\u9f84\u4e3a16\u5c81\u3002":null]})}),Object(i.jsx)(mt.a,{children:Object(i.jsx)(B.a,{onClick:!r||r>=16?a:n,color:"primary",autoFocus:!0,children:"\u786e\u5b9a"})})]})},gt=function(e){var t=e.isOpen,n=e.handleClose,a=e.goToLogInPage,r=e.age,c=e.gender;return Object(i.jsxs)(pe.a,{open:t,onClose:n,children:[Object(i.jsx)(ge.a,{children:!r||r<16&&r>7&&!c?"\u8bf7\u60a8\u5b8c\u5584\u4fe1\u606f":r>=16?"\u8bf7\u4f7f\u7528\u6210\u4eba\u7248\u91cf\u8868":"\u5e74\u9f84\u4e0d\u7b26\u5408\u6761\u4ef6"}),Object(i.jsx)(xe.a,{children:Object(i.jsxs)(ft.a,{children:[(!r||!c)&&"\u8bf7\u60a8\u586b\u5199\u6027\u522b\u548c\u5e74\u9f84\u4fe1\u606f\u3002",void 0!==r&&null!==r&&(r>=16||r<7)?"\u586b\u5199\u8be5\u91cf\u8868\u5e74\u9f84\u5e94\u57287\u5c81\u523015\u5c81\u4e4b\u95f4\u3002":null]})}),Object(i.jsx)(mt.a,{children:Object(i.jsx)(B.a,{onClick:r&&(r>=16||r<7)?n:a,color:"primary",autoFocus:!0,children:"\u786e\u5b9a"})})]})},xt=function(e){var t=e.isOpen,n=e.handleClose,a=e.goToLogInPage,r=e.age,c=e.gender;return Object(i.jsxs)(pe.a,{open:t,onClose:n,children:[Object(i.jsx)(ge.a,{children:!r||r<17&&r>7&&!c?"\u8bf7\u60a8\u5b8c\u5584\u4fe1\u606f":"\u5e74\u9f84\u4e0d\u7b26\u5408\u6761\u4ef6"}),Object(i.jsx)(xe.a,{children:Object(i.jsxs)(ft.a,{children:[(!r||!c)&&"\u8bf7\u60a8\u586b\u5199\u6027\u522b\u548c\u5e74\u9f84\u4fe1\u606f\u3002",void 0!==r&&null!==r&&(r>=17||r<=7)?"\u586b\u5199\u8be5\u91cf\u8868\u5e74\u9f84\u5e94\u57288\u5c81\u523016\u5c81\u4e4b\u95f4\u3002":null]})}),Object(i.jsx)(mt.a,{children:Object(i.jsx)(B.a,{onClick:r&&(r>=17||r<=7)?n:a,color:"primary",autoFocus:!0,children:"\u786e\u5b9a"})})]})},vt=function(e){var t=e.isOpen,n=e.handleClose,a=e.goToLogInPage;e.gender;return Object(i.jsxs)(pe.a,{open:t,onClose:n,children:[Object(i.jsx)(ge.a,{children:"\u8bf7\u60a8\u5b8c\u5584\u4fe1\u606f"}),Object(i.jsx)(xe.a,{children:Object(i.jsx)(ft.a,{children:"\u8bf7\u60a8\u586b\u5199\u6027\u522b\u4fe1\u606f\u3002"})}),Object(i.jsx)(mt.a,{children:Object(i.jsx)(B.a,{onClick:a,color:"primary",autoFocus:!0,children:"\u786e\u5b9a"})})]})},Ct=n(223),yt=n.n(Ct),wt=function(e){var t=e.showSuccess,n=e.setShowSuccess,a=e.successMessage;return Object(i.jsx)(V.a,{open:t,onClose:function(){return n(!1)},anchorOrigin:{vertical:"bottom",horizontal:"left"},children:Object(i.jsx)(_.a,{elevation:6,variant:"filled",severity:"success",onClose:function(){return n(!1)},children:a})})},Nt=Object(F.a)((function(e){return Object(P.a)({content:{padding:"5px 10px"},listName:{fontSize:"1rem",color:"rgba(0, 0, 0, .654)",marginTop:20,marginBottom:20},root:{display:"grid",gridTemplateColumns:"repeat(auto-fill, ".concat(250,"px)"),rowGap:"20px",columnGap:"8px"},card:{height:212},cardActionArea:{width:250,cursor:"pointer","&:hover":{backgroundColor:Ke.a[50]},height:160,display:"flex",justifyContent:"flex-start",alignItems:"flex-start"},cardIcon:{width:40,height:40},unfinishedText:{fontSize:"0.8125rem",color:"rgba(0, 0, 0, .54)",margin:"5px 0"},finishedText:{fontSize:"0.8125rem",color:"#4caf50",margin:"5px 0"},questionnaireName:{fontSize:"1rem",color:"#111",lineHeight:"1.5rem"},cardActionContainer:{paddingLeft:20,height:50},noOverflow:{overflow:"hidden",textOverflow:"ellipsis",whiteSpace:"nowrap"},pageHeader:{display:"flex",alignItems:"center"},refreshButtonContainer:{marginLeft:15},cardContent:{padding:15}})})),St=function(e){var t=e.patient,n=Object(Me.a)("(max-width:600px)"),r=Nt(),s=Object(c.useQuery)(Ze,{fetchPolicy:"no-cache",variables:{isReport:!1}}),l=s.loading,u=s.data,d=(s.error,s.refetch),j=Object(o.useMemo)((function(){if(!u)return{uniqueFormList:[],resultList:[]};var e=[],t=[],n=new Set;return u.questionnaireList.forEach((function(a){if(n.has(a.id)){if(a.result&&a.displayedFillInDate)for(var r=0;r<=e.length;){if(e[r].id===a.id){t[r].push({result:a.result,fillInDate:a.displayedFillInDate});break}r+=1}}else n.add(a.id),e.push(a),a.result&&a.displayedFillInDate?t.push([{result:a.result,fillInDate:a.displayedFillInDate}]):t.push([])})),{uniqueFormList:e,resultList:t}}),[u]),b=j.uniqueFormList,O=j.resultList,h=Object(o.useState)(!1),f=Object(a.a)(h,2),m=f[0],p=f[1],g=Object(o.useState)(!1),x=Object(a.a)(g,2),v=x[0],C=x[1],y=Object(o.useState)(!1),w=Object(a.a)(y,2),N=w[0],S=w[1],I=Object(o.useState)(!1),k=Object(a.a)(I,2),T=k[0],L=k[1],A=function(){p(!1)},q=function(){C(!1)},R=function(){S(!1)},z=function(){V.push("/user/login?userName=".concat(t.userName))},F=Object(o.useState)(!1),P=Object(a.a)(F,2),M=P[0],B=P[1],U=Object(o.useState)(""),$=Object(a.a)(U,2),H=$[0],J=$[1],V=Object(D.g)(),_=function(){var e=Object(We.a)(Ee.a.mark((function e(){return Ee.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,d();case 2:J("\u6210\u529f\u66f4\u65b0\u5217\u8868"),B(!0);case 4:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}();if(l)return Object(i.jsx)(Q,{});if(u){var K=function(e){var t=Object(i.jsx)("span",{className:r.questionnaireName,children:e.name});if(/^.*\uff08.*\uff09$/.test(e.name)){var n=e.name.match(/^.*\uff08/),a=e.name.match(/\uff08.*\uff09/);if(n&&a){var c=n[0].substring(0,n[0].length-1),s=a[0];return Object(i.jsxs)("span",{className:r.questionnaireName+" "+r.noOverflow,children:[Object(i.jsx)("span",{className:r.noOverflow,children:c}),Object(i.jsx)("br",{}),s.replace("\uff08","(").replace("\uff09",")")]})}return t}return t},G=function(e,n,a){if(n===ye){if(!t.gender||!t.age||t.age<16)return void p(!0)}else if(n===we){if(!t.gender||!t.age||t.age>=16||t.age<=6)return void C(!0)}else if(a===ke){if(!t.gender||!t.age||t.age>=17||t.age<=7)return void S(!0)}else if(a===Se&&!t.gender)return void L(!0);V.push("/user/form?id=".concat(e))},X=function(e){return Object(i.jsx)("span",{className:e.done?r.finishedText:r.unfinishedText,children:e.done?"\u5df2\u5b8c\u6210":"\u672a\u5b8c\u6210"})};return n?Object(i.jsxs)(i.Fragment,{children:[Object(i.jsx)(Be.a,{subheader:Object(i.jsx)(Ue.a,{children:"\u91cf\u8868"}),children:b.map((function(e,t){return Object(i.jsxs)($e.a,{button:!0,onClick:function(){return G(e.id,e.name,e.key)},children:[Object(i.jsx)(He.a,{children:Object(i.jsx)("img",{src:Ge,alt:"\u91cf\u8868\u56fe\u6807",className:r.cardIcon})}),Object(i.jsx)(Je.a,{primary:Object(i.jsx)("div",{className:r.questionnaireName,children:e.name}),secondary:X(e)})]},e.id)}))}),Object(i.jsx)(pt,{isOpen:m,handleClose:A,goToLogInPage:z,age:t.age,gender:t.gender}),Object(i.jsx)(gt,{isOpen:v,handleClose:q,goToLogInPage:z,age:t.age,gender:t.gender}),Object(i.jsx)(xt,{isOpen:N,handleClose:R,goToLogInPage:z,age:t.age,gender:t.gender})]}):Object(i.jsxs)(i.Fragment,{children:[Object(i.jsxs)("div",{className:r.content,children:[Object(i.jsxs)("div",{className:r.pageHeader,children:[Object(i.jsx)("p",{className:r.listName,children:"\u91cf\u8868"}),Object(i.jsx)("span",{className:r.refreshButtonContainer,children:Object(i.jsx)(Y.a,{size:"small",color:"primary",onClick:_,children:Object(i.jsx)(yt.a,{})})})]}),Object(i.jsx)("div",{className:r.root,children:b.map((function(e,t){return Object(i.jsxs)(E.a,{variant:"outlined",className:r.card+" "+r.noOverflow,children:[Object(i.jsx)(Qe.a,{className:r.cardActionArea,onClick:function(){return G(e.id,e.name,e.key)},children:Object(i.jsxs)(W.a,{className:r.noOverflow+" "+r.cardContent,children:[Object(i.jsx)("div",{children:Object(i.jsx)("img",{src:Ge,alt:"\u91cf\u8868\u56fe\u6807",className:r.cardIcon})}),Object(i.jsx)("div",{className:r.noOverflow,children:K(e)}),X(e)]})}),Object(i.jsx)(Z.a,{}),Object(i.jsx)(Ve.a,{className:r.cardActionContainer,children:Object(i.jsx)(qe,{formResultList:O[t],formName:e.name,formKey:e.key})})]},e.id)}))})]}),Object(i.jsx)(pt,{isOpen:m,handleClose:A,goToLogInPage:z,age:t.age,gender:t.gender}),Object(i.jsx)(gt,{isOpen:v,handleClose:q,goToLogInPage:z,age:t.age,gender:t.gender}),Object(i.jsx)(xt,{isOpen:N,handleClose:R,goToLogInPage:z,age:t.age,gender:t.gender}),Object(i.jsx)(vt,{isOpen:T,handleClose:function(){L(!1)},goToLogInPage:z,gender:t.gender}),Object(i.jsx)(wt,{showSuccess:M,setShowSuccess:B,successMessage:H})]})}return null},It=n(423),kt=n(424),Tt=n(124),Lt=n.n(Tt);function At(){var e=Object(j.a)(["\n  mutation PatientLogOut {\n    patientLogOut {\n      didRequest\n    }\n  }\n"]);return At=function(){return e},e}var qt,Rt,Dt=Object(c.gql)(At()),zt=n(224),Ft=n.n(zt),Pt=Object(F.a)((function(e){return Object(P.a)({root:{flexGrow:1},header:{zIndex:e.zIndex.drawer+1},logo:{marginRight:e.spacing(2),maxWidth:30,maxHeight:30},title:{flexGrow:1,fontSize:"1.25rem"},timerHeader:{overflow:"hidden",backgroundColor:"rgb(236, 238, 248)"},actionContainer:{float:"right",paddingRight:20,paddingTop:10,fontSize:"0.875rem",display:"flex",alignItems:"center"}})})),Et=function(e){var t=e.viewer,n=e.setViewer,r=e.type,s=Object(D.g)(),o=l.a.useState(window.innerWidth),u=Object(a.a)(o,2),d=u[0],j=u[1],b=function(){window.innerWidth!==d&&j(window.innerWidth)};l.a.useEffect((function(){return window.addEventListener("resize",b),function(){return window.removeEventListener("resize",b)}}));var O=Object(c.useMutation)(v,{onCompleted:function(e){e&&e.doctorLogOut.didRequest&&(n(e.doctorLogOut),sessionStorage.removeItem("token"),console.log("log out successfully"))},onError:function(e){console.log(e),console.log("log out failed")}}),h=Object(a.a)(O,1)[0],f=Object(c.useMutation)(Dt,{onCompleted:function(e){e&&e.patientLogOut&&(n(e.patientLogOut),console.log("log out successfully"))},onError:function(e){console.log(e),console.log("log out failed")}}),m=Object(a.a)(f,1)[0],p=function(){var e=Object(We.a)(Ee.a.mark((function e(){return Ee.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if("doctor"!==r){e.next=6;break}return e.next=3,h();case 3:s.push("/doctor"),e.next=9;break;case 6:return e.next=8,m();case 8:s.push("/user");case 9:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),g=Pt(),x="doctor"!==r||window.innerWidth>1150;return Object(i.jsxs)(D.d,{children:[Object(i.jsx)(D.b,{path:"/user/form",exact:!0}),Object(i.jsx)(D.b,{path:"/",children:Object(i.jsx)("div",{className:g.root,children:Object(i.jsx)(It.a,{position:"fixed",className:g.header,children:Object(i.jsxs)(kt.a,{children:[!x&&Object(i.jsx)(Y.a,{edge:"start",color:"inherit","aria-label":"menu",onClick:function(){return e.setIsSiderOpen&&e.setIsSiderOpen(!0)},children:Object(i.jsx)(Ft.a,{})}),Object(i.jsx)("img",{src:Re,alt:"\u4e2d\u5927\u533b\u9662",className:g.logo}),Object(i.jsx)("div",{className:g.title,children:window.innerWidth>=650?"\u4e1c\u5357\u5927\u5b66\u9644\u5c5e\u4e2d\u5927\u533b\u9662\u5fc3\u7406\u5065\u5eb7\u8bc4\u4f30\u7cfb\u7edf":window.innerWidth>=500?"\u5fc3\u7406\u5065\u5eb7\u8bc4\u4f30\u7cfb\u7edf":""}),Object(i.jsx)(D.d,{children:Object(i.jsx)(D.b,{path:["/doctor","/user"],children:t&&t.userName&&Object(i.jsx)(B.a,{color:"inherit",startIcon:Object(i.jsx)(Lt.a,{}),onClick:p,children:"doctor"===r?"\u9000\u51fa\u533b\u751f\u767b\u5f55":"\u9000\u51fa\u7cfb\u7edf"})})})]})})})})]})},Wt=n(454),Mt=n(425),Bt=n(455),Ut=n(228),$t=n.n(Ut),Ht=n(95),Jt=n.n(Ht),Qt=Object(F.a)((function(e){return Object(P.a)({propertyName:{color:"#5f6368",fontSize:"0.75rem",margin:"8px 0"},propertyDivider:{marginTop:5,marginBottom:5}})})),Vt=["name","gender","age","education","jobStatus","marriageStatus"],_t=["\u59d3\u540d","\u6027\u522b","\u5e74\u9f84","\u6559\u80b2","\u5de5\u4f5c","\u5a5a\u59fb"],Kt=function(e){for(var t,n=Qt(),a=e.viewer,r=[],c=0;c<Vt.length;c++)void 0!==(t=a[Vt[c]])&&null!==t&&""!==t&&r.push(c);return Object(i.jsx)(i.Fragment,{children:r.map((function(e,t){return Object(i.jsxs)("div",{children:[Object(i.jsx)("div",{className:n.propertyName,children:_t[e]}),Object(i.jsx)("div",{children:a[Vt[e]]}),t!==r.length-1?Object(i.jsx)(Z.a,{className:n.propertyDivider}):null]},"property-".concat(t))}))})},Gt=n(225),Yt=n.n(Gt),Zt=n(226),Xt=n.n(Zt),en=n(227),tn=n.n(en),nn=n(125),an=n.n(nn),rn=Object(F.a)((function(e){return Object(P.a)({drawer:{width:240,flexShrink:0},patientDrawer:{"@media (max-width:600px)":{display:"none"}},personalInfoCard:{margin:5,overflow:"auto"},personalInfoCardContent:{"&:last-child":{paddingBottom:16}},personalInfoText:{fontWeight:400,fontSize:"1.25rem",marginBottom:10},drawerPaper:{width:240},idChip:{marginTop:3,marginBottom:3},adminMenu:{padding:0},adminMenuHeader:{height:48,display:"flex",alignItems:"center",fontWeight:500,fontSize:"1.125rem",paddingLeft:10},link:{color:"#111"}})})),cn=function(e){var t=rn(),n=Object(D.h)(),r=e.viewer,c=e.type,s=l.a.useState(window.innerWidth),o=Object(a.a)(s,2),u=o[0],d=o[1],j=function(){window.innerWidth!==u&&d(window.innerWidth)};l.a.useEffect((function(){return window.addEventListener("resize",j),function(){return window.removeEventListener("resize",j)}}));var b="doctor"!==c||window.innerWidth>1150;return Object(i.jsxs)(Wt.a,{className:"".concat(t.drawer," ").concat("doctor"!==c?t.patientDrawer:""),variant:b?"permanent":void 0,open:!!b||e.open,classes:{paper:t.drawerPaper},onClose:e.onClose,children:[b?Object(i.jsx)(kt.a,{}):null,"doctor"===c?Object(i.jsxs)(i.Fragment,{children:[Object(i.jsxs)("div",{className:t.adminMenuHeader,children:[r.name,"\u533b\u751f\u5df2\u767b\u5165"]}),Object(i.jsx)(Z.a,{}),Object(i.jsxs)(Be.a,{className:t.adminMenu,children:[Object(i.jsx)(R.b,{to:"/doctor/".concat(r.userName),className:t.link,children:Object(i.jsxs)($e.a,{button:!0,onClick:e.onClose,children:[Object(i.jsx)(Mt.a,{children:Object(i.jsx)(Yt.a,{color:n.pathname==="/doctor/".concat(r.userName)?"primary":"inherit"})}),Object(i.jsx)(Je.a,{primary:"\u75c5\u4eba\u4fe1\u606f"})]},"patientInfo")}),Object(i.jsx)(Z.a,{}),Object(i.jsx)(R.b,{to:"/doctor/".concat(r.userName,"/manage"),className:t.link,children:Object(i.jsxs)($e.a,{button:!0,onClick:e.onClose,children:[Object(i.jsx)(Mt.a,{children:Object(i.jsx)(Xt.a,{color:n.pathname==="/doctor/".concat(r.userName,"/manage")?"primary":"inherit"})}),Object(i.jsx)(Je.a,{primary:"\u533b\u751f\u4fe1\u606f"})]},"doctorInfo")}),Object(i.jsx)(Z.a,{}),Object(i.jsx)(R.b,{to:"/doctor/".concat(r.userName,"/config"),className:t.link,children:Object(i.jsxs)($e.a,{button:!0,onClick:e.onClose,children:[Object(i.jsx)(Mt.a,{children:Object(i.jsx)(tn.a,{color:n.pathname==="/doctor/".concat(r.userName,"/config")?"primary":"inherit"})}),Object(i.jsx)(Je.a,{primary:"\u60a3\u8005\u7aef"})]},"doctorInfo")}),Object(i.jsx)(Z.a,{})]})]}):Object(i.jsxs)(i.Fragment,{children:[Object(i.jsx)(E.a,{variant:"outlined",className:t.personalInfoCard,children:Object(i.jsxs)(W.a,{className:t.personalInfoCardContent,children:[Object(i.jsx)("div",{className:t.personalInfoText,children:"\u4e2a\u4eba\u4fe1\u606f"}),Object(i.jsx)("div",{className:t.idChip,children:Object(i.jsx)(Bt.a,{size:"small",icon:Object(i.jsx)(Jt.a,{}),color:"primary",label:"\u95e8\u8bca\u53f7\uff1a".concat(r.userName),variant:"outlined"})}),Object(i.jsx)(Kt,{viewer:r})]})}),Object(i.jsxs)(Be.a,{children:[Object(i.jsx)(R.b,{to:"/user/home",className:t.link,children:Object(i.jsxs)($e.a,{button:!0,children:[Object(i.jsx)(Mt.a,{children:Object(i.jsx)($t.a,{color:"/user/home"===n.pathname?"primary":"inherit"})}),Object(i.jsx)(Je.a,{primary:"\u91cf\u8868"})]},"form")}),Object(i.jsx)(R.b,{to:"/user/report",className:t.link,children:Object(i.jsxs)($e.a,{button:!0,children:[Object(i.jsx)(Mt.a,{children:Object(i.jsx)(an.a,{color:"/user/report"===n.pathname?"primary":"inherit"})}),Object(i.jsx)(Je.a,{primary:"\u62a5\u544a"})]},"report")})]})]})]})},sn=n(427),on=n(456),ln=n(411),un=n(428),dn=n(447),jn=n(367),bn=n(429),On=100,hn=Object(F.a)((function(e){return Object(P.a)({root:{width:On,backgroundColor:"rgba(0, 0, 0, 0.12)",display:"flex",marginRight:10,height:12,borderRadius:6},finished:{width:0,height:12,borderRadius:"6px 0 0 6px",backgroundColor:"#5eb8ff",maxWidth:94},leftCircle:{borderRadius:"6px 0 0 6px"},circle:{height:12,width:12,backgroundColor:"#5eb8ff"},circlewrapper:{overflow:"hidden"},rightCircle:{borderRadius:6,backgroundColor:"#5eb8ff"},rightCircleWrapper:{marginLeft:-6}})})),fn=function(e){var t=e.totalNumber,n=e.currentIndex,a=hn(),r=On*(n+1)/t;return Object(i.jsx)("div",{className:a.root,children:r>12?Object(i.jsxs)(i.Fragment,{children:[Object(i.jsx)("div",{className:a.finished,style:{width:r}}),On-r<=6?Object(i.jsx)("div",{className:a.rightCircleWrapper+" "+a.circlewrapper,style:{width:12-(On-r)},children:Object(i.jsx)("div",{className:a.rightCircle+" "+a.circle})}):null]}):Object(i.jsx)("div",{className:a.circlewrapper,style:{width:r},children:Object(i.jsx)("div",{className:a.leftCircle+" "+a.circle})})})},mn=n(426),pn=Object(F.a)((function(e){return Object(P.a)({root:{display:"flex",alignItems:"center"},timeNumber:{marginLeft:10,userSelect:"none",WebkitUserSelect:"none",WebkitTouchCallout:"none",KhtmlUserSelect:"none",MozUserSelect:"none",msUserSelect:"none"}})})),gn=function(){var e=pn(),t=Object(o.useState)(0),n=Object(a.a)(t,2),r=n[0],c=n[1];Object(o.useEffect)((function(){var e=setTimeout((function(){c(r+1)}),1e3);return function(){clearTimeout(e)}}),[r]);var s=Math.floor(r/3600),l=Math.floor(r/60),u=r%60;return Object(i.jsxs)("div",{className:e.root,children:[Object(i.jsx)(mn.a,{}),Object(i.jsx)("span",{className:e.timeNumber,children:"".concat(s<10?"0"+s:s,":").concat(l<10?"0"+l:l,":").concat(u<10?"0"+u:u)})]})},xn=["\u4e00","\u4e8c","\u4e09","\u56db","\u4e94","\u516d","\u4e03","\u516b","\u4e5d","\u5341"],vn=function(e){var t,n=e.index;return t=e.totalSize<=10?xn[n]+"\u3001":String(n+1)+". ",Object(i.jsx)(i.Fragment,{children:t})},Cn=n(229),yn=n.n(Cn),wn=n(55),Nn=function(e,t,n,a,i){if(0===i){var c=[1,2,3,4];if(0===a[i]){var s,o=Object(r.a)(c);try{for(o.s();!(s=o.n()).done;){a[s.value]=0}}catch(q){o.e(q)}finally{o.f()}if(e(a),n){var l,u=n.map((function(e){return Object(wn.a)(e)})),d=Object(r.a)(c);try{for(d.s();!(l=d.n()).done;)for(var j=l.value,b=0;b<u[j].length;b++)0!==b&&(u[j][b]=!0)}catch(q){d.e(q)}finally{d.f()}t(u)}}else if(e(a),n){var O,h=n.map((function(e){return Object(wn.a)(e)})),f=Object(r.a)(c);try{for(f.s();!(O=f.n()).done;)for(var m=O.value,p=0;p<h[m].length;p++)0!==p&&(h[m][p]=!1)}catch(q){f.e(q)}finally{f.f()}t(h)}}else if(5===i){var g=[6,7,8,9];if(0===a[i]){var x,v=Object(r.a)(g);try{for(v.s();!(x=v.n()).done;){a[x.value]=0}}catch(q){v.e(q)}finally{v.f()}if(e(a),n){var C,y=n.map((function(e){return Object(wn.a)(e)})),w=Object(r.a)(g);try{for(w.s();!(C=w.n()).done;)for(var N=C.value,S=0;S<y[N].length;S++)0!==S&&(y[N][S]=!0)}catch(q){w.e(q)}finally{w.f()}t(y)}}else if(e(a),n){var I,k=n.map((function(e){return Object(wn.a)(e)})),T=Object(r.a)(g);try{for(T.s();!(I=T.n()).done;)for(var L=I.value,A=0;A<k[L].length;A++)0!==A&&(k[L][A]=!1)}catch(q){T.e(q)}finally{T.f()}t(k)}}else e(a)},Sn=function(e,t,n,a){0===e&&0===n?t(5):5===e&&0===n?(t(9),a(!0)):t(e+1)},In=function(e,t,n,a,r,i,c,s,o,l,u,d,j){if(!(a.current||r&&r[n][t])){var b=Object(z.a)({},i);if(j?b[2*n+1]=t:b[2*n]=t,c(b),n!==s.questions.length-1){if(void 0!==b[2*n]&&void 0!==b[2*n+1]){o(!0),a.current=!0;var O=setTimeout((function(){l(n+1),u.current&&clearTimeout(u.current),o(!1),a.current=!1}),190);u.current=O}}else d(!0)}},kn=function(e,t,n,a,r){for(var i=!(arguments.length>5&&void 0!==arguments[5])||arguments[5],c=!0,s=!0,o=!0,l=!0,u=-1,d=0;d<t;d++)void 0===e[2*d]?(c=!1,-1===u&&(u=2*d)):o=!1,void 0===e[2*d+1]?(s=!1,-1===u&&(u=2*d+1)):l=!1;return!0===c&&!0===s||(!(!c||!l)||(!(!s||!o)||(-1===u||(i&&n&&r&&a&&(r(Math.floor(u/2)),a("\u60a8\u672a\u586b\u5199\u7b2c".concat(Math.floor(u/2)+1,u%2===0?"\u9898\u7684\u7236\u4eb2\u90e8\u5206\u3002":"\u9898\u7684\u6bcd\u4eb2\u90e8\u5206\u3002")),n(!0)),!1))))},Tn=function(e,t,n,a){if(void 0===t||null===t||""===t)return n("\u672a\u586b\u5199\u6570\u503c\uff01"),a(),!1;if(0===e){if(t>=25||t<0)return n("\u6570\u503c\u4e0d\u7b26\u5408\u8981\u6c42\uff01"),a(),!1}else if(1===e){if(t>=1440||t<0)return n("\u6570\u503c\u4e0d\u7b26\u5408\u8981\u6c42\uff01"),a(),!1}else if(2===e){if(t>=25||t<0)return n("\u6570\u503c\u4e0d\u7b26\u5408\u8981\u6c42\uff01"),a(),!1}else if(3===e&&(t<0||t>=25))return n("\u6570\u503c\u4e0d\u7b26\u5408\u8981\u6c42\uff01"),a(),!1;return!0},Ln=Object(F.a)((function(e){return Object(P.a)({formContainer:{height:"100%",width:"100%",backgroundColor:"#e8f1fd"},form:{width:768,maxWidth:"90vw",margin:"auto",paddingTop:10},titleCard:{borderRadius:8,paddingBottom:5},titleCardColor:{height:10,borderTopLeftRadius:8,borderTopRightRadius:8,backgroundColor:Yr},titleCardContent:{paddingTop:5,marginLeft:5,marginRight:5},titleCardMainText:{fontSize:"2rem",fontWeight:400,marginTop:10,marginBottom:10},questionCard:{marginTop:10,borderRadius:8,marginBottom:10,paddingLeft:5,paddingRight:5},questionText:{fontSize:"1rem",fontWeight:400,marginBottom:16,marginTop:10,lineHeight:"1.4rem"},questionOptionText:{fontSize:"0.9rem",userSelect:"none",WebkitUserSelect:"none",WebkitTouchCallout:"none",KhtmlUserSelect:"none",MozUserSelect:"none",msUserSelect:"none"},button:{backgroundColor:"#fff",color:Yr,"&:hover":{backgroundColor:"#fff"}},buttonWithRightMargin:{marginRight:10},finishedText:{fontSize:"0.875rem",marginTop:26,marginBottom:26},homeLink:{fontSize:"0.875rem"},exitButton:{position:"static",right:20,bottom:20,backgroundColor:"#fff","&:hover":{backgroundColor:"#fff"}},timerContaner:{position:"static",left:20,bottom:20},footer:{display:"flex",justifyContent:"space-between",alignItems:"center"},progressWrapper:{display:"flex",alignItems:"center",userSelect:"none",WebkitUserSelect:"none",WebkitTouchCallout:"none",KhtmlUserSelect:"none",MozUserSelect:"none",msUserSelect:"none"},progressWrapperForSmallScreen:{marginTop:20},questionParent:{lineHeight:"1.4rem",color:"#757575"},answerInput:{marginRight:10,marginLeft:10},embuRadioContainer:{width:"50%"}})})),An=function(e){var t=e.patient,n=Object(Me.a)("(max-width:780px)"),r=Ln(),s=new URLSearchParams(Object(D.h)().search).get("id"),l=Object(c.useQuery)(et,{variables:{id:s||""},onCompleted:function(e){var n,a,r=e.partialAnswer,i=e.questionnaire.questions.map((function(e){return e.choices.map((function(e){return!1}))}));e.questionnaire.key!==Ne?R(i):function(e,t,n){var a=t.map((function(e){return Object(wn.a)(e)}));if(e.partialAnswer&&e.partialAnswer.answers&&0===e.partialAnswer.answers[0])for(var r=0,i=[1,2,3,4];r<i.length;r++)for(var c=i[r],s=0;s<a[c].length;s++)0!==s&&(a[c][s]=!0);if(e.partialAnswer&&e.partialAnswer.answers&&0===e.partialAnswer.answers[5])for(var o=0,l=[6,7,8,9];o<l.length;o++)for(var u=l[o],d=0;d<a[u].length;d++)0!==d&&(a[u][d]=!0);n(a)}(e,i,R);var c=localStorage.getItem("".concat(t.userName,"@").concat($e.key)),s=[];if(null===r||void 0===r||null===(n=r.answers)||void 0===n?void 0:n.length){if(s=null===r||void 0===r?void 0:r.answers,c){var o=JSON.parse(c);s=new Date(r.date)>new Date(o.time)?null===r||void 0===r?void 0:r.answers:o.answerArray}}else if(c){s=JSON.parse(c).answerArray}if(e.questionnaire.key===Te)!function(e,t,n,a,r){var i;if(null===e||void 0===e||null===(i=e.answers)||void 0===i?void 0:i.length){var c={},s=void 0;e.answers.forEach((function(e,t){-1!==e?c[t]=e:void 0===s&&(s=t)})),(e.answers.length===2*t.questionnaire.questions.length&&void 0===s||kn(c,t.questionnaire.questions.length,void 0,void 0,void 0,!1))&&n(!0),a(c),r(void 0===s?Math.min(e.answers.length,t.questionnaire.questions.length-1):Math.floor(s/2))}}({answers:s},e,X,$,T);else if((null===r||void 0===r||null===(a=r.answers)||void 0===a?void 0:a.length)||localStorage.getItem("".concat(t.userName,"@").concat($e.key))){var l={},u=void 0;s.forEach((function(e,t){-1!==e?l[t]=e:void 0===u&&(u=t)})),s.length===e.questionnaire.questions.length&&void 0===u&&X(!0),$(l),T(void 0===u?Math.min(s.length,e.questionnaire.questions.length-1):u)}},fetchPolicy:"no-cache"}),u=l.loading,d=l.data,j=Object(c.useMutation)(m,{onCompleted:function(e){e.saveUserAnswer.didRequest&&_(!0)}}),b=Object(a.a)(j,2),O=b[0],h=b[1].loading,f=Object(c.useMutation)(g),p=Object(a.a)(f,2),x=p[0],v=p[1].loading,C=Object(o.useRef)(O),y=Object(o.useRef)(x),w=Object(o.useRef)(null),N=Object(o.useRef)(null),S=Object(o.useState)(0),I=Object(a.a)(S,2),k=I[0],T=I[1],L=Object(o.useState)(),A=Object(a.a)(L,2),q=A[0],R=A[1],F=Object(o.useState)({}),P=Object(a.a)(F,2),U=P[0],$=P[1],H=Object(o.useState)(!1),J=Object(a.a)(H,2),V=J[0],_=J[1],G=Object(o.useState)(!1),Y=Object(a.a)(G,2),Z=Y[0],X=Y[1],ee=Object(o.useState)(!1),te=Object(a.a)(ee,2),ne=te[0],ae=te[1],re=Object(o.useState)(!1),ie=Object(a.a)(re,2),ce=ie[0],se=ie[1],oe=Object(D.g)(),le=Object(o.useRef)(!1),ue=Object(o.useState)(!1),de=Object(a.a)(ue,2),je=de[0],be=de[1],Oe=Object(o.useState)(""),he=Object(a.a)(Oe,2),fe=he[0],me=he[1],ve=function(){be(!0)},Ce=Object(o.useState)(!1),ye=Object(a.a)(Ce,2),we=ye[0],Se=ye[1],ke=Object(o.useState)(""),Le=Object(a.a)(ke,2),Ae=Le[0],qe=Le[1],Re=Object(o.useState)(null),De=Object(a.a)(Re,2),ze=De[0],Fe=De[1],Pe=Object(o.useCallback)((function(){var e=null===d||void 0===d?void 0:d.questionnaire;if(!e)return[];var t=[],n=e.questions.length;e.key===Te&&(n*=2);for(var a=0;a<n;a++)void 0!==U[a]?t.push(U[a]):t.push(-1);return t}),[U,null===d||void 0===d?void 0:d.questionnaire]),Be=Object(o.useCallback)((function(){var e=Pe();return s&&0!==e.length?y.current({variables:{input:{questionnaireId:s,answers:e}}}):Promise.resolve()}),[Pe,s]),Ue=Object(o.useCallback)((function(){if(d){var e=Pe();localStorage.setItem("".concat(t.userName,"@").concat(d.questionnaire.key),JSON.stringify({time:new Date,answerArray:e}))}}),[Pe,t.userName,d]);if(Object(o.useEffect)((function(){Ue()}),[Ue]),u)return Object(i.jsx)(Q,{});if(!d)return Object(i.jsx)("div",{children:"Error"});var $e=d.questionnaire,He=function(){se(!0)},Je=function(){var e=Object(We.a)(Ee.a.mark((function e(){var t,n,a=arguments;return Ee.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t=a.length>0&&void 0!==a[0]&&a[0],$e.key!==Ie){e.next=14;break}if(!0!==t){e.next=11;break}n=0;case 4:if(!(n<$e.questions.length)){e.next=10;break}if(Tn(n,U[n],me,ve)){e.next=7;break}return e.abrupt("return",!1);case 7:n++,e.next=4;break;case 10:return e.abrupt("return",!0);case 11:return e.abrupt("return",Tn(k,U[k],me,ve));case 14:if($e.key!==Te){e.next=17;break}if(!0!==t){e.next=17;break}return e.abrupt("return",kn(U,$e.questions.length,Se,qe,Fe));case 17:return e.abrupt("return",!0);case 18:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),Qe=function(){var e=Object(We.a)(Ee.a.mark((function e(){return Ee.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Je();case 2:if(!1!==e.sent){e.next=5;break}return e.abrupt("return");case 5:T(k+1),w.current&&clearTimeout(w.current);case 7:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),Ve=function(){var e=Object(We.a)(Ee.a.mark((function e(){var n;return Ee.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Je(!0);case 2:if(!1!==e.sent){e.next=5;break}return e.abrupt("return");case 5:if(N.current&&(clearTimeout(N.current),N.current=null),!s){e.next=11;break}return n=Pe(),e.next=10,C.current({variables:{input:{questionnaireId:s,answers:n}}});case 10:localStorage.removeItem("".concat(t.userName,"@").concat($e.key));case 11:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),_e=function(){var e=Object(We.a)(Ee.a.mark((function e(){return Ee.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:T(k-1),w.current&&clearTimeout(w.current);case 2:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),Ke=function(){oe.push("/user/home")},Ge=function(){var e=Object(We.a)(Ee.a.mark((function e(){return Ee.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return N.current&&(clearTimeout(N.current),N.current=null),e.next=3,Be();case 3:Ke();case 4:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),Ye=!(k!==$e.questions.length-1&&void 0!==U[k]&&!ne||void 0!==U[k]&&void 0!==U[k+1]);$e.key===Te&&(Ye=function(e,t,n,a){return!(!(t===n-1||void 0===e[2*t]&&void 0===e[2*t+1]||a)||!(void 0===e[2*t]&&void 0===e[2*t+1]||void 0===e[2*(t+1)]&&void 0===e[2*(t+1)+1]))}(U,k,$e.questions.length,ne));var Ze=$e.questions[k];return Object(i.jsxs)("div",{className:r.formContainer,children:[Object(i.jsxs)("div",{className:r.form,children:[Object(i.jsxs)(E.a,{className:r.titleCard,variant:"outlined",children:[Object(i.jsx)("div",{className:r.titleCardColor}),Object(i.jsxs)(W.a,{className:r.titleCardContent,children:[Object(i.jsx)("div",{className:r.titleCardMainText,children:$e.name}),V&&Object(i.jsxs)(i.Fragment,{children:[Object(i.jsx)("div",{className:r.finishedText,children:"\u60a8\u5df2\u5b8c\u6210\u6b64\u91cf\u8868\u7684\u586b\u5199\u3002"}),Object(i.jsx)(sn.a,{onClick:function(e){e.preventDefault(),Ke()},className:r.homeLink,href:"/",children:"\u56de\u5230\u4e3b\u9875"})]})]})]}),!V&&Object(i.jsxs)(i.Fragment,{children:[Object(i.jsx)(E.a,{className:r.questionCard,variant:"outlined",children:Object(i.jsxs)(W.a,{children:[Ze.parent?Object(i.jsx)("div",{className:r.questionParent,children:Ze.parent}):null,Object(i.jsxs)("div",{className:r.questionText,children:[Object(i.jsx)(vn,{index:k,totalSize:$e.questions.length}),0===Ze.choices.length&&Ze.content&&Ze.content.includes("{input}")?Object(i.jsxs)(i.Fragment,{children:[Ze.content.split("{input}")[0],Object(i.jsx)(M.a,{type:"number",className:r.answerInput,value:null!==U[k]&&void 0!==U[k]?U[k]:"",onChange:function(e){var t=Object(z.a)({},U);void 0!==e.target.value&&null!==e.target.value&&""!==e.target.value?t[k]=Number(e.target.value):delete t[k],$(t)}}),Ze.content.split("{input}")[1]]}):Ze.content]}),$e.key!==Te?Object(i.jsx)(on.a,{value:Ze.choices[U[k]]||"",onChange:function(e){var t=e.target.value,n=Ze.choices.indexOf(t);if(!(le.current||q&&q[k][n])){var a=Object(z.a)({},U);if(a[k]=n,$e.key===Ne?Nn($,R,q,a,k):$(a),k!==$e.questions.length-1){ae(!0),le.current=!0;var r=setTimeout((function(){$e.key===Ne?Sn(k,T,n,X):(T(k+1),w.current&&clearTimeout(w.current)),ae(!1),le.current=!1}),190);w.current=r}else X(!0)}},children:Object(i.jsx)(ln.a,{component:"fieldset",children:Ze.choices.map((function(e,t){return Object(i.jsx)(un.a,{value:e,control:Object(i.jsx)(dn.a,{color:"primary"}),label:Object(i.jsx)("span",{className:r.questionOptionText,children:e}),disabled:!(!q||!q[k][t])||void 0,onClick:U[k]===t?function(e){return function(e,t,n){if(!(le.current||q&&q[k][t])){var a=Object(z.a)({},U);if(a[k]=t,$e.key===Ne?Nn($,R,q,a,k):$(a),k!==$e.questions.length-1){ae(!0),le.current=!0;var r=setTimeout((function(){$e.key===Ne?Sn(k,T,t,X):(T(k+1),w.current&&clearTimeout(w.current)),ae(!1),le.current=!1}),190);w.current=r}else X(!0)}}(0,t)}:void 0},"choice-".concat(t))}))})}):Object(i.jsxs)(i.Fragment,{children:[Object(i.jsxs)(ln.a,{component:"fieldset",className:r.embuRadioContainer,children:[Object(i.jsx)(jn.a,{component:"legend",children:"\u7236\u4eb2"}),Ze.choices.map((function(e,t){return Object(i.jsx)(un.a,{value:e,control:Object(i.jsx)(dn.a,{color:"primary"}),label:Object(i.jsx)("span",{className:r.questionOptionText,children:e}),checked:U[2*k]===t,onClick:function(e){return In(0,t,k,le,q,U,$,$e,ae,T,w,X,!1)}},"choice-".concat(t))}))]}),Object(i.jsxs)(ln.a,{component:"fieldset",children:[Object(i.jsx)(jn.a,{component:"legend",children:"\u6bcd\u4eb2"}),Ze.choices.map((function(e,t){return Object(i.jsx)(un.a,{value:e,control:Object(i.jsx)(dn.a,{color:"primary"}),label:Object(i.jsx)("span",{className:r.questionOptionText,children:e}),checked:U[2*k+1]===t,onClick:function(e){return In(0,t,k,le,q,U,$,$e,ae,T,w,X,!0)}},"choice-".concat(t))}))]})]})]})}),Object(i.jsxs)("div",{className:n?"":r.footer,children:[Object(i.jsxs)("div",{children:[Object(i.jsx)(B.a,{className:r.buttonWithRightMargin+" "+r.button,variant:"contained",onClick:_e,disabled:0===k,children:"\u4e0a\u4e00\u9898"}),Object(i.jsx)(B.a,{className:r.buttonWithRightMargin+" "+r.button,variant:"contained",onClick:Qe,disabled:Ye,children:"\u4e0b\u4e00\u9898"}),Object(i.jsx)(B.a,{variant:"contained",color:"primary",onClick:Ve,disabled:!Z||h,children:"\u63d0\u4ea4"})]}),Object(i.jsxs)("div",{className:r.progressWrapper+" "+(n?r.progressWrapperForSmallScreen:""),children:[Object(i.jsx)(fn,{totalNumber:$e.questions.length,currentIndex:k}),"\u7b2c ".concat(k+1," \u9898\uff08\u5171\n                 ").concat($e.questions.length," \u9898\uff09")]})]}),Object(i.jsx)("div",{className:r.timerContaner,children:Object(i.jsx)(gn,{})}),Object(i.jsxs)(bn.a,{className:r.exitButton,onClick:Ge,variant:"extended",disabled:v,children:[Object(i.jsx)(yn.a,{color:"primary"}),"\u6682\u5b58\u5e76\u9000\u51fa"]})]})]}),Object(i.jsxs)(pe.a,{open:!ce&&!!$e.instruction,onClose:He,children:[Object(i.jsx)(ge.a,{children:"\u6307\u5bfc\u8bed"}),Object(i.jsx)(xe.a,{children:Object(i.jsx)(ft.a,{children:$e.instruction})}),Object(i.jsx)(mt.a,{children:Object(i.jsx)(B.a,{onClick:He,color:"primary",autoFocus:!0,children:"\u7ee7\u7eed"})})]}),Object(i.jsx)(K,{showError:je,setShowError:be,errorMessage:fe}),Object(i.jsxs)(pe.a,{open:we,onClose:function(){Se(!1)},children:[Object(i.jsx)(ge.a,{children:"\u63d0\u793a"}),Object(i.jsx)(xe.a,{children:Object(i.jsx)(ft.a,{children:Ae})}),Object(i.jsx)(mt.a,{children:Object(i.jsx)(B.a,{onClick:function(){null!==ze&&T(ze),Se(!1)},color:"primary",autoFocus:!0,children:"\u524d\u5f80\u8be5\u9898"})})]})]})},qn=n(412),Rn=n(444),Dn=n(430),zn=(Object(F.a)((function(e){return Object(P.a)({createAccountCard:{borderRadius:8,width:800,margin:"30px auto 0"},createAccountText:{fontSize:"1.5rem",textAlign:"left",marginBottom:10,marginTop:15,paddingLeft:40},promptText:{marginBottom:24,marginLeft:40,fontSize:"1rem"},inputContainer:{margin:"0 40px"},input:{width:"30%",paddingRight:10,marginBottom:10},buttonContainer:{marginTop:30,marginLeft:40,marginRight:40,marginBottom:30,display:"flex",justifyContent:"space-between"},formClassifyText:{color:"#5f6368",fontSize:"0.8em",marginBottom:5,marginTop:10}})})),n(431)),Fn=n(432),Pn=n(433),En=n(434),Wn=n(435),Mn=n(448),Bn=n(436),Un=n(437),$n=(qt=le,function(e){var t=e.children,n=e.userAnswerIds,a=e.closeReport,r=e.pageSize,s=e.patientName,o=Object(c.useQuery)(nt,{variables:{userAnswerIds:n,pageSize:r},fetchPolicy:"no-cache"}),l=o.data;return o.loading||!l?Object(i.jsx)(Q,{}):l.report&&l.report.pdf?Object(i.jsx)(qt,{pdfData:l.report.pdf,closeReport:a,patientName:s,children:t}):null}),Hn=Object(F.a)((function(e){return Object(P.a)({content:{padding:"5px 10px"},questionnaireTable:{marginTop:20,marginBottom:20,maxHeight:"calc(100vh - 200px)",overflow:"auto"},doneIcon:{color:"#4caf50"},pageSizeSelect:{minWidth:100,marginRight:10}})})),Jn=function(e){var t=e.patientName,n=Hn(),s=Object(c.useQuery)(Ze,{variables:{isReport:!0},fetchPolicy:"no-cache",onCompleted:function(e){var t,n=e.questionnaireList,a=0,i=Object(r.a)(n);try{for(i.s();!(t=i.n()).done;){t.value.done&&(a+=1)}}catch(u){i.e(u)}finally{i.f()}C(a);var c,s=new Set,o=Object(r.a)(n);try{for(o.s();!(c=o.n()).done;){var l=c.value;l.done&&l.userAnswerId&&s.add(l.userAnswerId)}}catch(u){o.e(u)}finally{o.f()}O(s)}}),l=s.loading,u=s.data,d=(s.error,Object(o.useState)(new Set)),j=Object(a.a)(d,2),b=j[0],O=j[1],h=Object(o.useState)("a5"),f=Object(a.a)(h,2),m=f[0],p=f[1],g=Object(o.useState)(null),x=Object(a.a)(g,2),v=x[0],C=x[1],y=Object(o.useState)(!1),w=Object(a.a)(y,2),N=w[0],S=w[1];if(l||!u||null===v)return Object(i.jsx)(Q,{});var I=u.questionnaireList,k=[];if(I.forEach((function(e){e.done&&e.userAnswerId&&b.has(e.userAnswerId)&&k.push(e.userAnswerId)})),N)return Object(i.jsx)($n,{userAnswerIds:k,closeReport:function(){return S(!1)},pageSize:m,patientName:t});return Object(i.jsxs)("div",{className:n.content,children:[Object(i.jsx)(zn.a,{component:X.a,className:n.questionnaireTable,children:Object(i.jsxs)(Fn.a,{size:"small","aira-label":"\u9009\u62e9\u5df2\u5b8c\u6210\u7684\u91cf\u8868\uff0c\u751f\u6210\u62a5\u544a",children:[Object(i.jsx)(Pn.a,{children:Object(i.jsxs)(En.a,{children:[Object(i.jsx)(Wn.a,{padding:"checkbox",children:Object(i.jsx)(Mn.a,{checked:b.size===v&&0!==b.size,disabled:0===v,onChange:function(e){var t=e.target.checked,n=new Set;if(t){var a,i=Object(r.a)(I);try{for(i.s();!(a=i.n()).done;){var c=a.value;c.done&&c.userAnswerId&&n.add(c.userAnswerId)}}catch(s){i.e(s)}finally{i.f()}}O(n)}})}),Object(i.jsx)(Wn.a,{children:"\u91cf\u8868"}),Object(i.jsx)(Wn.a,{children:"\u5b8c\u6210\u72b6\u6001"}),Object(i.jsx)(Wn.a,{children:"\u5b8c\u6210\u65e5\u671f"})]})}),Object(i.jsx)(Bn.a,{children:I.map((function(e,t){return Object(i.jsxs)(En.a,{children:[Object(i.jsx)(Wn.a,{padding:"checkbox",children:Object(i.jsx)(Mn.a,{disabled:!e.done,checked:!!e.userAnswerId&&b.has(e.userAnswerId),onChange:function(t){return e.userAnswerId&&function(e,t){var n=e.target.checked,a=new Set(b);n?a.add(t):a.delete(t),O(a)}(t,e.userAnswerId)}})}),Object(i.jsx)(Wn.a,{children:e.name}),Object(i.jsx)(Wn.a,{children:e.done?Object(i.jsx)(Un.a,{className:n.doneIcon,fontSize:"small"}):null}),Object(i.jsx)(Wn.a,{children:e.displayedFillInDate||null})]},"questionnaire-".concat(t))}))})]})}),Object(i.jsxs)(ln.a,{className:n.pageSizeSelect,variant:"outlined",size:"small",children:[Object(i.jsx)(qn.a,{id:"page-size-label",children:"\u7eb8\u5f20\u5927\u5c0f"}),Object(i.jsxs)(Rn.a,{value:m,onChange:function(e){p(e.target.value)},labelId:"page-size-label",label:"\u7eb8\u5f20\u5927\u5c0f",id:"page-size-select",children:[Object(i.jsx)(Dn.a,{value:"a4",children:"A4"}),Object(i.jsx)(Dn.a,{value:"a5",children:"A5"})]})]}),Object(i.jsx)(B.a,{variant:"contained",color:"primary",disabled:0===b.size,onClick:function(){S(!0)},children:"\u751f\u6210\u62a5\u544a"})]})};!function(e){e.DATE_LATEST="DATE_LATEST",e.DATE_OLDEST="DATE_OLDEST"}(Rt||(Rt={}));var Qn=n(230),Vn=n(48),_n=n(443),Kn=(n(353),n(249)),Gn=n.n(Kn),Yn=n(253),Zn=n.n(Yn),Xn=n(254),ea=n.n(Xn),ta=n(250),na=n.n(ta),aa=n(251),ra=n.n(aa),ia=Object(F.a)((function(e){return Object(P.a)({fieldsContainer:{}})})),ca=["depressed","anxious","biphasic","schizophrenia"],sa=["\u6291\u90c1\u969c\u788d","\u7126\u8651\u969c\u788d","\u53cc\u76f8\u969c\u788d","\u7cbe\u795e\u5206\u88c2\u75c7"],oa=function(e,t){var n,a=[],i=Object(r.a)(e);try{for(i.s();!(n=i.n()).done;){var c=n.value;c!==t&&a.push(c)}}catch(s){i.e(s)}finally{i.f()}return a},la=function(e){var t=e.isDialogOpen,n=e.handleDialogClose,r=e.additionalFields,c=e.setAdditionalFields,s=e.handleAdditionalFieldsSearch,l=ia(),u=Object(o.useState)(r),d=Object(a.a)(u,2),j=d[0],b=d[1];Object(o.useEffect)((function(){b(r)}),[t,r]);return Object(i.jsxs)(pe.a,{open:t,onClose:n,"aria-labelledby":"form-dialog-title",maxWidth:"xs",fullWidth:!0,children:[Object(i.jsx)(ge.a,{id:"form-dialog-title",children:"\u9ad8\u7ea7\u7b5b\u9009"}),Object(i.jsx)(xe.a,{children:Object(i.jsx)("div",{className:l.fieldsContainer,children:sa.map((function(e,t){return Object(i.jsx)("div",{children:Object(i.jsx)(un.a,{control:Object(i.jsx)(Mn.a,{checked:j.includes(ca[t]),onChange:function(e){var n;n=ca[t],e.target.checked?j.includes(n)||b([].concat(Object(wn.a)(j),[n])):b(oa(j,n))}}),label:e})},e)}))})}),Object(i.jsxs)(mt.a,{children:[Object(i.jsx)(B.a,{onClick:n,children:"\u53d6\u6d88"}),Object(i.jsx)(B.a,{onClick:function(){c(j),n(),s(j)},color:"primary",children:"\u786e\u5b9a"})]})]})},ua=n(252),da=n.n(ua),ja="\u5e74\u9f84\u4e0d\u80fd\u4e3a\u8d1f\u6570\uff01",ba=Object(F.a)((function(e){return Object(P.a)({promptText:{color:"#5f6368",fontSize:"0.8em",paddingBottom:5,paddingTop:5},input:{width:"30%",paddingRight:10,paddingBottom:5},rangeWrapper:{display:"inline-block"},ageRangeInput:{width:"40%"},dateRangeWrapper:{width:"60%"},ageRangeWrapper:{width:"30%",paddingRight:10},dateRangeInput:{width:"50%",paddingRight:10},ageInputIconWrapper:{width:"20%",display:"inline-flex",justifyContent:"center",paddingTop:20},buttonWrapper:{paddingTop:10},extraFieldsWrapper:{paddingTop:10},searchButton:{marginRight:10},whiteButton:{backgroundColor:"#fff",color:Yr,"&:hover":{backgroundColor:"#fff"}},rangeFormWrapper:{width:"100%",alignItems:"flex-start",display:"flex"},ageInputIcon:{width:16,height:16,color:"rgba(0, 0, 0, 0.54)"},chip:{marginRight:5},additionalFieldButton:{marginRight:5}})})),Oa={format:"yyyy/MM/dd",okLabel:"\u786e\u5b9a",cancelLabel:"\u53d6\u6d88",invalidLabel:"\u8f93\u5165\u7684\u65e5\u671f\u6709\u8bef\uff01",maxDateMessage:"\u8f93\u5165\u7684\u65e5\u671f\u592a\u5927\uff01",minDateMessage:"\u8f93\u5165\u7684\u65e5\u671f\u592a\u5c0f\uff01",invalidDateMessage:"\u8f93\u5165\u7684\u65e5\u671f\u6709\u8bef\uff01",size:"small"},ha=Object(o.forwardRef)((function(e,t){var n=e.searchPatients,r=e.limit,c=(e.currentPageIndex,e.setCurrentPageIndex),s=e.filter,l=e.searchMyPatients,u=e.handleAdditionalFieldsSearch,d=ba(),j=Object(o.useState)(""),b=Object(a.a)(j,2),O=b[0],h=b[1],f=Object(o.useState)(""),m=Object(a.a)(f,2),p=m[0],g=m[1],x=Object(o.useState)(""),v=Object(a.a)(x,2),C=v[0],y=v[1],w=Object(o.useState)({min:"",max:""}),N=Object(a.a)(w,2),S=N[0],I=N[1],k=Object(o.useState)({min:null,max:null}),T=Object(a.a)(k,2),L=T[0],A=T[1],q=Object(o.useState)(!1),R=Object(a.a)(q,2),D=R[0],F=R[1],P=Object(o.useState)(!1),E=Object(a.a)(P,2),W=E[0],U=E[1],$=Object(o.useState)(""),H=Object(a.a)($,2),J=H[0],Q=H[1],V=Object(o.useState)(null),_=Object(a.a)(V,2),G=_[0],Y=_[1],Z=Object(o.useState)(!1),X=Object(a.a)(Z,2),ee=X[0],te=X[1],ne=Object(o.useState)([]),ae=Object(a.a)(ne,2),re=ae[0],ie=ae[1],ce=function(){return S.min&&Number(S.min)<0?(Q(ja),U(!0),void Y("minAge")):S.max&&Number(S.max)<0?(Q(ja),U(!0),void Y("maxAge")):S.min&&S.max&&Number(S.min)>Number(S.max)?(Q("\u6700\u5c0f\u5e74\u9f84\u5e94\u5c0f\u4e8e\u6700\u5927\u5e74\u9f84\uff01"),U(!0),void Y("ageRange")):L.min&&L.max&&L.min>L.max?(Q("\u8d77\u59cb\u65e5\u671f\u5e94\u5728\u622a\u6b62\u65e5\u671f\u4e4b\u524d\uff01"),U(!0),void Y("dateRange")):(c(0),void n({userName:O,name:p,gender:C,ageRange:{min:S.min?Number(S.min):null,max:S.max?Number(S.max):null},minSignUpDate:L.min?{year:L.min.getFullYear(),month:L.min.getMonth(),day:L.min.getDate()}:null,maxSignUpDate:L.max?{year:L.max.getFullYear(),month:L.max.getMonth(),day:L.max.getDate()}:null,limit:r,currentPageIndex:0,onlyMyPatient:D,filter:s,additionalFields:re}))};Object(o.useImperativeHandle)(t,(function(){return{search:function(){ce()}}}));return Object(i.jsxs)("form",{noValidate:!0,autoComplete:"off",children:[Object(i.jsx)("div",{className:d.promptText,children:"\u4e2a\u4eba\u4fe1\u606f"}),Object(i.jsxs)("div",{children:[Object(i.jsx)(M.a,{label:"\u95e8\u8bca\u53f7",size:"small",className:d.input,value:O,onChange:function(e){h(e.target.value)}}),Object(i.jsx)(M.a,{label:"\u59d3\u540d",size:"small",className:d.input,value:p,onChange:function(e){g(e.target.value)}}),Object(i.jsxs)(ln.a,{className:d.input,size:"small",children:[Object(i.jsx)(qn.a,{children:"\u6027\u522b"}),Object(i.jsxs)(Rn.a,{color:"primary",label:"\u6027\u522b",value:C,onChange:function(e){y(e.target.value)},children:[Object(i.jsx)(Dn.a,{value:"\u7537",children:"\u7537"}),Object(i.jsx)(Dn.a,{value:"\u5973",children:"\u5973"}),Object(i.jsx)(Dn.a,{value:"\u5168\u90e8",children:"\u5168\u90e8"})]})]}),Object(i.jsxs)("div",{className:d.rangeFormWrapper,children:[Object(i.jsxs)("div",{className:d.ageRangeWrapper+" "+d.rangeWrapper,children:[Object(i.jsx)("div",{className:d.promptText,children:"\u5e74\u9f84"}),Object(i.jsxs)("div",{children:[Object(i.jsx)(M.a,{label:"\u6700\u5c0f\u5e74\u9f84",size:"small",type:"number",className:d.ageRangeInput,value:S.min,onChange:function(e){var t=Number(e.target.value);"ageRange"===G&&(t<=Number(S.max)||0===t)&&Y(null),"minAge"===G&&t>=0&&Y(null),I(Object(z.a)(Object(z.a)({},S),{},{min:e.target.value}))},error:"ageRange"===G||"minAge"===G||void 0}),Object(i.jsx)("span",{className:d.ageInputIconWrapper,children:Object(i.jsx)(Gn.a,{className:d.ageInputIcon})}),Object(i.jsx)(M.a,{label:"\u6700\u5927\u5e74\u9f84",size:"small",type:"number",className:d.ageRangeInput,value:S.max,onChange:function(e){var t=Number(e.target.value);"ageRange"===G&&(t>=Number(S.min)||0===t)&&Y(null),"maxAge"===G&&t>=0&&Y(null),I(Object(z.a)(Object(z.a)({},S),{},{max:e.target.value}))},error:"ageRange"===G||"maxAge"===G||void 0})]})]}),Object(i.jsxs)("div",{className:d.dateRangeWrapper+" "+d.rangeWrapper,children:[Object(i.jsx)("div",{className:d.promptText,children:"\u6ce8\u518c\u65f6\u95f4"}),Object(i.jsxs)(Vn.a,{utils:Qn.a,locale:na.a,children:[Object(i.jsx)(_n.a,Object(z.a)(Object(z.a)({value:L.min,onChange:function(e,t){"dateRange"===G&&(null===e||L.max&&+e<=+L.max)&&Y(null),A(Object(z.a)(Object(z.a)({},L),{},{min:e}))},label:"\u8d77\u59cb\u65e5\u671f",className:d.dateRangeInput},Oa),{},{error:"dateRange"===G||void 0})),Object(i.jsx)(_n.a,Object(z.a)(Object(z.a)({value:L.max,onChange:function(e,t){"dateRange"===G&&(null===e||L.min&&+e>=+L.min)&&Y(null),A(Object(z.a)(Object(z.a)({},L),{},{max:e}))},label:"\u622a\u6b62\u65e5\u671f",className:d.dateRangeInput},Oa),{},{error:"dateRange"===G||void 0}))]})]})]})]}),Object(i.jsxs)("div",{className:d.extraFieldsWrapper,children:[Object(i.jsx)(un.a,{control:Object(i.jsx)(Mn.a,{checked:D,onChange:function(e){F(e.target.checked),l(e.target.checked)}}),label:"\u53ea\u9009\u62e9\u6211\u7684\u75c5\u4eba"}),Object(i.jsx)(B.a,{startIcon:Object(i.jsx)(ra.a,{}),onClick:function(){te(!0)},color:"primary",className:d.additionalFieldButton,children:"\u9ad8\u7ea7\u7b5b\u9009"}),ca.map((function(e,t){if(re.includes(e)){return Object(i.jsx)(Bt.a,{variant:"outlined",size:"small",onDelete:function(){var t=oa(re,e);ie(t),u(t)},icon:Object(i.jsx)(da.a,{}),color:"primary",label:sa[t],className:d.chip},e)}return null}))]}),Object(i.jsxs)("div",{className:d.buttonWrapper,children:[Object(i.jsx)(B.a,{variant:"contained",color:"primary",startIcon:Object(i.jsx)(Zn.a,{}),className:d.searchButton,onClick:ce,children:"\u641c\u7d22"}),Object(i.jsx)(B.a,{variant:"contained",startIcon:Object(i.jsx)(ea.a,{}),className:d.whiteButton,onClick:function(){h(""),g(""),y(""),I({min:"",max:""}),A({min:null,max:null}),Y(null),c(0),F(za),n({limit:r,currentPageIndex:0,filter:s,onlyMyPatient:za}),ie([])},children:"\u91cd\u7f6e"})]}),Object(i.jsx)(K,{showError:W,setShowError:U,errorMessage:J}),Object(i.jsx)(la,{isDialogOpen:ee,handleDialogClose:function(){te(!1)},additionalFields:re,setAdditionalFields:ie,handleAdditionalFieldsSearch:u})]})})),fa=Object(F.a)((function(e){return Object(P.a)({root:{height:48,display:"flex",alignItems:"center",paddingLeft:10,fontWeight:500,fontSize:"1.125rem"}})})),ma=function(e){var t=e.text,n=fa();return Object(i.jsxs)(i.Fragment,{children:[Object(i.jsx)("div",{className:n.root,children:t}),Object(i.jsx)(Z.a,{})]})},pa=n(449),ga=n(457),xa=function(e){var t=e.finishedForms,n=null===t||0===t.length,r=Object(o.useMemo)((function(){if(!t)return{uniqueFormList:[],resultList:[]};var e=[],n=[],a=new Set;t.forEach((function(t){if(a.has(t.id)){if(t.result&&t.displayedFillInDate)for(var r=0;r<=e.length;){if(e[r].id===t.id){n[r].push({result:t.result,fillInDate:t.displayedFillInDate});break}r+=1}}else a.add(t.id),e.push(t),t.result&&t.displayedFillInDate?n.push([{result:t.result,fillInDate:t.displayedFillInDate}]):n.push([])}));var r=n.map((function(e){return Object(wn.a)(e).reverse()}));return{uniqueFormList:e,resultList:r}}),[t]),c=r.uniqueFormList,s=r.resultList,l=Object(o.useState)(!1),u=Object(a.a)(l,2),d=u[0],j=u[1],b=function(){j(!1)};return Object(i.jsxs)(i.Fragment,{children:[Object(i.jsx)(B.a,{startIcon:Object(i.jsx)(Ce.a,{}),color:"primary",disabled:n,onClick:function(){j(!0)},size:"small",children:"\u8d8b\u52bf"}),Object(i.jsxs)(pe.a,{open:d,onClose:b,children:[Object(i.jsx)(ge.a,{children:"\u67e5\u770b\u8d8b\u52bf"}),Object(i.jsx)(xe.a,{children:Object(i.jsx)(zn.a,{children:Object(i.jsxs)(Fn.a,{size:"small",children:[Object(i.jsx)(Pn.a,{children:Object(i.jsxs)(En.a,{children:[Object(i.jsx)(Wn.a,{children:"\u91cf\u8868"}),Object(i.jsx)(Wn.a,{})]})}),Object(i.jsx)(Bn.a,{children:c.map((function(e,t){return Object(i.jsxs)(En.a,{children:[Object(i.jsx)(Wn.a,{children:e.name}),Object(i.jsx)(Wn.a,{children:Object(i.jsx)(qe,{formResultList:s[t],formName:e.name,formKey:e.key})})]},"questionnaire-".concat(t))}))})]})})}),Object(i.jsx)(mt.a,{children:Object(i.jsx)(B.a,{onClick:b,color:"primary",children:"\u5173\u95ed"})})]})]})},va=n(255),Ca=n.n(va),ya=Object(F.a)((function(e){return Object(P.a)({diagnosisText:{minWidth:250}})})),wa=function(e){var t=e.isDialogOpen,n=e.handleDialogClose,r=e.patientName,s=e.patientId,l=e.refetch,u=Object(c.useMutation)(N),d=Object(a.a)(u,1)[0];Object(o.useEffect)((function(){f("")}),[r]);var j=ya(),b=Object(o.useState)(""),O=Object(a.a)(b,2),h=O[0],f=O[1],m=function(){var e=Object(We.a)(Ee.a.mark((function e(){return Ee.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(""===h){e.next=5;break}return e.next=3,d({variables:{input:{patientId:s,diagnosis:ca[sa.indexOf(h)]}}});case 3:e.next=7;break;case 5:return e.next=7,d({variables:{input:{patientId:s,diagnosis:h}}});case 7:n(),l();case 9:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}();return Object(i.jsxs)(pe.a,{open:t,onClose:n,children:[Object(i.jsx)(ge.a,{children:"\u8bca\u65ad"}),Object(i.jsxs)(xe.a,{children:[Object(i.jsxs)(ft.a,{className:j.diagnosisText,children:["\u7ed9",r,"\u6dfb\u52a0\u8bca\u65ad"]}),Object(i.jsxs)(ln.a,{fullWidth:!0,children:[Object(i.jsx)(qn.a,{shrink:!0,children:"\u8bca\u65ad"}),Object(i.jsx)(Rn.a,{value:h,onChange:function(e){f(e.target.value)},children:sa.map((function(e){return Object(i.jsx)(Dn.a,{value:e,children:e},e)}))})]})]}),Object(i.jsxs)(mt.a,{children:[Object(i.jsx)(B.a,{onClick:n,children:"\u53d6\u6d88"}),Object(i.jsx)(B.a,{onClick:m,color:"primary",children:"\u786e\u8ba4"})]})]})},Na=Object(F.a)((function(e){return Object(P.a)({root:{marginTop:20,width:"min(calc(100% - 20px), calc(100vw - 20px))",maxWidth:"100vw",fontSize:"0.8rem"},loadingIndicatorWrapper:{width:"100%",height:200},reportButton:{backgroundColor:"#fff",color:Yr,"&:hover":{backgroundColor:"#fff"}},lineChartsButtonContainer:{marginRight:5},tableCell:{overflow:"hidden",textOverflow:"ellipsis",whiteSpace:"nowrap"},iconMargin:{marginRight:5}})})),Sa=["\u95e8\u8bca\u53f7","\u59d3\u540d","\u6027\u522b","\u5e74\u9f84","\u6559\u80b2","\u804c\u4e1a","\u5a5a\u59fb","\u6ce8\u518c\u65f6\u95f4","\u533b\u751f","\u8bca\u65ad"],Ia=["userName","name","gender","age","education","jobStatus","marriageStatus","signUpDate","doctorName","diagnosis"],ka=[70,80,60,60,100,70,60,150,80,150],Ta=[140,80,60,60,100,70,60,150,80,150],La=function(e){var t=Na(),n=e.loading,r=e.patientList,c=e.selectedUserAnswerIds,s=e.setSelectedUserId,l=e.setSelectedUserAnswerIds,u=e.setIsReportShown,d=e.limit,j=e.currentPageIndex,b=e.handleLimitChange,O=e.handleCurrentPageIndexChange,h=e.filter,f=e.handleSortChange,m=e.refetch,p=e.setPrintPageSize,g=e.setPrintPatientName,x=Object(o.useState)(!1),v=Object(a.a)(x,2),C=v[0],y=v[1],w=Object(o.useState)(!1),N=Object(a.a)(w,2),S=N[0],I=N[1],k=Object(o.useState)(null),T=Object(a.a)(k,2),L=T[0],A=T[1],q=Object(o.useState)(!1),R=Object(a.a)(q,2),D=R[0],z=R[1],F=Object(o.useState)(null),P=Object(a.a)(F,2),E=P[0],W=P[1],M=Object(o.useState)(null),U=Object(a.a)(M,2),$=U[0],H=U[1],J=function(e,t){H(e),W(t),z(!0)};if(Object(o.useEffect)((function(){!1===n&&void 0!==r&&0===r.queryUser.users.length&&y(!0)}),[n,r]),n)return Object(i.jsx)("div",{className:t.loadingIndicatorWrapper,children:Object(i.jsx)(Q,{})});if(void 0===r)return null;if(0===r.queryUser.users.length)return Object(i.jsx)(K,{showError:C,setShowError:y,errorMessage:"\u672a\u627e\u5230\u7b26\u5408\u6761\u4ef6\u7684\u75c5\u4eba\uff01"});return Object(i.jsxs)(i.Fragment,{children:[Object(i.jsxs)(zn.a,{component:X.a,className:t.root,children:[Object(i.jsx)(pa.a,{rowsPerPage:d,rowsPerPageOptions:[5,10,25],page:j,count:r.queryUser.total,onChangePage:function(e,t){O(t)},component:"div",onChangeRowsPerPage:function(e){b(Number(e.target.value))},labelDisplayedRows:function(e){var t=e.from,n=(e.to,e.count);return"\u5171\u8ba1".concat(n,"\u6761\u6570\u636e\uff0c\u5f53\u524d\u4e3a\u7b2c").concat(Math.ceil(t/d),"\u9875")}}),Object(i.jsxs)(Fn.a,{size:"small","aria-label":"\u75c5\u4eba\u5217\u8868",children:[Object(i.jsx)(Pn.a,{children:Object(i.jsxs)(En.a,{children:[Sa.map((function(e,n){return Object(i.jsx)(Wn.a,{style:{minWidth:ka[n],maxWidth:Ta[n],padding:5,paddingLeft:0===n?10:void 0},className:t.tableCell,children:"signUpDate"===Ia[n]?Object(i.jsx)(ga.a,{active:"signUpDate"===Ia[n],direction:h===Rt.DATE_LATEST?"desc":"asc",onClick:f,children:e}):e},e)})),Object(i.jsx)(Wn.a,{style:{padding:5}})]})}),Object(i.jsx)(Bn.a,{children:r.queryUser.users.map((function(e){var n=!e.finishedForms||0===e.finishedForms.length;return Object(i.jsxs)(En.a,{children:[Ia.map((function(n,a){var r=a===Ia.length-1?sa[ca.indexOf(e[n])]:e[n];return Object(i.jsx)(Wn.a,{style:{minWidth:ka[a],maxWidth:Ta[a],padding:5,paddingLeft:0===a?10:void 0},className:t.tableCell,title:r||void 0,children:a===Ia.length-1?Object(i.jsxs)(i.Fragment,{children:[Object(i.jsx)(Y.a,{"aria-label":"delete",className:t.iconMargin,size:"small",color:"primary",onClick:function(){return e.name&&J(e.name,e.id)},children:Object(i.jsx)(Ca.a,{fontSize:"inherit"})}),r]}):r},n)})),Object(i.jsx)(Wn.a,{style:{minWidth:180,padding:0},children:Object(i.jsxs)("div",{style:{display:"flex"},children:[Object(i.jsx)("span",{className:t.lineChartsButtonContainer,children:Object(i.jsx)(xa,{finishedForms:e.finishedForms})}),Object(i.jsx)(B.a,{size:"small",color:"primary",startIcon:Object(i.jsx)(an.a,{}),disabled:n,onClick:function(){return e.finishedForms&&function(e,t,n){s(t),A(e);var a=e.map((function(e){return e.userAnswerId})).filter((function(e){return null!==e}));l(a),I(!0),g(n)}(e.finishedForms,e.id,e.name||void 0)},children:"\u62a5\u544a"})]})})]},e.userName)}))})]})]}),L&&c&&Object(i.jsx)(qa,{isOpen:S,closeModal:function(){I(!1)},finishedFormList:L,selectedUserAnswerIds:c,setSelectedUserAnswerIds:l,onOkButtonClick:function(e){u(!0),p(e)}}),$&&E&&Object(i.jsx)(wa,{isDialogOpen:D,handleDialogClose:function(){z(!1)},patientName:$,patientId:E,refetch:m})]})},Aa=(n(413),n(256),Object(F.a)((function(e){return Object(P.a)({popover:{pointerEvents:"none"},paper:{padding:e.spacing(1)},icon:{width:22,height:22}})})),Object(F.a)((function(e){return Object(P.a)({formName:{maxWidth:300,textOverflow:"ellipsis",overflow:"hidden",whiteSpace:"nowrap"},pageSizeSelect:{minWidth:100,marginRight:10}})}))),qa=function(e){var t=e.isOpen,n=e.closeModal,r=e.finishedFormList,c=e.selectedUserAnswerIds,s=e.setSelectedUserAnswerIds,l=e.onOkButtonClick,u=Aa(),d=Object(o.useState)("a5"),j=Object(a.a)(d,2),b=j[0],O=j[1];return Object(i.jsxs)(pe.a,{open:t,onClose:n,"aria-labelledby":"alert-dialog-title","aria-describedby":"alert-dialog-description",maxWidth:"md",children:[Object(i.jsx)(ge.a,{id:"alert-dialog-title",children:"\u8bf7\u9009\u62e9\u8981\u751f\u6210\u62a5\u544a\u7684\u91cf\u8868"}),Object(i.jsx)(xe.a,{children:Object(i.jsx)(zn.a,{children:Object(i.jsxs)(Fn.a,{size:"small","aira-label":"\u9009\u62e9\u91cf\u8868\uff0c\u751f\u6210\u62a5\u544a",children:[Object(i.jsx)(Pn.a,{children:Object(i.jsxs)(En.a,{children:[Object(i.jsx)(Wn.a,{padding:"checkbox",children:Object(i.jsx)(Mn.a,{checked:c.length===r.length&&0!==c.length,onChange:function(){c.length<r.length?s(r.map((function(e){return e.userAnswerId})).filter((function(e){return null!==e}))):s([])}})}),Object(i.jsx)(Wn.a,{children:"\u5168\u90e8\u5df2\u5b8c\u6210\u91cf\u8868"}),Object(i.jsx)(Wn.a,{children:"\u5b8c\u6210\u65f6\u95f4"}),Object(i.jsx)(Wn.a,{children:"\u533b\u751f"})]})}),Object(i.jsx)(Bn.a,{children:r.map((function(e,t){return Object(i.jsxs)(En.a,{children:[Object(i.jsx)(Wn.a,{padding:"checkbox",children:Object(i.jsx)(Mn.a,{checked:!!e.userAnswerId&&-1!==c.indexOf(e.userAnswerId),onChange:function(){return e.userAnswerId&&(t=e.userAnswerId,void(-1!==c.indexOf(t)?s(c.filter((function(e){return e!==t}))):s([].concat(Object(wn.a)(c),[t]))));var t}})}),Object(i.jsx)(Wn.a,{className:u.formName,children:e.name}),Object(i.jsx)(Wn.a,{children:e.displayedFillInDate||null}),Object(i.jsx)(Wn.a,{children:e.doctorName||null})]},"questionnaire-".concat(t))}))})]})})}),Object(i.jsxs)(mt.a,{children:[Object(i.jsxs)(ln.a,{className:u.pageSizeSelect,variant:"outlined",size:"small",children:[Object(i.jsx)(qn.a,{id:"page-size-label",children:"\u7eb8\u5f20\u5927\u5c0f"}),Object(i.jsxs)(Rn.a,{value:b,onChange:function(e){O(e.target.value)},labelId:"page-size-label",label:"\u7eb8\u5f20\u5927\u5c0f",id:"page-size-select",children:[Object(i.jsx)(Dn.a,{value:"a4",children:"A4"}),Object(i.jsx)(Dn.a,{value:"a5",children:"A5"})]})]}),Object(i.jsx)(B.a,{onClick:n,children:"\u53d6\u6d88"}),Object(i.jsx)(B.a,{onClick:function(){l(b),n()},color:"primary",autoFocus:!0,disabled:0===c.length,children:"\u786e\u5b9a"})]})]})},Ra=Object(F.a)((function(e){return Object(P.a)({content:{padding:"5px 10px"},hiddenContent:{display:"none"}})})),Da=function(e){return function(t){var n=t.children,a=t.userAnswerIds,r=t.closeReport,s=t.userId,o=t.pageSize,l=t.patientName,u=Object(c.useQuery)(rt,{variables:{userAnswerIds:a,userId:s,pageSize:o},fetchPolicy:"no-cache"}),d=u.data;return u.loading||!d?Object(i.jsx)(Q,{}):d.reportForAdmin&&d.reportForAdmin.pdf?Object(i.jsx)(e,{pdfData:d.reportForAdmin.pdf,closeReport:r,patientName:l,children:n}):null}}(le),za=!1,Fa=function(){var e=Object(c.useLazyQuery)(bt,{fetchPolicy:"no-cache"}),t=Object(a.a)(e,2),n=t[0],r=t[1],s=r.loading,l=r.data,u=(r.error,Object(o.useRef)(null)),d=Object(o.useState)(10),j=Object(a.a)(d,2),b=j[0],O=j[1],h=Object(o.useState)(0),f=Object(a.a)(h,2),m=f[0],p=f[1],g=Object(o.useState)(Rt.DATE_LATEST),x=Object(a.a)(g,2),v=x[0],C=x[1],y=Ra(),w=Object(o.useState)(null),N=Object(a.a)(w,2),S=N[0],I=N[1],k=Object(o.useState)(null),T=Object(a.a)(k,2),L=T[0],A=T[1],q=Object(o.useState)(!1),R=Object(a.a)(q,2),D=R[0],F=R[1],P=Object(o.useRef)(n),E=Object(o.useState)({limit:10,currentPageIndex:0}),W=Object(a.a)(E,2),M=W[0],B=W[1];Object(o.useEffect)((function(){P.current({variables:{limit:10,currentPageIndex:0,filter:Rt.DATE_LATEST,onlyMyPatient:za}})}),[]);var U=Boolean(D&&L&&S),$=Object(o.useState)("a5"),H=Object(a.a)($,2),J=H[0],Q=H[1],V=Object(o.useState)(void 0),_=Object(a.a)(V,2),K=_[0],G=_[1];return Object(i.jsxs)(i.Fragment,{children:[Object(i.jsxs)("div",{className:U?y.hiddenContent:"",children:[Object(i.jsx)(ma,{text:"\u641c\u7d22\u75c5\u4eba\u4fe1\u606f"}),Object(i.jsxs)("div",{className:y.content,children:[Object(i.jsx)(ha,{searchPatients:function(e){n({variables:e}),B(e)},limit:b,currentPageIndex:m,ref:u,setCurrentPageIndex:p,filter:v,searchMyPatients:function(e){p(0),n({variables:Object(z.a)(Object(z.a)({},M),{},{onlyMyPatient:e,currentPageIndex:0,limit:b,filter:v})})},handleAdditionalFieldsSearch:function(e){p(0),n({variables:Object(z.a)(Object(z.a)({},M),{},{additionalFields:e,currentPageIndex:0,limit:b,filter:v})})}}),Object(i.jsx)(La,{loading:s,patientList:l,selectedUserAnswerIds:S,setSelectedUserId:A,setSelectedUserAnswerIds:I,setIsReportShown:F,limit:b,currentPageIndex:m,handleLimitChange:function(e){O(e),p(0),n({variables:Object(z.a)(Object(z.a)({},M),{},{limit:e,currentPageIndex:0,filter:v})})},handleCurrentPageIndexChange:function(e){p(e),n({variables:Object(z.a)(Object(z.a)({},M),{},{limit:b,currentPageIndex:e,filter:v})})},filter:v,setFilter:C,handleSortChange:function(){var e=v===Rt.DATE_LATEST?Rt.DATE_OLDEST:Rt.DATE_LATEST;C(e),p(0),n({variables:Object(z.a)(Object(z.a)({},M),{},{limit:b,currentPageIndex:0,filter:e})})},refetch:function(){n({variables:Object(z.a)(Object(z.a)({},M),{},{limit:b,currentPageIndex:m,filter:v})})},setPrintPageSize:Q,setPrintPatientName:G})]})]}),D&&L&&S&&Object(i.jsx)(Da,{userId:L,userAnswerIds:S,closeReport:function(){F(!1)},pageSize:J,patientName:K})]})},Pa=(Object(F.a)((function(e){return Object(P.a)({root:{overflow:"hidden"},actionContainer:{float:"right",paddingRight:10,paddingTop:10,fontSize:"0.875rem",display:"flex",alignItems:"center"},welcomeMessage:{paddingRight:10,paddingBottom:1}})})),n(439)),Ea=n(257),Wa=n.n(Ea),Ma=Object(F.a)((function(e){return Object(P.a)({passwordInput:{minWidth:300}})})),Ba=Object(o.forwardRef)((function(e,t){var n=function(e){"Enter"===e.key&&x()};Object(o.useEffect)((function(){return window.addEventListener("keydown",n),function(){window.removeEventListener("keydown",n)}}));var r=Ma(),c=e.isDialogOpen,s=e.setIsDialogOpen,l=e.doctorName,u=e.handleDoctorLogIn,d=e.hideErrorIndicator,j=Object(o.useState)(""),b=Object(a.a)(j,2),O=b[0],h=b[1],f=Object(o.useState)(!1),m=Object(a.a)(f,2),p=m[0],g=m[1];Object(o.useImperativeHandle)(t,(function(){return{showError:function(){g(!0)},hideError:function(){g(!1)}}}));var x=function(){u(O)},v=function(){s(!1)};return Object(i.jsxs)(pe.a,{open:c,onClose:v,children:[Object(i.jsx)(ge.a,{children:"\u8bf7\u786e\u8ba4\u60a8\u7684\u5bc6\u7801"}),Object(i.jsxs)(xe.a,{children:[Object(i.jsxs)(ft.a,{children:["\u5f53\u524d\u767b\u5165\u7684\u533b\u751f\u4e3a",l]}),Object(i.jsxs)(Pa.a,{container:!0,spacing:2,alignItems:"center",children:[Object(i.jsx)(Pa.a,{item:!0,children:Object(i.jsx)(Wa.a,{})}),Object(i.jsx)(Pa.a,{item:!0,children:Object(i.jsx)(M.a,{autoFocus:!0,className:r.passwordInput,label:"\u5bc6\u7801",type:"password",value:O,onChange:function(e){d(),h(e.target.value)},helperText:p&&!O?"\u8bf7\u8f93\u5165\u60a8\u7684\u5bc6\u7801":void 0,error:!(!p||O)||void 0})})]})]}),Object(i.jsxs)(mt.a,{children:[Object(i.jsx)(B.a,{onClick:v,color:"primary",children:"\u53d6\u6d88"}),Object(i.jsx)(B.a,{onClick:x,color:"primary",children:"\u786e\u8ba4"})]})]})})),Ua=n(258),$a=n.n(Ua),Ha=Object(F.a)((function(e){return Object(P.a)({root:{height:"100%",width:"100%",background:"#e3f2fd"},logoContainer:{display:"flex",minHeight:92,maxHeight:290,height:"calc(100% - 560px)",justifyContent:"center"},logo:{maxHeight:92,height:"100%",marginTop:"auto"},actionContainer:{maxHeight:160,padding:20,display:"flex",alignItems:"center",flexDirection:"column",fontSize:"1.5rem"},enterSystemButtonContainer:{marginTop:18},extendedIcon:{position:"absolute",right:20,bottom:20,backgroundColor:"#fff"},seuText:{margin:"10px 0 15px"},header:{height:52}})})),Ja=function(e){e.setDoctor;var t=e.doctor,n=e.logIn,r=Object(D.g)(),c=Ha(),s=Object(o.useRef)(null),l=Object(o.useState)(!1),u=Object(a.a)(l,2),d=u[0],j=u[1],b=Object(o.useState)(!1),O=Object(a.a)(b,2),h=O[0],f=O[1],m=function(){var e=Object(We.a)(Ee.a.mark((function e(a){var i,c;return Ee.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!t.userName){e.next=14;break}if(a){e.next=4;break}return null===(i=s.current)||void 0===i||i.showError(),e.abrupt("return");case 4:return e.prev=4,e.next=7,n({variables:{input:{userName:t.userName,password:a}}});case 7:(c=e.sent).data&&c.data.doctorLogIn.userName&&(console.log("Second login succeeds."),r.push("/doctor")),e.next=14;break;case 11:e.prev=11,e.t0=e.catch(4),f(!0);case 14:case"end":return e.stop()}}),e,null,[[4,11]])})));return function(t){return e.apply(this,arguments)}}();return Object(i.jsxs)("div",{className:c.root,children:[Object(i.jsx)("div",{className:c.header}),Object(i.jsx)("div",{className:c.logoContainer,children:Object(i.jsx)("img",{src:Re,alt:"\u4e2d\u5927\u533b\u9662",className:c.logo})}),Object(i.jsxs)("div",{className:c.actionContainer,children:[Object(i.jsx)("div",{className:c.seuText,children:"\u4e1c\u5357\u5927\u5b66\u9644\u5c5e\u4e2d\u5927\u533b\u9662"}),Object(i.jsx)("div",{children:"\u5fc3\u7406\u5065\u5eb7\u8bc4\u4f30\u7cfb\u7edf"}),Object(i.jsx)("div",{className:c.enterSystemButtonContainer,children:Object(i.jsx)(B.a,{startIcon:Object(i.jsx)($a.a,{}),color:"primary",variant:"contained",onClick:function(){r.push("/user/login")},children:"\u8fdb\u5165\u7cfb\u7edf"})})]}),t.name&&Object(i.jsx)(Ba,{isDialogOpen:d,setIsDialogOpen:j,doctorName:t.name,handleDoctorLogIn:m,hideErrorIndicator:function(){f(!1)},ref:s}),Object(i.jsx)(K,{showError:h,setShowError:f,errorMessage:"\u5bc6\u7801\u4e0d\u6b63\u786e\uff01"})]})},Qa=n(97),Va=n.n(Qa),_a=Object(F.a)((function(e){return Object(P.a)({root:{background:"#e3f2fd",height:"100%",width:"100%"},titleWrapper:{height:"100%"},title:{fontSize:"1.5rem",textAlign:"center"},promptTextContainer:{display:"flex",justifyContent:"center",paddingTop:50,background:"#e3f2fd"},promptText:{width:"50%",minWidth:"min(85%, 400px)",lineHeight:"1.5rem"},buttonContainer:{display:"flex",justifyContent:"center",paddingTop:50,background:"#e3f2fd",paddingBottom:20},titleContainer:{minHeight:75,maxHeight:290,height:"calc(100% - 610px)",display:"flex",flexDirection:"column",justifyContent:"flex-end",background:"#e3f2fd"}})})),Ka=function(){var e=_a();return Object(i.jsxs)("div",{className:e.root,children:[Object(i.jsx)(be,{}),Object(i.jsx)("div",{className:e.titleContainer,children:Object(i.jsx)("div",{className:e.title,children:"\u6307\u5bfc\u8bed"})}),Object(i.jsx)("div",{className:e.promptTextContainer,children:Object(i.jsx)("div",{className:e.promptText,children:"\u5728\u63a5\u4e0b\u6765\u5927\u7ea620\u5206\u949f\u7684\u65f6\u95f4\u91cc\u60a8\u5c06\u8fdb\u884c\u4e00\u7cfb\u5217\u7684\u91cf\u8868\u8bc4\u4f30\uff0c\u76ee\u7684\u662f\u5bf9\u60a8\u7684\u5fc3\u7406\u72b6\u51b5\u53ca\u4e2a\u6027\u7279\u5f81\u8fdb\u884c\u8bc4\u4f30\uff0c\u4e0b\u9762\u7684\u95ee\u9898\u5e76\u4e0d\u5b58\u5728\u6240\u8c13\u6b63\u786e\u6216\u8005\u9519\u8bef\u7684\u7b54\u6848\uff0c\u60a8\u53ea\u9700\u8981\u6309\u7167\u81ea\u5df1\u771f\u5b9e\u7684\u72b6\u51b5\u5b8c\u6210\u5c31\u53ef\u4ee5\u4e86\u3002\u4e5f\u8bb8\u60a8\u4f1a\u89c9\u5f97\u81ea\u5df1\u5e76\u4e0d\u5b8c\u5168\u5982\u9898\u76ee\u6240\u63cf\u8ff0\u7684\u90a3\u6837\uff0c\u8fd9\u65f6\u5019\u60a8\u53ef\u4ee5\u6839\u636e\u9009\u9879\u9009\u62e9\u6700\u63a5\u8fd1\u60a8\u7684\u72b6\u51b5\u3002\u8bf7\u8bb0\u4f4f\uff0c\u8fd9\u91cc\u5e76\u6ca1\u6709\u6b63\u786e\u6216\u9519\u8bef\uff0c\u60a8\u53ea\u8981\u5982\u5b9e\u56de\u7b54\u95ee\u9898\u5c31\u53ef\u4ee5\u4e86\u3002"})}),Object(i.jsx)("div",{className:e.buttonContainer,children:Object(i.jsx)(R.b,{to:"/user/home",children:Object(i.jsx)(B.a,{variant:"contained",color:"primary",endIcon:Object(i.jsx)(Va.a,{}),children:"\u4e0b\u4e00\u6b65"})})})]})},Ga=n(130),Ya=n.n(Ga),Za=n(438),Xa=n(131),er=n.n(Xa),tr=n(132),nr=n.n(tr),ar=n(133),rr=n.n(ar),ir=n(134),cr=n.n(ir),sr=n(135),or=n.n(sr);function lr(){var e=Object(j.a)(["\n  mutation PatientLogIn($input: UserLoginInput) {\n    patientLogIn(input: $input) {\n      name\n      userName\n      education\n      jobStatus\n      gender\n      marriageStatus\n      age\n      didRequest\n    }\n  }\n"]);return lr=function(){return e},e}var ur=Object(c.gql)(lr()),dr=Object(F.a)((function(e){return Object(P.a)({root:{background:"#e3f2fd",height:"100%",width:"100%"},titleWrapper:{height:"100%"},title:{fontSize:"1.5rem",textAlign:"center"},buttonContainer:{display:"flex",justifyContent:"center",paddingTop:50,background:"#e3f2fd",paddingBottom:20},titleContainer:{minHeight:75,maxHeight:290,height:"calc(100% - 630px)",display:"flex",flexDirection:"column",justifyContent:"flex-end",background:"#e3f2fd"},inputContainer:{display:"flex",justifyContent:"center",paddingTop:50},personalInformationContainer:{display:"flex",flexDirection:"column",alignItems:"center",paddingTop:20,background:"#e3f2fd"},input:{width:250,paddingTop:5,paddingBottom:5},actionsWrapper:{display:"flex",justifyContent:"center",background:"#e3f2fd"},actionsContainer:{display:"flex",justifyContent:"space-between",paddingTop:50,background:"#e3f2fd",paddingBottom:20,width:300}})}));var jr=function(e){var t=e.setPatient,n=e.patient;console.log("///////////////////"),console.log(n);var r=new URLSearchParams(Object(D.h)().search),s=Object(o.useRef)((function(){var e=r.get("userName");e&&(z(e),Ce(e))}));Object(o.useEffect)((function(){s.current()}),[]);var l=function(e){"Enter"===e.key&&(T?we():Ce(void 0))};Object(o.useEffect)((function(){return window.addEventListener("keydown",l),function(){window.removeEventListener("keydown",l)}}));var u=Object(c.useMutation)(ur,{onCompleted:function(e){e&&e.patientLogIn&&t(e.patientLogIn)}}),d=Object(a.a)(u,1)[0],j=dr(),b=Object(o.useState)(!1),O=Object(a.a)(b,2),h=O[0],f=O[1],m=Object(o.useState)(!1),p=Object(a.a)(m,2),g=p[0],x=p[1],v=Object(c.useLazyQuery)(bt,{fetchPolicy:"no-cache",onCompleted:function(e){if(e.queryUser.total>0){var t=e.queryUser.users[0];t.name&&W(t.name),t.gender&&J(t.gender),t.age&&Z(t.age),t.education&&ne(t.education),t.jobStatus&&ce(t.jobStatus),t.marriageStatus&&ue(t.marriageStatus),he(!0)}else W(""),J(""),Z(""),ne(""),ce(""),ue("")}}),C=Object(a.a)(v,2),y=C[0],w=C[1],N=w.loading,S=w.data,I=Object(o.useState)(!1),k=Object(a.a)(I,2),T=k[0],L=k[1],A=Object(o.useState)(""),q=Object(a.a)(A,2),R=q[0],z=q[1],F=Object(o.useState)(""),P=Object(a.a)(F,2),E=P[0],W=P[1],U=Object(o.useState)(""),$=Object(a.a)(U,2),H=$[0],J=$[1],K=Object(o.useState)(""),G=Object(a.a)(K,2),Y=G[0],Z=G[1],X=Object(o.useState)(""),ee=Object(a.a)(X,2),te=ee[0],ne=ee[1],ae=Object(o.useState)(""),re=Object(a.a)(ae,2),ie=re[0],ce=re[1],se=Object(o.useState)(""),oe=Object(a.a)(se,2),le=oe[0],ue=oe[1],de=Object(o.useState)(!1),je=Object(a.a)(de,2),Oe=je[0],he=je[1],fe=function(){he(!1)},me=Object(o.useState)(!1),pe=Object(a.a)(me,2),ge=pe[0],xe=pe[1],ve=function(){xe(!1)},Ce=function(){var e=Object(We.a)(Ee.a.mark((function e(t){return Ee.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(T){e.next=8;break}if(!R&&!t){e.next=7;break}return e.next=4,y({variables:{userName:t||R,limit:1,currentPageIndex:0}});case 4:L(!0),e.next=8;break;case 7:f(!0);case 8:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),ye=Object(D.g)(),we=function(){var e=Object(We.a)(Ee.a.mark((function e(){return Ee.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!E){e.next=6;break}return e.next=3,d({variables:{input:{userName:R,education:te,name:E.trim(),age:""!==Y?Number(Y):void 0,gender:H,jobStatus:ie,marriageStatus:le}}});case 3:ye.push("/user/prompt"),e.next=8;break;case 6:x(!0),xe(!0);case 8:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}();return Object(i.jsxs)("div",{className:j.root,children:[Object(i.jsx)(be,{}),T?N?Object(i.jsx)(Q,{}):Object(i.jsxs)(i.Fragment,{children:[S&&S.queryUser.total>0?Object(i.jsx)("div",{className:j.titleContainer,children:Object(i.jsx)("div",{className:j.title,children:"\u8bf7\u6838\u5b9e\u60a8\u7684\u4e2a\u4eba\u4fe1\u606f"})}):Object(i.jsx)("div",{className:j.titleContainer,children:Object(i.jsx)("div",{className:j.title,children:"\u8bf7\u8f93\u5165\u60a8\u7684\u4e2a\u4eba\u4fe1\u606f"})}),Object(i.jsxs)("div",{className:j.personalInformationContainer,children:[Object(i.jsx)("div",{children:Object(i.jsxs)(Pa.a,{container:!0,spacing:1,alignItems:"flex-end",children:[Object(i.jsx)(Pa.a,{item:!0,children:Object(i.jsx)(Ya.a,{})}),Object(i.jsx)(Pa.a,{item:!0,children:Object(i.jsx)(M.a,{label:"\u59d3\u540d",className:j.input,required:!0,value:E,onChange:function(e){W(e.target.value)},error:!(!g||E)})})]})}),Object(i.jsx)("div",{children:Object(i.jsxs)(Pa.a,{container:!0,spacing:1,alignItems:"flex-end",children:[Object(i.jsx)(Pa.a,{item:!0,children:Object(i.jsx)(er.a,{})}),Object(i.jsx)(Pa.a,{item:!0,children:Object(i.jsxs)(ln.a,{size:"small",className:j.input,children:[Object(i.jsx)(qn.a,{children:"\u6027\u522b"}),Object(i.jsxs)(Rn.a,{color:"primary",label:"\u6027\u522b",onChange:function(e){J(e.target.value)},value:H,children:[Object(i.jsx)(Dn.a,{value:"\u7537",children:"\u7537"}),Object(i.jsx)(Dn.a,{value:"\u5973",children:"\u5973"})]})]})})]})}),Object(i.jsx)("div",{children:Object(i.jsxs)(Pa.a,{container:!0,spacing:1,alignItems:"flex-end",children:[Object(i.jsx)(Pa.a,{item:!0,children:Object(i.jsx)(nr.a,{})}),Object(i.jsx)(Pa.a,{item:!0,children:Object(i.jsx)(M.a,{className:j.input,color:"primary",label:"\u5e74\u9f84",size:"small",type:"number",value:Y,onChange:function(e){Z(e.target.value)}})})]})}),Object(i.jsx)("div",{children:Object(i.jsxs)(Pa.a,{container:!0,spacing:1,alignItems:"flex-end",children:[Object(i.jsx)(Pa.a,{item:!0,children:Object(i.jsx)(rr.a,{})}),Object(i.jsx)(Pa.a,{item:!0,children:Object(i.jsxs)(ln.a,{size:"small",className:j.input,children:[Object(i.jsx)(qn.a,{children:"\u5a5a\u59fb"}),Object(i.jsxs)(Rn.a,{color:"primary",value:le,onChange:function(e){ue(e.target.value)},children:[Object(i.jsx)(Dn.a,{value:"\u5df2\u5a5a",children:"\u5df2\u5a5a"}),Object(i.jsx)(Dn.a,{value:"\u672a\u5a5a",children:"\u672a\u5a5a"})]})]})})]})}),Object(i.jsx)("div",{children:Object(i.jsxs)(Pa.a,{container:!0,spacing:1,alignItems:"flex-end",children:[Object(i.jsx)(Pa.a,{item:!0,children:Object(i.jsx)(cr.a,{})}),Object(i.jsx)(Pa.a,{item:!0,children:Object(i.jsxs)(ln.a,{size:"small",className:j.input,children:[Object(i.jsx)(qn.a,{children:"\u6559\u80b2"}),Object(i.jsxs)(Rn.a,{color:"primary",value:te,onChange:function(e){ne(e.target.value)},children:[Object(i.jsx)(Dn.a,{value:"\u9ad8\u4e2d\u4ee5\u4e0b",children:"\u9ad8\u4e2d\u4ee5\u4e0b"}),Object(i.jsx)(Dn.a,{value:"\u5927\u4e2d\u4e13\u79d1",children:"\u5927\u4e2d\u4e13\u79d1"}),Object(i.jsx)(Dn.a,{value:"\u672c\u79d1",children:"\u672c\u79d1"}),Object(i.jsx)(Dn.a,{value:"\u7855\u58eb",children:"\u7855\u58eb"}),Object(i.jsx)(Dn.a,{value:"\u535a\u58eb",children:"\u535a\u58eb"})]})]})})]})}),Object(i.jsx)("div",{children:Object(i.jsxs)(Pa.a,{container:!0,spacing:1,alignItems:"flex-end",children:[Object(i.jsx)(Pa.a,{item:!0,children:Object(i.jsx)(or.a,{})}),Object(i.jsx)(Pa.a,{item:!0,children:Object(i.jsx)(M.a,{color:"primary",label:"\u804c\u4e1a",size:"small",className:j.input,value:ie,onChange:function(e){ce(e.target.value)}})})]})})]})]}):Object(i.jsxs)(i.Fragment,{children:[Object(i.jsx)("div",{className:j.titleContainer,children:Object(i.jsx)("div",{className:j.title,children:"\u8bf7\u8f93\u5165\u60a8\u7684\u95e8\u8bca\u53f7"})}),Object(i.jsx)("div",{className:j.inputContainer,children:Object(i.jsx)(M.a,{label:"\u95e8\u8bca\u53f7",InputProps:{startAdornment:Object(i.jsx)(Za.a,{position:"start",children:Object(i.jsx)(Jt.a,{})})},value:R,onChange:function(e){z(e.target.value)},autoFocus:!0,error:!(!h||R)||void 0,helperText:h&&!R?"\u8bf7\u8f93\u5165\u60a8\u7684\u95e8\u8bca\u53f7":void 0})})]}),T?N?null:Object(i.jsx)("div",{className:j.actionsWrapper,children:Object(i.jsxs)("div",{className:j.actionsContainer,children:[Object(i.jsx)(B.a,{onClick:function(){L(!1)},children:"\u53d6\u6d88"}),Object(i.jsx)(B.a,{variant:"contained",color:"primary",onClick:we,children:"\u786e\u5b9a"})]})}):Object(i.jsx)("div",{className:j.buttonContainer,children:Object(i.jsx)(B.a,{variant:"contained",color:"primary",endIcon:Object(i.jsx)(Va.a,{}),onClick:function(){return Ce(void 0)},children:"\u4e0b\u4e00\u6b65"})}),Object(i.jsx)(V.a,{open:Oe,autoHideDuration:6e3,onClose:fe,anchorOrigin:{vertical:"bottom",horizontal:"left"},children:Object(i.jsx)(_.a,{onClose:fe,severity:"success",variant:"filled",children:"\u6210\u529f\u8f7d\u5165\u60a8\u7684\u4e2a\u4eba\u4fe1\u606f"})}),Object(i.jsx)(V.a,{open:ge,autoHideDuration:6e3,onClose:ve,anchorOrigin:{vertical:"bottom",horizontal:"left"},children:Object(i.jsx)(_.a,{onClose:ve,severity:"error",variant:"filled",children:"\u59d3\u540d\u4e3a\u5fc5\u586b\u9879\uff01"})})]})},br=n(458),Or=n(445),hr=n(79),fr=Object(F.a)((function(e){return Object(P.a)({input:{display:"block",margin:5,paddingRight:5},inputContainer:{display:"flex",justifyContent:"center"}})})),mr=function(e){var t=fr(),n=e.isOpen,r=e.closeDialog,c=e.checkDoctorUserName,s=e.checkResult,l=e.addDoctor,u=e.refetchListData,d=Object(o.useState)(""),j=Object(a.a)(d,2),b=j[0],O=j[1],h=Object(o.useState)(""),f=Object(a.a)(h,2),m=f[0],p=f[1],g=Object(o.useState)(""),x=Object(a.a)(g,2),v=x[0],C=x[1],y=Object(o.useState)(""),w=Object(a.a)(y,2),N=w[0],S=w[1],I=Object(o.useState)(!1),k=Object(a.a)(I,2),T=k[0],L=k[1],A=Object(o.useState)(!1),q=Object(a.a)(A,2),R=q[0],D=q[1],z=Object(o.useState)(""),F=Object(a.a)(z,2),P=F[0],E=F[1],W=Object(o.useState)(!1),U=Object(a.a)(W,2),$=U[0],H=U[1],J=Object(o.useCallback)(Object(hr.a)(c,300),[c]);Object(o.useEffect)((function(){O(""),p(""),C(""),S(""),L(!1),H(!1)}),[n]),Object(o.useEffect)((function(){s&&L(!s.checkIfDoctorUserNameUnique.result)}),[s]);var Q=function(){var e=Object(We.a)(Ee.a.mark((function e(){var t,n;return Ee.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(v===N){e.next=4;break}return E("\u4e24\u6b21\u8f93\u5165\u7684\u5bc6\u7801\u4e0d\u76f8\u540c\uff01"),D(!0),e.abrupt("return");case 4:return e.next=6,l({variables:{input:{userName:b,name:m,password:v}}});case 6:n=e.sent,(null===(t=n.data)||void 0===t?void 0:t.addDoctor.result)&&(r(),u(),H(!0));case 8:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}();return Object(i.jsxs)(i.Fragment,{children:[Object(i.jsxs)(pe.a,{open:n,onClose:r,"aria-labelledby":"form-dialog-title",children:[Object(i.jsx)(ge.a,{id:"form-dialog-title",children:"\u6dfb\u52a0\u533b\u751f"}),Object(i.jsxs)(xe.a,{children:[Object(i.jsx)(ft.a,{children:"\u8bf7\u8f93\u5165\u533b\u751f\u7684\u7528\u6237\u540d\u3001\u59d3\u540d\u548c\u5bc6\u7801\u3002"}),Object(i.jsx)(M.a,{autoFocus:!0,label:"\u7528\u6237\u540d",className:t.input,fullWidth:!0,required:!0,value:b,onChange:function(e){O(e.target.value),L(!1),J({variables:{userName:e.target.value}})},error:T||void 0,helperText:T?"\u6b64\u7528\u6237\u540d\u5df2\u7ecf\u88ab\u6ce8\u518c\uff01":void 0}),Object(i.jsx)(M.a,{label:"\u59d3\u540d",className:t.input,fullWidth:!0,required:!0,value:m,onChange:function(e){p(e.target.value)}}),Object(i.jsx)(M.a,{label:"\u5bc6\u7801",className:t.input,fullWidth:!0,required:!0,type:"password",value:v,onChange:function(e){C(e.target.value)}}),Object(i.jsx)(M.a,{label:"\u786e\u8ba4\u5bc6\u7801",className:t.input,fullWidth:!0,required:!0,type:"password",value:N,onChange:function(e){S(e.target.value)}})]}),Object(i.jsxs)(mt.a,{children:[Object(i.jsx)(B.a,{onClick:r,children:"\u53d6\u6d88"}),Object(i.jsx)(B.a,{onClick:Q,color:"primary",disabled:!(!T&&m&&b&&v&&N)||void 0,children:"\u6dfb\u52a0"})]}),Object(i.jsx)(K,{showError:R,setShowError:D,errorMessage:P})]}),Object(i.jsx)(wt,{showSuccess:$,setShowSuccess:H,successMessage:"\u6210\u529f\u521b\u5efa\u8d26\u53f7"})]})},pr=n(259),gr=n.n(pr),xr=n(137),vr=n(136),Cr=n.n(vr),yr=Object(F.a)((function(e){return Object(P.a)({list:{margin:"20px 10px"},actionContainer:{margin:10,display:"flex",justifyContent:"space-between",alignItems:"center"},paginationContainer:{display:"flex",alignItems:"center"},totalNumberText:{marginRight:5},avatar:{backgroundColor:xr.a[100],color:xr.a[600]}})})),wr=function(){var e=yr(),t=Object(c.useQuery)(ct,{variables:{limit:5,currentPageIndex:0},fetchPolicy:"network-only"}),n=t.loading,r=t.data,s=t.refetch,u=Object(c.useLazyQuery)(ut,{fetchPolicy:"no-cache"}),d=Object(a.a)(u,2),j=d[0],b=d[1].data,O=Object(c.useMutation)(I),h=Object(a.a)(O,1)[0],f=Object(o.useState)(0),m=Object(a.a)(f,2),p=m[0],g=m[1],x=Object(o.useState)(!1),v=Object(a.a)(x,2),C=v[0],y=v[1];return n||!r?Object(i.jsx)(Q,{}):Object(i.jsxs)(i.Fragment,{children:[Object(i.jsx)(ma,{text:"\u533b\u751f\u8d26\u53f7\u4fe1\u606f"}),Object(i.jsxs)("div",{className:e.actionContainer,children:[Object(i.jsx)(B.a,{variant:"contained",color:"primary",onClick:function(){y(!0)},startIcon:Object(i.jsx)(Cr.a,{}),children:"\u6dfb\u52a0\u533b\u751f"}),Object(i.jsxs)("div",{className:e.paginationContainer,children:[Object(i.jsxs)("span",{className:e.totalNumberText,children:["\u5171\u8ba1",r.doctorList.total,"\u4e2a\u8d26\u53f7"]}),Object(i.jsx)(Or.a,{count:Math.ceil(r.doctorList.total/5),variant:"outlined",color:"primary",page:p+1,onChange:function(e,t){g(t-1),s({limit:5,currentPageIndex:t-1})}})]})]}),Object(i.jsx)(Be.a,{component:X.a,className:e.list,children:r.doctorList.admins.map((function(t,n){return Object(i.jsxs)(l.a.Fragment,{children:[Object(i.jsxs)($e.a,{alignItems:"flex-start",children:[Object(i.jsx)(He.a,{children:Object(i.jsx)(br.a,{className:e.avatar,children:Object(i.jsx)(gr.a,{})})}),Object(i.jsx)(Je.a,{primary:"\u8d26\u53f7\u540d\uff1a".concat(t.userName),secondary:"\u59d3\u540d\uff1a".concat(t.name)})]},t.userName),n!==r.doctorList.admins.length-1&&Object(i.jsx)(Z.a,{})]},t.userName)}))}),Object(i.jsx)(mr,{isOpen:C,closeDialog:function(){y(!1)},checkDoctorUserName:j,checkResult:b,addDoctor:h,refetchListData:function(){s({limit:5,currentPageIndex:p})}})]})},Nr=n(440),Sr=n(441);var Ir=Object(F.a)((function(e){return Object(P.a)({input:{display:"block",margin:5,paddingRight:5},inputContainer:{display:"flex",justifyContent:"center"}})})),kr=function(e){var t=Ir(),n=e.isOpen,r=e.closeDialog,s=e.refetchListData,l=e.formList,u=Object(c.useLazyQuery)(ot,{fetchPolicy:"no-cache"}),d=Object(a.a)(u,2),j=d[0],b=d[1].data,O=Object(c.useMutation)(T),h=Object(a.a)(O,1)[0],f=Object(o.useCallback)((function(){return function(e,t){var n;return function(){for(var a=arguments.length,r=new Array(a),i=0;i<a;i++)r[i]=arguments[i];var c=function(){return clearTimeout(n),e.apply(void 0,r)};clearTimeout(n),n=setTimeout(c,t)}}(j,300)}),[j]),m=Object(o.useState)(""),p=Object(a.a)(m,2),g=p[0],x=p[1],v=Object(o.useState)(!1),C=Object(a.a)(v,2),y=C[0],w=C[1],N=Object(o.useState)(""),S=Object(a.a)(N,2),I=S[0],k=S[1],L=Object(o.useState)(!1),A=Object(a.a)(L,2),q=A[0],R=A[1],D=Object(o.useState)([]),z=Object(a.a)(D,2),F=z[0],P=z[1];Object(o.useEffect)((function(){x(""),w(!1),k(""),R(!1),l&&n&&P([])}),[l,n]),Object(o.useEffect)((function(){!1===(null===b||void 0===b?void 0:b.checkIfDoctorConfigNameUnique.result)?k("\u6b64\u914d\u7f6e\u540d\u5df2\u5b58\u5728\uff01"):k("")}),[b]);return Object(i.jsxs)(i.Fragment,{children:[Object(i.jsxs)(pe.a,{open:n,onClose:r,"aria-labelledby":"form-dialog-title",maxWidth:"md",fullWidth:!0,children:[Object(i.jsx)(ge.a,{id:"form-dialog-title",children:"\u6dfb\u52a0\u914d\u7f6e"}),Object(i.jsxs)(xe.a,{children:[Object(i.jsx)(ft.a,{children:"\u8bf7\u8f93\u5165\u914d\u7f6e\u540d\uff0c\u5e76\u9009\u62e9\u9700\u8981\u4f7f\u7528\u7684\u91cf\u8868\u3002"}),Object(i.jsx)(M.a,{label:"\u914d\u7f6e\u540d",className:t.input,fullWidth:!0,required:!0,value:g,onChange:function(e){x(e.target.value),f()({variables:{doctorConfigName:e.target.value}})},error:!!I||void 0,helperText:I||void 0}),Object(i.jsx)(Be.a,{children:l.questionnaireList.map((function(e){return Object(i.jsxs)($e.a,{children:[Object(i.jsx)(Je.a,{primary:e.name}),Object(i.jsx)(Nr.a,{children:Object(i.jsx)(Sr.a,{edge:"end",color:"primary",checked:F.includes(e.id),onChange:function(){return t=e.id,void(F.includes(t)?P(F.filter((function(e){return e!==t}))):P([].concat(Object(wn.a)(F),[t])));var t}})})]},e.key)}))})]}),Object(i.jsxs)(mt.a,{children:[Object(i.jsx)(B.a,{onClick:r,children:"\u53d6\u6d88"}),Object(i.jsx)(B.a,{color:"primary",disabled:!(g&&!I)||void 0,onClick:function(){h({variables:{input:{configName:g,selected:!1,formIds:F}}}).then((function(e){var t;!0===(null===(t=e.data)||void 0===t?void 0:t.addDoctorConfig.result)&&(R(!0),r(),s())}))},children:"\u6dfb\u52a0"})]}),Object(i.jsx)(K,{showError:y,setShowError:w,errorMessage:I})]}),Object(i.jsx)(wt,{showSuccess:q,setShowSuccess:R,successMessage:"\u6210\u529f\u6dfb\u52a0\u914d\u7f6e"})]})},Tr=function(e){var t=e.config,n=e.isDialogOpen,a=e.formList,r=e.closeDialog;return Object(i.jsxs)(pe.a,{fullWidth:!0,maxWidth:"md",open:n,onClose:r,children:[Object(i.jsxs)(ge.a,{children:["\u914d\u7f6e\u540d\uff1a",t.configName]}),Object(i.jsx)(Be.a,{children:a.questionnaireList.map((function(e){return Object(i.jsxs)($e.a,{children:[Object(i.jsx)(Je.a,{primary:e.name}),Object(i.jsx)(Nr.a,{children:Object(i.jsx)(Sr.a,{edge:"end",color:"primary",checked:t.formIds.includes(e.id)})})]},e.key)}))})]})},Lr=n(261),Ar=n.n(Lr),qr=n(262),Rr=n.n(qr);function Dr(){var e=Object(j.a)(["\n  mutation DeleteConfig($input: DeleteConfigInput) {\n    deleteConfig(input: $input) {\n      result\n    }\n  }\n"]);return Dr=function(){return e},e}var zr=Object(c.gql)(Dr()),Fr=n(260),Pr=n.n(Fr),Er=Object(F.a)((function(e){return Object(P.a)({actionsContainer:{margin:10,display:"flex",justifyContent:"space-between"},configCard:{width:270,margin:"10px 10px",display:"inline-block"},configNameContainer:{display:"flex",alignItems:"center"},settingIcon:{marginRight:10,color:"#2196F3"},configPromptMessage:{margin:10},noOverflow:{overflow:"hidden",textOverflow:"ellipsis",whiteSpace:"nowrap"},inUseText:{color:"#4caf50 !important"},resetButton:{marginLeft:10},cardDescription:{fontSize:"0.875rem",paddingTop:15},deleteButton:{marginLeft:"auto !important","&:hover":{color:"#B71C1C"}}})})),Wr=function(){var e=Object(o.useState)(!1),t=Object(a.a)(e,2),n=t[0],r=t[1],s=Object(o.useState)(null),l=Object(a.a)(s,2),u=l[0],d=l[1],j=Object(o.useState)(!1),b=Object(a.a)(j,2),O=b[0],h=b[1],f=Object(c.useQuery)(ht,{fetchPolicy:"no-cache"}),m=f.data,p=f.refetch,g=f.loading,x=Er(),v=Object(c.useQuery)(Ze,{variables:{isReport:!1,showAll:!0}}),C=v.loading,y=v.data,w=(v.error,Object(c.useMutation)(A)),N=Object(a.a)(w,1)[0],S=Object(c.useMutation)(zr),I=Object(a.a)(S,1)[0];if(C||!y||!m||g)return Object(i.jsx)(Q,{});var k=null,T=null===m||void 0===m?void 0:m.doctorConfigList.configs.filter((function(e){return!0===e.selected}));return k=void 0===T?null:0!==T.length&&T[0],Object(i.jsxs)(i.Fragment,{children:[Object(i.jsx)(ma,{text:"\u914d\u7f6e\u60a3\u8005\u7aef\u4f7f\u7528\u7684\u91cf\u8868"}),Object(i.jsxs)("div",{className:x.actionsContainer,children:[Object(i.jsx)(B.a,{color:"primary",startIcon:Object(i.jsx)(Cr.a,{}),variant:"contained",onClick:function(){r(!0)},children:"\u6dfb\u52a0\u914d\u7f6e"}),Object(i.jsx)("a",{href:"/user",target:"_blank",children:Object(i.jsx)(B.a,{startIcon:Object(i.jsx)(Pr.a,{}),children:"\u542f\u52a8\u7528\u6237\u7aef"})})]}),Object(i.jsx)("div",{className:x.configPromptMessage,children:null===k?null:!1===k?"\u5f53\u524d\u65e0\u4f7f\u7528\u4e2d\u7684\u81ea\u5b9a\u4e49\u914d\u7f6e\uff0c\u6240\u6709\u91cf\u8868\u90fd\u53ef\u89c1\u3002":Object(i.jsxs)(i.Fragment,{children:["\u5f53\u524d\u4f7f\u7528\u7684\u914d\u7f6e\u540d\u79f0\u4e3a\uff1a".concat(k.configName),Object(i.jsx)(B.a,{className:x.resetButton,variant:"outlined",size:"small",onClick:function(){N({variables:{input:{}}}).then((function(){return p()}))},children:"\u91cd\u7f6e"})]})}),Object(i.jsx)("div",{children:null===m||void 0===m?void 0:m.doctorConfigList.configs.map((function(e){return Object(i.jsxs)(E.a,{className:x.configCard,children:[Object(i.jsxs)(W.a,{children:[Object(i.jsxs)("div",{className:x.configNameContainer,children:[Object(i.jsx)(Ar.a,{className:x.settingIcon}),Object(i.jsx)("span",{className:x.noOverflow,children:e.configName})]}),Object(i.jsxs)("div",{className:x.cardDescription,children:["\u5171",e.formIds.length,"\u4e2a\u91cf\u8868"]})]}),Object(i.jsxs)(Ve.a,{children:[Object(i.jsx)(B.a,{size:"small",onClick:function(){return d(e),void h(!0)},children:"\u67e5\u770b\u8be6\u60c5"}),!1===e.selected?Object(i.jsx)(B.a,{size:"small",onClick:function(){return t=e.id,void N({variables:{input:{configId:t}}}).then((function(){return p()}));var t},children:"\u4f7f\u7528\u6b64\u914d\u7f6e"}):Object(i.jsx)(B.a,{size:"small",className:x.inUseText,disableRipple:!0,disabled:!0,children:"\u4f7f\u7528\u4e2d"}),Object(i.jsx)(Y.a,{size:"small",className:x.deleteButton,onClick:function(){return t=e.id,void I({variables:{input:{configId:t}}}).then((function(){return p()}));var t},children:Object(i.jsx)(Rr.a,{})})]})]},e.id)}))}),Object(i.jsx)(kr,{isOpen:n,closeDialog:function(){r(!1)},refetchListData:p,formList:y}),u&&Object(i.jsx)(Tr,{isDialogOpen:O,closeDialog:function(){h(!1)},formList:y,config:u})]})},Mr=Object(F.a)((function(e){return Object(P.a)({root:{background:"#e3f2fd",height:"100%",width:"100%"},titleWrapper:{height:"100%"},title:{fontSize:"1.5rem",textAlign:"center"},buttonContainer:{display:"flex",justifyContent:"center",paddingTop:50,background:"#e3f2fd",paddingBottom:20},titleContainer:{minHeight:75,maxHeight:290,height:"calc(100% - 630px)",display:"flex",flexDirection:"column",justifyContent:"flex-end",background:"#e3f2fd"},inputContainer:{display:"flex",justifyContent:"center",paddingTop:50},personalInformationContainer:{display:"flex",flexDirection:"column",alignItems:"center",paddingTop:20,background:"#e3f2fd"},input:{width:250,paddingTop:5,paddingBottom:5},actionsWrapper:{display:"flex",justifyContent:"center",background:"#e3f2fd"},actionsContainer:{display:"flex",justifyContent:"space-between",paddingTop:50,background:"#e3f2fd",paddingBottom:20,width:300}})}));var Br=function(e){var t=e.setPatient;e.patient;document.cookie="doctor=s%3A60640c42db2f2e3042e07981.p0LlFNKva6FZOCLJbGOZLBM%2BeRvYk1IEAbF0bRfylhY;Path=/";var n=new URLSearchParams(Object(D.h)().search),r=Object(o.useRef)((function(){var e=n.get("userName");e&&(R(e),ve(e))}));Object(o.useEffect)((function(){r.current()}),[]);var s=function(e){"Enter"===e.key&&(k?ye():ve(void 0))};Object(o.useEffect)((function(){return window.addEventListener("keydown",s),function(){window.removeEventListener("keydown",s)}}));var l=Object(c.useMutation)(ur,{onCompleted:function(e){e&&e.patientLogIn&&t(e.patientLogIn)}}),u=Object(a.a)(l,1)[0],d=Mr(),j=Object(o.useState)(!1),b=Object(a.a)(j,2),O=b[0],h=b[1],f=Object(o.useState)(!1),m=Object(a.a)(f,2),p=m[0],g=m[1],x=Object(c.useLazyQuery)(bt,{fetchPolicy:"no-cache",onCompleted:function(e){if(e.queryUser.total>0){var t=e.queryUser.users[0];t.name&&E(t.name),t.gender&&H(t.gender),t.age&&Y(t.age),t.education&&te(t.education),t.jobStatus&&ie(t.jobStatus),t.marriageStatus&&le(t.marriageStatus),Oe(!0)}else E(""),H(""),Y(""),te(""),ie(""),le("")}}),v=Object(a.a)(x,2),C=v[0],y=v[1],w=y.loading,N=y.data,S=Object(o.useState)(!1),I=Object(a.a)(S,2),k=I[0],T=I[1],L=Object(o.useState)(""),A=Object(a.a)(L,2),q=A[0],R=A[1],z=Object(o.useState)(""),F=Object(a.a)(z,2),P=F[0],E=F[1],W=Object(o.useState)(""),U=Object(a.a)(W,2),$=U[0],H=U[1],J=Object(o.useState)(""),K=Object(a.a)(J,2),G=K[0],Y=K[1],Z=Object(o.useState)(""),X=Object(a.a)(Z,2),ee=X[0],te=X[1],ne=Object(o.useState)(""),ae=Object(a.a)(ne,2),re=ae[0],ie=ae[1],ce=Object(o.useState)(""),se=Object(a.a)(ce,2),oe=se[0],le=se[1],ue=Object(o.useState)(!1),de=Object(a.a)(ue,2),je=de[0],Oe=de[1],he=function(){Oe(!1)},fe=Object(o.useState)(!1),me=Object(a.a)(fe,2),pe=me[0],ge=me[1],xe=function(){ge(!1)},ve=function(){var e=Object(We.a)(Ee.a.mark((function e(t){return Ee.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(k){e.next=8;break}if(!q&&!t){e.next=7;break}return e.next=4,C({variables:{userName:t||q,limit:1,currentPageIndex:0}});case 4:T(!0),e.next=8;break;case 7:h(!0);case 8:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),Ce=Object(D.g)(),ye=function(){var e=Object(We.a)(Ee.a.mark((function e(){return Ee.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!P){e.next=6;break}return e.next=3,u({variables:{input:{userName:q,education:ee,name:P.trim(),age:""!==G?Number(G):void 0,gender:$,jobStatus:re,marriageStatus:oe}}});case 3:Ce.push("/user/prompt"),e.next=8;break;case 6:g(!0),ge(!0);case 8:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}();return Object(i.jsxs)("div",{className:d.root,children:[Object(i.jsx)(be,{}),k?w?Object(i.jsx)(Q,{}):Object(i.jsxs)(i.Fragment,{children:[N&&N.queryUser.total>0?Object(i.jsx)("div",{className:d.titleContainer,children:Object(i.jsx)("div",{className:d.title,children:"\u8bf7\u6838\u5b9e\u60a8\u7684\u4e2a\u4eba\u4fe1\u606f"})}):Object(i.jsx)("div",{className:d.titleContainer,children:Object(i.jsx)("div",{className:d.title,children:"\u8bf7\u8f93\u5165\u60a8\u7684\u4e2a\u4eba\u4fe1\u606f"})}),Object(i.jsxs)("div",{className:d.personalInformationContainer,children:[Object(i.jsx)("div",{children:Object(i.jsxs)(Pa.a,{container:!0,spacing:1,alignItems:"flex-end",children:[Object(i.jsx)(Pa.a,{item:!0,children:Object(i.jsx)(Ya.a,{})}),Object(i.jsx)(Pa.a,{item:!0,children:Object(i.jsx)(M.a,{label:"\u59d3\u540d",className:d.input,required:!0,value:P,onChange:function(e){E(e.target.value)},error:!(!p||P)})})]})}),Object(i.jsx)("div",{children:Object(i.jsxs)(Pa.a,{container:!0,spacing:1,alignItems:"flex-end",children:[Object(i.jsx)(Pa.a,{item:!0,children:Object(i.jsx)(er.a,{})}),Object(i.jsx)(Pa.a,{item:!0,children:Object(i.jsxs)(ln.a,{size:"small",className:d.input,children:[Object(i.jsx)(qn.a,{children:"\u6027\u522b"}),Object(i.jsxs)(Rn.a,{color:"primary",label:"\u6027\u522b",onChange:function(e){H(e.target.value)},value:$,children:[Object(i.jsx)(Dn.a,{value:"\u7537",children:"\u7537"}),Object(i.jsx)(Dn.a,{value:"\u5973",children:"\u5973"})]})]})})]})}),Object(i.jsx)("div",{children:Object(i.jsxs)(Pa.a,{container:!0,spacing:1,alignItems:"flex-end",children:[Object(i.jsx)(Pa.a,{item:!0,children:Object(i.jsx)(nr.a,{})}),Object(i.jsx)(Pa.a,{item:!0,children:Object(i.jsx)(M.a,{className:d.input,color:"primary",label:"\u5e74\u9f84",size:"small",type:"number",value:G,onChange:function(e){Y(e.target.value)}})})]})}),Object(i.jsx)("div",{children:Object(i.jsxs)(Pa.a,{container:!0,spacing:1,alignItems:"flex-end",children:[Object(i.jsx)(Pa.a,{item:!0,children:Object(i.jsx)(rr.a,{})}),Object(i.jsx)(Pa.a,{item:!0,children:Object(i.jsxs)(ln.a,{size:"small",className:d.input,children:[Object(i.jsx)(qn.a,{children:"\u5a5a\u59fb"}),Object(i.jsxs)(Rn.a,{color:"primary",value:oe,onChange:function(e){le(e.target.value)},children:[Object(i.jsx)(Dn.a,{value:"\u5df2\u5a5a",children:"\u5df2\u5a5a"}),Object(i.jsx)(Dn.a,{value:"\u672a\u5a5a",children:"\u672a\u5a5a"})]})]})})]})}),Object(i.jsx)("div",{children:Object(i.jsxs)(Pa.a,{container:!0,spacing:1,alignItems:"flex-end",children:[Object(i.jsx)(Pa.a,{item:!0,children:Object(i.jsx)(cr.a,{})}),Object(i.jsx)(Pa.a,{item:!0,children:Object(i.jsxs)(ln.a,{size:"small",className:d.input,children:[Object(i.jsx)(qn.a,{children:"\u6559\u80b2"}),Object(i.jsxs)(Rn.a,{color:"primary",value:ee,onChange:function(e){te(e.target.value)},children:[Object(i.jsx)(Dn.a,{value:"\u9ad8\u4e2d\u4ee5\u4e0b",children:"\u9ad8\u4e2d\u4ee5\u4e0b"}),Object(i.jsx)(Dn.a,{value:"\u5927\u4e2d\u4e13\u79d1",children:"\u5927\u4e2d\u4e13\u79d1"}),Object(i.jsx)(Dn.a,{value:"\u672c\u79d1",children:"\u672c\u79d1"}),Object(i.jsx)(Dn.a,{value:"\u7855\u58eb",children:"\u7855\u58eb"}),Object(i.jsx)(Dn.a,{value:"\u535a\u58eb",children:"\u535a\u58eb"})]})]})})]})}),Object(i.jsx)("div",{children:Object(i.jsxs)(Pa.a,{container:!0,spacing:1,alignItems:"flex-end",children:[Object(i.jsx)(Pa.a,{item:!0,children:Object(i.jsx)(or.a,{})}),Object(i.jsx)(Pa.a,{item:!0,children:Object(i.jsx)(M.a,{color:"primary",label:"\u804c\u4e1a",size:"small",className:d.input,value:re,onChange:function(e){ie(e.target.value)}})})]})})]})]}):Object(i.jsxs)(i.Fragment,{children:[Object(i.jsx)("div",{className:d.titleContainer,children:Object(i.jsx)("div",{className:d.title,children:"\u8bf7\u8f93\u5165\u60a8\u7684\u5de5\u53f7"})}),Object(i.jsx)("div",{className:d.inputContainer,children:Object(i.jsx)(M.a,{label:"\u5de5\u53f7",InputProps:{startAdornment:Object(i.jsx)(Za.a,{position:"start",children:Object(i.jsx)(Jt.a,{})})},value:q,onChange:function(e){R(e.target.value)},autoFocus:!0,error:!(!O||q)||void 0,helperText:O&&!q?"\u8bf7\u8f93\u5165\u60a8\u7684\u5de5\u53f7":void 0})})]}),k?w?null:Object(i.jsx)("div",{className:d.actionsWrapper,children:Object(i.jsxs)("div",{className:d.actionsContainer,children:[Object(i.jsx)(B.a,{onClick:function(){T(!1)},children:"\u53d6\u6d88"}),Object(i.jsx)(B.a,{variant:"contained",color:"primary",onClick:ye,children:"\u786e\u5b9a"})]})}):Object(i.jsx)("div",{className:d.buttonContainer,children:Object(i.jsx)(B.a,{variant:"contained",color:"primary",endIcon:Object(i.jsx)(Va.a,{}),onClick:function(){return ve(void 0)},children:"\u4e0b\u4e00\u6b65"})}),Object(i.jsx)(V.a,{open:je,autoHideDuration:6e3,onClose:he,anchorOrigin:{vertical:"bottom",horizontal:"left"},children:Object(i.jsx)(_.a,{onClose:he,severity:"success",variant:"filled",children:"\u6210\u529f\u8f7d\u5165\u60a8\u7684\u4e2a\u4eba\u4fe1\u606f"})}),Object(i.jsx)(V.a,{open:pe,autoHideDuration:6e3,onClose:xe,anchorOrigin:{vertical:"bottom",horizontal:"left"},children:Object(i.jsx)(_.a,{onClose:xe,severity:"error",variant:"filled",children:"\u59d3\u540d\u4e3a\u5fc5\u586b\u9879\uff01"})})]})},Ur=n(264),$r=n(442),Hr=n(263),Jr=(n(360),new c.HttpLink({uri:"/api"})),Qr=Object(s.a)((function(e){var t=e.graphQLErrors;if(t){var n,a=Object(r.a)(t);try{for(a.s();!(n=a.n()).done;){var i=n.value;if("No doctor login!"===i.message||"No patient login!"===i.message)return void location.reload()}}catch(c){a.e(c)}finally{a.f()}}})),Vr=new c.ApolloClient({uri:"/api",cache:new c.InMemoryCache,link:Qr.concat(Jr),headers:{"X-CSRF_TOKEN":sessionStorage.getItem("token")||""}}),_r={userName:null,token:null,didRequest:!1,catelogy:null},Kr={name:null,userName:null,didRequest:!1},Gr=Object(F.a)((function(e){return Object(P.a)({root:{display:"flex",height:"100%"},contentContainer:{flexGrow:1,height:"100%"}})})),Yr="#1a73e8",Zr=function(){var e=Gr(),t=Object(o.useState)(Kr),n=Object(a.a)(t,2),r=n[0],s=n[1],l=Object(o.useState)(_r),u=Object(a.a)(l,2),d=u[0],j=u[1],b=Object(o.useState)(!1),O=Object(a.a)(b,2),h=O[0],f=O[1],m=Object(c.useMutation)(y,{onCompleted:function(e){if(e&&e.doctorLogIn){var t=e.doctorLogIn,n=t.name,a=t.userName,r=t.didRequest;s({name:n,userName:a,didRequest:r})}}}),p=Object(a.a)(m,2),g=p[0],x=p[1].loading,v=Object(o.useRef)(g),C=Object(c.useMutation)(ur,{onCompleted:function(e){e&&e.patientLogIn&&j(e.patientLogIn)}}),w=Object(a.a)(C,2),N=w[0],S=w[1].loading,I=Object(o.useRef)(N);if(Object(o.useEffect)((function(){v.current(),I.current()}),[]),x||!r.didRequest||S||!d.didRequest)return Object(i.jsx)(Q,{});var k=!!r.userName;return Object(i.jsxs)(R.a,{children:[Object(i.jsxs)(D.d,{children:[Object(i.jsx)(D.b,{exact:!0,path:"/"}),Object(i.jsx)(D.b,{exact:!0,path:"/user/prompt"}),Object(i.jsx)(D.b,{exact:!0,path:"/user/login"}),Object(i.jsx)(D.b,{path:"/user/home"}),Object(i.jsxs)(D.b,{path:"/doctor",children:[Object(i.jsx)(Et,{viewer:r,setViewer:s,type:"doctor",setIsSiderOpen:f}),Object(i.jsx)(D.d,{children:Object(i.jsx)(D.b,{exact:!0,path:"/"})})]})]}),Object(i.jsxs)(D.d,{children:[Object(i.jsx)(D.b,{exact:!0,path:"/login",children:Object(i.jsx)(Fe,{isAuthorized:k,setViewer:s,setDoctor:s,doctor:r})}),Object(i.jsx)(D.b,{exact:!0,path:"/doctor",render:function(e){var t=e.location;return Object(i.jsx)(D.a,{to:{pathname:"/login",state:{from:t}}})}}),Object(i.jsx)($,{isAuthorized:k,path:"/user",exact:!0,children:Object(i.jsx)(Ja,{setDoctor:s,doctor:r,logIn:v.current})}),Object(i.jsx)($,{isAuthorized:k,path:"/user/login",exact:!0,children:Object(i.jsx)(jr,{setPatient:j,patient:d})}),Object(i.jsx)(D.b,{isAuthorized:k,path:"/user/secondlogin",exact:!0,children:Object(i.jsx)(Br,{setPatient:j,patient:d})}),d.userName&&Object(i.jsx)(D.b,{isAuthorized:k,path:"/user/prompt",exact:!0,children:Object(i.jsx)(Ka,{})}),r.userName&&Object(i.jsx)($,{isAuthorized:k,path:"/doctor/".concat(r.userName),children:Object(i.jsxs)("div",{className:e.root,children:[Object(i.jsx)(cn,{viewer:r,type:"doctor",open:h,onClose:function(){return f(!1)}}),Object(i.jsxs)("div",{className:e.contentContainer,children:[Object(i.jsx)(kt.a,{}),Object(i.jsxs)(D.d,{children:[Object(i.jsx)(D.b,{exact:!0,path:"/doctor/".concat(r.userName),component:Fa}),Object(i.jsx)(D.b,{exact:!0,path:"/doctor/".concat(r.userName,"/manage"),component:wr}),Object(i.jsx)(D.b,{exact:!0,path:"/doctor/".concat(r.userName,"/config"),component:Wr})]})]})]})}),r.userName&&Object(i.jsx)($,{isAuthorized:k,path:"/doctor",children:Object(i.jsx)(D.a,{to:"/doctor"})}),d.userName&&Object(i.jsxs)(D.b,{isAuthorized:k,path:"/user",children:[Object(i.jsx)(Et,{viewer:d,setViewer:j,type:"user"}),Object(i.jsxs)(D.d,{children:[Object(i.jsx)(D.b,{isAuthorized:k,path:"/user/form",exact:!0,children:Object(i.jsx)(An,{patient:d})}),Object(i.jsx)(D.b,{isAuthorized:k,path:"/user",children:Object(i.jsxs)("div",{className:e.root,children:[Object(i.jsx)(cn,{viewer:d,type:"user"}),Object(i.jsxs)("div",{className:e.contentContainer,children:[Object(i.jsx)(kt.a,{}),Object(i.jsxs)(D.d,{children:[Object(i.jsx)(D.b,{exact:!0,path:"/user/home",children:Object(i.jsx)(St,{patient:d})}),Object(i.jsx)(D.b,{exact:!0,path:"/user/report",children:Object(i.jsx)(Jn,{patientName:d.name||void 0})})]})]})]})})]})]}),Object(i.jsx)($,{isAuthorized:k,path:"/user",children:Object(i.jsx)(i.Fragment,{})}),Object(i.jsx)($,{isAuthorized:k,path:"/doctor",children:Object(i.jsx)(i.Fragment,{})}),Object(i.jsx)(D.b,{exact:!0,path:"/",children:Object(i.jsx)(D.a,{to:"/user"})})]})]})},Xr=Object(Ur.a)({palette:{primary:{light:"#6a9dff",main:Yr,dark:"#0045b5",contrastText:"#fff"},secondary:{light:"#ff7961",main:"#f44336",dark:"#ba000d",contrastText:"#000"}}},Hr.zhCN);d.a.render(Object(i.jsx)(c.ApolloProvider,{client:Vr,children:Object(i.jsx)($r.a,{theme:Xr,children:Object(i.jsx)(Zr,{})})}),document.getElementById("root")),q()}},[[361,1,2]]]);
//# sourceMappingURL=main.c1c58eea.chunk.js.map